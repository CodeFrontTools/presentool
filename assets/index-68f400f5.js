var Bl=Object.defineProperty;var _l=(t,e,o)=>e in t?Bl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var vn=(t,e,o)=>(_l(t,typeof e!="symbol"?e+"":e,o),o),Ns=(t,e,o)=>{if(!e.has(t))throw TypeError("Cannot "+o)};var j=(t,e,o)=>(Ns(t,e,"read from private field"),o?o.call(t):e.get(t)),be=(t,e,o)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,o)},ye=(t,e,o,n)=>(Ns(t,e,"write to private field"),n?n.call(t,o):e.set(t,o),o);var ci=(t,e,o,n)=>({set _(i){ye(t,e,i,o)},get _(){return j(t,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();function Vi(t,e){const o=Object.create(null),n=t.split(",");for(let i=0;i<n.length;i++)o[n[i]]=!0;return e?i=>!!o[i.toLowerCase()]:i=>!!o[i]}const we={},fo=[],ut=()=>{},Il=()=>!1,Ml=/^on[^a-z]/,Kn=t=>Ml.test(t),Xi=t=>t.startsWith("onUpdate:"),Oe=Object.assign,Zi=(t,e)=>{const o=t.indexOf(e);o>-1&&t.splice(o,1)},Al=Object.prototype.hasOwnProperty,ae=(t,e)=>Al.call(t,e),oe=Array.isArray,po=t=>qn(t)==="[object Map]",jr=t=>qn(t)==="[object Set]",ie=t=>typeof t=="function",Be=t=>typeof t=="string",Gi=t=>typeof t=="symbol",ke=t=>t!==null&&typeof t=="object",$r=t=>ke(t)&&ie(t.then)&&ie(t.catch),Ur=Object.prototype.toString,qn=t=>Ur.call(t),Ol=t=>qn(t).slice(8,-1),zr=t=>qn(t)==="[object Object]",Ji=t=>Be(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Bn=Vi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yn=t=>{const e=Object.create(null);return o=>e[o]||(e[o]=t(o))},Ll=/-(\w)/g,Et=Yn(t=>t.replace(Ll,(e,o)=>o?o.toUpperCase():"")),Rl=/\B([A-Z])/g,Oo=Yn(t=>t.replace(Rl,"-$1").toLowerCase()),Vn=Yn(t=>t.charAt(0).toUpperCase()+t.slice(1)),di=Yn(t=>t?`on${Vn(t)}`:""),Qo=(t,e)=>!Object.is(t,e),ui=(t,e)=>{for(let o=0;o<t.length;o++)t[o](e)},Ln=(t,e,o)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:o})},Nl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ps;const Ei=()=>Ps||(Ps=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xn(t){if(oe(t)){const e={};for(let o=0;o<t.length;o++){const n=t[o],i=Be(n)?Hl(n):Xn(n);if(i)for(const s in i)e[s]=i[s]}return e}else{if(Be(t))return t;if(ke(t))return t}}const Pl=/;(?![^(]*\))/g,Dl=/:([^]+)/,Fl=/\/\*[^]*?\*\//g;function Hl(t){const e={};return t.replace(Fl,"").split(Pl).forEach(o=>{if(o){const n=o.split(Dl);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function ge(t){let e="";if(Be(t))e=t;else if(oe(t))for(let o=0;o<t.length;o++){const n=ge(t[o]);n&&(e+=n+" ")}else if(ke(t))for(const o in t)t[o]&&(e+=o+" ");return e.trim()}const jl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$l=Vi(jl);function Wr(t){return!!t||t===""}const Ul=t=>Be(t)?t:t==null?"":oe(t)||ke(t)&&(t.toString===Ur||!ie(t.toString))?JSON.stringify(t,Kr,2):String(t),Kr=(t,e)=>e&&e.__v_isRef?Kr(t,e.value):po(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((o,[n,i])=>(o[`${n} =>`]=i,o),{})}:jr(e)?{[`Set(${e.size})`]:[...e.values()]}:ke(e)&&!oe(e)&&!zr(e)?String(e):e;let nt;class zl{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=nt,!e&&nt&&(this.index=(nt.scopes||(nt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const o=nt;try{return nt=this,e()}finally{nt=o}}}on(){nt=this}off(){nt=this.parent}stop(e){if(this._active){let o,n;for(o=0,n=this.effects.length;o<n;o++)this.effects[o].stop();for(o=0,n=this.cleanups.length;o<n;o++)this.cleanups[o]();if(this.scopes)for(o=0,n=this.scopes.length;o<n;o++)this.scopes[o].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Wl(t,e=nt){e&&e.active&&e.effects.push(t)}function Kl(){return nt}const Qi=t=>{const e=new Set(t);return e.w=0,e.n=0,e},qr=t=>(t.w&zt)>0,Yr=t=>(t.n&zt)>0,ql=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=zt},Yl=t=>{const{deps:e}=t;if(e.length){let o=0;for(let n=0;n<e.length;n++){const i=e[n];qr(i)&&!Yr(i)?i.delete(t):e[o++]=i,i.w&=~zt,i.n&=~zt}e.length=o}},Rn=new WeakMap;let $o=0,zt=1;const Ci=30;let st;const Gt=Symbol(""),Si=Symbol("");class es{constructor(e,o=null,n){this.fn=e,this.scheduler=o,this.active=!0,this.deps=[],this.parent=void 0,Wl(this,n)}run(){if(!this.active)return this.fn();let e=st,o=$t;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=st,st=this,$t=!0,zt=1<<++$o,$o<=Ci?ql(this):Ds(this),this.fn()}finally{$o<=Ci&&Yl(this),zt=1<<--$o,st=this.parent,$t=o,this.parent=void 0,this.deferStop&&this.stop()}}stop(){st===this?this.deferStop=!0:this.active&&(Ds(this),this.onStop&&this.onStop(),this.active=!1)}}function Ds(t){const{deps:e}=t;if(e.length){for(let o=0;o<e.length;o++)e[o].delete(t);e.length=0}}let $t=!0;const Vr=[];function Lo(){Vr.push($t),$t=!1}function Ro(){const t=Vr.pop();$t=t===void 0?!0:t}function qe(t,e,o){if($t&&st){let n=Rn.get(t);n||Rn.set(t,n=new Map);let i=n.get(o);i||n.set(o,i=Qi()),Xr(i)}}function Xr(t,e){let o=!1;$o<=Ci?Yr(t)||(t.n|=zt,o=!qr(t)):o=!t.has(st),o&&(t.add(st),st.deps.push(t))}function At(t,e,o,n,i,s){const r=Rn.get(t);if(!r)return;let a=[];if(e==="clear")a=[...r.values()];else if(o==="length"&&oe(t)){const l=Number(n);r.forEach((c,d)=>{(d==="length"||d>=l)&&a.push(c)})}else switch(o!==void 0&&a.push(r.get(o)),e){case"add":oe(t)?Ji(o)&&a.push(r.get("length")):(a.push(r.get(Gt)),po(t)&&a.push(r.get(Si)));break;case"delete":oe(t)||(a.push(r.get(Gt)),po(t)&&a.push(r.get(Si)));break;case"set":po(t)&&a.push(r.get(Gt));break}if(a.length===1)a[0]&&Ti(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Ti(Qi(l))}}function Ti(t,e){const o=oe(t)?t:[...t];for(const n of o)n.computed&&Fs(n);for(const n of o)n.computed||Fs(n)}function Fs(t,e){(t!==st||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function Vl(t,e){var o;return(o=Rn.get(t))==null?void 0:o.get(e)}const Xl=Vi("__proto__,__v_isRef,__isVue"),Zr=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Gi)),Zl=ts(),Gl=ts(!1,!0),Jl=ts(!0),Hs=Ql();function Ql(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...o){const n=ce(this);for(let s=0,r=this.length;s<r;s++)qe(n,"get",s+"");const i=n[e](...o);return i===-1||i===!1?n[e](...o.map(ce)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...o){Lo();const n=ce(this)[e].apply(this,o);return Ro(),n}}),t}function ec(t){const e=ce(this);return qe(e,"has",t),e.hasOwnProperty(t)}function ts(t=!1,e=!1){return function(n,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?mc:ta:e?ea:Qr).get(n))return n;const r=oe(n);if(!t){if(r&&ae(Hs,i))return Reflect.get(Hs,i,s);if(i==="hasOwnProperty")return ec}const a=Reflect.get(n,i,s);return(Gi(i)?Zr.has(i):Xl(i))||(t||qe(n,"get",i),e)?a:Ae(a)?r&&Ji(i)?a:a.value:ke(a)?t?na(a):Gn(a):a}}const tc=Gr(),oc=Gr(!0);function Gr(t=!1){return function(o,n,i,s){let r=o[n];if(Eo(r)&&Ae(r)&&!Ae(i))return!1;if(!t&&(!Nn(i)&&!Eo(i)&&(r=ce(r),i=ce(i)),!oe(o)&&Ae(r)&&!Ae(i)))return r.value=i,!0;const a=oe(o)&&Ji(n)?Number(n)<o.length:ae(o,n),l=Reflect.set(o,n,i,s);return o===ce(s)&&(a?Qo(i,r)&&At(o,"set",n,i):At(o,"add",n,i)),l}}function nc(t,e){const o=ae(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&o&&At(t,"delete",e,void 0),n}function ic(t,e){const o=Reflect.has(t,e);return(!Gi(e)||!Zr.has(e))&&qe(t,"has",e),o}function sc(t){return qe(t,"iterate",oe(t)?"length":Gt),Reflect.ownKeys(t)}const Jr={get:Zl,set:tc,deleteProperty:nc,has:ic,ownKeys:sc},rc={get:Jl,set(t,e){return!0},deleteProperty(t,e){return!0}},ac=Oe({},Jr,{get:Gl,set:oc}),os=t=>t,Zn=t=>Reflect.getPrototypeOf(t);function kn(t,e,o=!1,n=!1){t=t.__v_raw;const i=ce(t),s=ce(e);o||(e!==s&&qe(i,"get",e),qe(i,"get",s));const{has:r}=Zn(i),a=n?os:o?ss:en;if(r.call(i,e))return a(t.get(e));if(r.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function yn(t,e=!1){const o=this.__v_raw,n=ce(o),i=ce(t);return e||(t!==i&&qe(n,"has",t),qe(n,"has",i)),t===i?o.has(t):o.has(t)||o.has(i)}function wn(t,e=!1){return t=t.__v_raw,!e&&qe(ce(t),"iterate",Gt),Reflect.get(t,"size",t)}function js(t){t=ce(t);const e=ce(this);return Zn(e).has.call(e,t)||(e.add(t),At(e,"add",t,t)),this}function $s(t,e){e=ce(e);const o=ce(this),{has:n,get:i}=Zn(o);let s=n.call(o,t);s||(t=ce(t),s=n.call(o,t));const r=i.call(o,t);return o.set(t,e),s?Qo(e,r)&&At(o,"set",t,e):At(o,"add",t,e),this}function Us(t){const e=ce(this),{has:o,get:n}=Zn(e);let i=o.call(e,t);i||(t=ce(t),i=o.call(e,t)),n&&n.call(e,t);const s=e.delete(t);return i&&At(e,"delete",t,void 0),s}function zs(){const t=ce(this),e=t.size!==0,o=t.clear();return e&&At(t,"clear",void 0,void 0),o}function xn(t,e){return function(n,i){const s=this,r=s.__v_raw,a=ce(r),l=e?os:t?ss:en;return!t&&qe(a,"iterate",Gt),r.forEach((c,d)=>n.call(i,l(c),l(d),s))}}function En(t,e,o){return function(...n){const i=this.__v_raw,s=ce(i),r=po(s),a=t==="entries"||t===Symbol.iterator&&r,l=t==="keys"&&r,c=i[t](...n),d=o?os:e?ss:en;return!e&&qe(s,"iterate",l?Si:Gt),{next(){const{value:u,done:h}=c.next();return h?{value:u,done:h}:{value:a?[d(u[0]),d(u[1])]:d(u),done:h}},[Symbol.iterator](){return this}}}}function Nt(t){return function(...e){return t==="delete"?!1:this}}function lc(){const t={get(s){return kn(this,s)},get size(){return wn(this)},has:yn,add:js,set:$s,delete:Us,clear:zs,forEach:xn(!1,!1)},e={get(s){return kn(this,s,!1,!0)},get size(){return wn(this)},has:yn,add:js,set:$s,delete:Us,clear:zs,forEach:xn(!1,!0)},o={get(s){return kn(this,s,!0)},get size(){return wn(this,!0)},has(s){return yn.call(this,s,!0)},add:Nt("add"),set:Nt("set"),delete:Nt("delete"),clear:Nt("clear"),forEach:xn(!0,!1)},n={get(s){return kn(this,s,!0,!0)},get size(){return wn(this,!0)},has(s){return yn.call(this,s,!0)},add:Nt("add"),set:Nt("set"),delete:Nt("delete"),clear:Nt("clear"),forEach:xn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=En(s,!1,!1),o[s]=En(s,!0,!1),e[s]=En(s,!1,!0),n[s]=En(s,!0,!0)}),[t,o,e,n]}const[cc,dc,uc,hc]=lc();function ns(t,e){const o=e?t?hc:uc:t?dc:cc;return(n,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(ae(o,i)&&i in n?o:n,i,s)}const fc={get:ns(!1,!1)},pc={get:ns(!1,!0)},gc={get:ns(!0,!1)},Qr=new WeakMap,ea=new WeakMap,ta=new WeakMap,mc=new WeakMap;function bc(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vc(t){return t.__v_skip||!Object.isExtensible(t)?0:bc(Ol(t))}function Gn(t){return Eo(t)?t:is(t,!1,Jr,fc,Qr)}function oa(t){return is(t,!1,ac,pc,ea)}function na(t){return is(t,!0,rc,gc,ta)}function is(t,e,o,n,i){if(!ke(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const r=vc(t);if(r===0)return t;const a=new Proxy(t,r===2?n:o);return i.set(t,a),a}function go(t){return Eo(t)?go(t.__v_raw):!!(t&&t.__v_isReactive)}function Eo(t){return!!(t&&t.__v_isReadonly)}function Nn(t){return!!(t&&t.__v_isShallow)}function ia(t){return go(t)||Eo(t)}function ce(t){const e=t&&t.__v_raw;return e?ce(e):t}function sa(t){return Ln(t,"__v_skip",!0),t}const en=t=>ke(t)?Gn(t):t,ss=t=>ke(t)?na(t):t;function ra(t){$t&&st&&(t=ce(t),Xr(t.dep||(t.dep=Qi())))}function aa(t,e){t=ce(t);const o=t.dep;o&&Ti(o)}function Ae(t){return!!(t&&t.__v_isRef===!0)}function ue(t){return la(t,!1)}function kc(t){return la(t,!0)}function la(t,e){return Ae(t)?t:new yc(t,e)}class yc{constructor(e,o){this.__v_isShallow=o,this.dep=void 0,this.__v_isRef=!0,this._rawValue=o?e:ce(e),this._value=o?e:en(e)}get value(){return ra(this),this._value}set value(e){const o=this.__v_isShallow||Nn(e)||Eo(e);e=o?e:ce(e),Qo(e,this._rawValue)&&(this._rawValue=e,this._value=o?e:en(e),aa(this))}}function xe(t){return Ae(t)?t.value:t}const wc={get:(t,e,o)=>xe(Reflect.get(t,e,o)),set:(t,e,o,n)=>{const i=t[e];return Ae(i)&&!Ae(o)?(i.value=o,!0):Reflect.set(t,e,o,n)}};function ca(t){return go(t)?t:new Proxy(t,wc)}class xc{constructor(e,o,n){this._object=e,this._key=o,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Vl(ce(this._object),this._key)}}class Ec{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Jn(t,e,o){return Ae(t)?t:ie(t)?new Ec(t):ke(t)&&arguments.length>1?Cc(t,e,o):ue(t)}function Cc(t,e,o){const n=t[e];return Ae(n)?n:new xc(t,e,o)}class Sc{constructor(e,o,n,i){this._setter=o,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new es(e,()=>{this._dirty||(this._dirty=!0,aa(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=ce(this);return ra(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Tc(t,e,o=!1){let n,i;const s=ie(t);return s?(n=t,i=ut):(n=t.get,i=t.set),new Sc(n,i,s||!i,o)}function Ut(t,e,o,n){let i;try{i=n?t(...n):t()}catch(s){pn(s,e,o)}return i}function ht(t,e,o,n){if(ie(t)){const s=Ut(t,e,o,n);return s&&$r(s)&&s.catch(r=>{pn(r,e,o)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(ht(t[s],e,o,n));return i}function pn(t,e,o,n=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const r=e.proxy,a=o;for(;s;){const c=s.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,r,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Ut(l,null,10,[t,r,a]);return}}Bc(t,o,i,n)}function Bc(t,e,o,n=!0){console.error(t)}let tn=!1,Bi=!1;const je=[];let xt=0;const mo=[];let Tt=null,Vt=0;const da=Promise.resolve();let rs=null;function ua(t){const e=rs||da;return t?e.then(this?t.bind(this):t):e}function _c(t){let e=xt+1,o=je.length;for(;e<o;){const n=e+o>>>1;on(je[n])<t?e=n+1:o=n}return e}function Qn(t){(!je.length||!je.includes(t,tn&&t.allowRecurse?xt+1:xt))&&(t.id==null?je.push(t):je.splice(_c(t.id),0,t),ha())}function ha(){!tn&&!Bi&&(Bi=!0,rs=da.then(pa))}function Ic(t){const e=je.indexOf(t);e>xt&&je.splice(e,1)}function Mc(t){oe(t)?mo.push(...t):(!Tt||!Tt.includes(t,t.allowRecurse?Vt+1:Vt))&&mo.push(t),ha()}function Ws(t,e=tn?xt+1:0){for(;e<je.length;e++){const o=je[e];o&&o.pre&&(je.splice(e,1),e--,o())}}function fa(t){if(mo.length){const e=[...new Set(mo)];if(mo.length=0,Tt){Tt.push(...e);return}for(Tt=e,Tt.sort((o,n)=>on(o)-on(n)),Vt=0;Vt<Tt.length;Vt++)Tt[Vt]();Tt=null,Vt=0}}const on=t=>t.id==null?1/0:t.id,Ac=(t,e)=>{const o=on(t)-on(e);if(o===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return o};function pa(t){Bi=!1,tn=!0,je.sort(Ac);const e=ut;try{for(xt=0;xt<je.length;xt++){const o=je[xt];o&&o.active!==!1&&Ut(o,null,14)}}finally{xt=0,je.length=0,fa(),tn=!1,rs=null,(je.length||mo.length)&&pa()}}function Oc(t,e,...o){if(t.isUnmounted)return;const n=t.vnode.props||we;let i=o;const s=e.startsWith("update:"),r=s&&e.slice(7);if(r&&r in n){const d=`${r==="modelValue"?"model":r}Modifiers`,{number:u,trim:h}=n[d]||we;h&&(i=o.map(p=>Be(p)?p.trim():p)),u&&(i=o.map(Nl))}let a,l=n[a=di(e)]||n[a=di(Et(e))];!l&&s&&(l=n[a=di(Oo(e))]),l&&ht(l,t,6,i);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ht(c,t,6,i)}}function ga(t,e,o=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const s=t.emits;let r={},a=!1;if(!ie(t)){const l=c=>{const d=ga(c,e,!0);d&&(a=!0,Oe(r,d))};!o&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(ke(t)&&n.set(t,null),null):(oe(s)?s.forEach(l=>r[l]=null):Oe(r,s),ke(t)&&n.set(t,r),r)}function ei(t,e){return!t||!Kn(e)?!1:(e=e.slice(2).replace(/Once$/,""),ae(t,e[0].toLowerCase()+e.slice(1))||ae(t,Oo(e))||ae(t,e))}let ze=null,ma=null;function Pn(t){const e=ze;return ze=t,ma=t&&t.type.__scopeId||null,e}function as(t,e=ze,o){if(!e||t._n)return t;const n=(...i)=>{n._d&&tr(-1);const s=Pn(e);let r;try{r=t(...i)}finally{Pn(s),n._d&&tr(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function hi(t){const{type:e,vnode:o,proxy:n,withProxy:i,props:s,propsOptions:[r],slots:a,attrs:l,emit:c,render:d,renderCache:u,data:h,setupState:p,ctx:f,inheritAttrs:T}=t;let m,x;const E=Pn(t);try{if(o.shapeFlag&4){const y=i||n;m=wt(d.call(y,y,u,s,p,h,f)),x=l}else{const y=e;m=wt(y.length>1?y(s,{attrs:l,slots:a,emit:c}):y(s,null)),x=e.props?l:Lc(l)}}catch(y){Yo.length=0,pn(y,t,1),m=le(Wt)}let w=m;if(x&&T!==!1){const y=Object.keys(x),{shapeFlag:B}=w;y.length&&B&7&&(r&&y.some(Xi)&&(x=Rc(x,r)),w=Co(w,x))}return o.dirs&&(w=Co(w),w.dirs=w.dirs?w.dirs.concat(o.dirs):o.dirs),o.transition&&(w.transition=o.transition),m=w,Pn(E),m}const Lc=t=>{let e;for(const o in t)(o==="class"||o==="style"||Kn(o))&&((e||(e={}))[o]=t[o]);return e},Rc=(t,e)=>{const o={};for(const n in t)(!Xi(n)||!(n.slice(9)in e))&&(o[n]=t[n]);return o};function Nc(t,e,o){const{props:n,children:i,component:s}=t,{props:r,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(o&&l>=0){if(l&1024)return!0;if(l&16)return n?Ks(n,r,c):!!r;if(l&8){const d=e.dynamicProps;for(let u=0;u<d.length;u++){const h=d[u];if(r[h]!==n[h]&&!ei(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?Ks(n,r,c):!0:!!r;return!1}function Ks(t,e,o){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(e[s]!==t[s]&&!ei(o,s))return!0}return!1}function Pc({vnode:t,parent:e},o){for(;e&&e.subTree===t;)(t=e.vnode).el=o,e=e.parent}const Dc=t=>t.__isSuspense;function Fc(t,e){e&&e.pendingBranch?oe(t)?e.effects.push(...t):e.effects.push(t):Mc(t)}const Cn={};function Jt(t,e,o){return ba(t,e,o)}function ba(t,e,{immediate:o,deep:n,flush:i,onTrack:s,onTrigger:r}=we){var a;const l=Kl()===((a=Me)==null?void 0:a.scope)?Me:null;let c,d=!1,u=!1;if(Ae(t)?(c=()=>t.value,d=Nn(t)):go(t)?(c=()=>t,n=!0):oe(t)?(u=!0,d=t.some(y=>go(y)||Nn(y)),c=()=>t.map(y=>{if(Ae(y))return y.value;if(go(y))return ho(y);if(ie(y))return Ut(y,l,2)})):ie(t)?e?c=()=>Ut(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return h&&h(),ht(t,l,3,[p])}:c=ut,e&&n){const y=c;c=()=>ho(y())}let h,p=y=>{h=E.onStop=()=>{Ut(y,l,4)}},f;if(To)if(p=ut,e?o&&ht(e,l,3,[c(),u?[]:void 0,p]):c(),i==="sync"){const y=Rd();f=y.__watcherHandles||(y.__watcherHandles=[])}else return ut;let T=u?new Array(t.length).fill(Cn):Cn;const m=()=>{if(E.active)if(e){const y=E.run();(n||d||(u?y.some((B,I)=>Qo(B,T[I])):Qo(y,T)))&&(h&&h(),ht(e,l,3,[y,T===Cn?void 0:u&&T[0]===Cn?[]:T,p]),T=y)}else E.run()};m.allowRecurse=!!e;let x;i==="sync"?x=m:i==="post"?x=()=>We(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),x=()=>Qn(m));const E=new es(c,x);e?o?m():T=E.run():i==="post"?We(E.run.bind(E),l&&l.suspense):E.run();const w=()=>{E.stop(),l&&l.scope&&Zi(l.scope.effects,E)};return f&&f.push(w),w}function Hc(t,e,o){const n=this.proxy,i=Be(t)?t.includes(".")?va(n,t):()=>n[t]:t.bind(n,n);let s;ie(e)?s=e:(s=e.handler,o=e);const r=Me;So(this);const a=ba(i,s.bind(n),o);return r?So(r):Qt(),a}function va(t,e){const o=e.split(".");return()=>{let n=t;for(let i=0;i<o.length&&n;i++)n=n[o[i]];return n}}function ho(t,e){if(!ke(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ae(t))ho(t.value,e);else if(oe(t))for(let o=0;o<t.length;o++)ho(t[o],e);else if(jr(t)||po(t))t.forEach(o=>{ho(o,e)});else if(zr(t))for(const o in t)ho(t[o],e);return t}function qt(t,e,o,n){const i=t.dirs,s=e&&e.dirs;for(let r=0;r<i.length;r++){const a=i[r];s&&(a.oldValue=s[r].value);let l=a.dir[n];l&&(Lo(),ht(l,o,8,[t.el,a,t,e]),Ro())}}function Ye(t,e){return ie(t)?(()=>Oe({name:t.name},e,{setup:t}))():t}const Ko=t=>!!t.type.__asyncLoader;function jc(t){ie(t)&&(t={loader:t});const{loader:e,loadingComponent:o,errorComponent:n,delay:i=200,timeout:s,suspensible:r=!0,onError:a}=t;let l=null,c,d=0;const u=()=>(d++,l=null,h()),h=()=>{let p;return l||(p=l=e().catch(f=>{if(f=f instanceof Error?f:new Error(String(f)),a)return new Promise((T,m)=>{a(f,()=>T(u()),()=>m(f),d+1)});throw f}).then(f=>p!==l&&l?l:(f&&(f.__esModule||f[Symbol.toStringTag]==="Module")&&(f=f.default),c=f,f)))};return Ye({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return c},setup(){const p=Me;if(c)return()=>fi(c,p);const f=E=>{l=null,pn(E,p,13,!n)};if(r&&p.suspense||To)return h().then(E=>()=>fi(E,p)).catch(E=>(f(E),()=>n?le(n,{error:E}):null));const T=ue(!1),m=ue(),x=ue(!!i);return i&&setTimeout(()=>{x.value=!1},i),s!=null&&setTimeout(()=>{if(!T.value&&!m.value){const E=new Error(`Async component timed out after ${s}ms.`);f(E),m.value=E}},s),h().then(()=>{T.value=!0,p.parent&&ls(p.parent.vnode)&&Qn(p.parent.update)}).catch(E=>{f(E),m.value=E}),()=>{if(T.value&&c)return fi(c,p);if(m.value&&n)return le(n,{error:m.value});if(o&&!x.value)return le(o)}}})}function fi(t,e){const{ref:o,props:n,children:i,ce:s}=e.vnode,r=le(t,n,i);return r.ref=o,r.ce=s,delete e.vnode.ce,r}const ls=t=>t.type.__isKeepAlive;function $c(t,e){ka(t,"a",e)}function Uc(t,e){ka(t,"da",e)}function ka(t,e,o=Me){const n=t.__wdc||(t.__wdc=()=>{let i=o;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(ti(e,n,o),o){let i=o.parent;for(;i&&i.parent;)ls(i.parent.vnode)&&zc(n,e,o,i),i=i.parent}}function zc(t,e,o,n){const i=ti(e,t,n,!0);cs(()=>{Zi(n[e],i)},o)}function ti(t,e,o=Me,n=!1){if(o){const i=o[t]||(o[t]=[]),s=e.__weh||(e.__weh=(...r)=>{if(o.isUnmounted)return;Lo(),So(o);const a=ht(e,o,t,r);return Qt(),Ro(),a});return n?i.unshift(s):i.push(s),s}}const Lt=t=>(e,o=Me)=>(!To||t==="sp")&&ti(t,(...n)=>e(...n),o),Wc=Lt("bm"),gn=Lt("m"),Kc=Lt("bu"),qc=Lt("u"),Yc=Lt("bum"),cs=Lt("um"),Vc=Lt("sp"),Xc=Lt("rtg"),Zc=Lt("rtc");function Gc(t,e=Me){ti("ec",t,e)}const ya="components",wa=Symbol.for("v-ndc");function Jc(t){return Be(t)?Qc(ya,t,!1)||t:t||wa}function Qc(t,e,o=!0,n=!1){const i=ze||Me;if(i){const s=i.type;if(t===ya){const a=Ad(s,!1);if(a&&(a===e||a===Et(e)||a===Vn(Et(e))))return s}const r=qs(i[t]||s[t],e)||qs(i.appContext[t],e);return!r&&n?s:r}}function qs(t,e){return t&&(t[e]||t[Et(e)]||t[Vn(Et(e))])}function ed(t,e,o,n){let i;const s=o&&o[n];if(oe(t)||Be(t)){i=new Array(t.length);for(let r=0,a=t.length;r<a;r++)i[r]=e(t[r],r,void 0,s&&s[r])}else if(typeof t=="number"){i=new Array(t);for(let r=0;r<t;r++)i[r]=e(r+1,r,void 0,s&&s[r])}else if(ke(t))if(t[Symbol.iterator])i=Array.from(t,(r,a)=>e(r,a,void 0,s&&s[a]));else{const r=Object.keys(t);i=new Array(r.length);for(let a=0,l=r.length;a<l;a++){const c=r[a];i[a]=e(t[c],c,a,s&&s[a])}}else i=[];return o&&(o[n]=i),i}function td(t,e,o={},n,i){if(ze.isCE||ze.parent&&Ko(ze.parent)&&ze.parent.isCE)return e!=="default"&&(o.name=e),le("slot",o,n&&n());let s=t[e];s&&s._c&&(s._d=!1),Ne();const r=s&&xa(s(o)),a=oo(Ge,{key:o.key||r&&r.key||`_${e}`},r||(n?n():[]),r&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function xa(t){return t.some(e=>Hn(e)?!(e.type===Wt||e.type===Ge&&!xa(e.children)):!0)?t:null}const _i=t=>t?La(t)?gs(t)||t.proxy:_i(t.parent):null,qo=Oe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>_i(t.parent),$root:t=>_i(t.root),$emit:t=>t.emit,$options:t=>ds(t),$forceUpdate:t=>t.f||(t.f=()=>Qn(t.update)),$nextTick:t=>t.n||(t.n=ua.bind(t.proxy)),$watch:t=>Hc.bind(t)}),pi=(t,e)=>t!==we&&!t.__isScriptSetup&&ae(t,e),od={get({_:t},e){const{ctx:o,setupState:n,data:i,props:s,accessCache:r,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=r[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return o[e];case 3:return s[e]}else{if(pi(n,e))return r[e]=1,n[e];if(i!==we&&ae(i,e))return r[e]=2,i[e];if((c=t.propsOptions[0])&&ae(c,e))return r[e]=3,s[e];if(o!==we&&ae(o,e))return r[e]=4,o[e];Ii&&(r[e]=0)}}const d=qo[e];let u,h;if(d)return e==="$attrs"&&qe(t,"get",e),d(t);if((u=a.__cssModules)&&(u=u[e]))return u;if(o!==we&&ae(o,e))return r[e]=4,o[e];if(h=l.config.globalProperties,ae(h,e))return h[e]},set({_:t},e,o){const{data:n,setupState:i,ctx:s}=t;return pi(i,e)?(i[e]=o,!0):n!==we&&ae(n,e)?(n[e]=o,!0):ae(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=o,!0)},has({_:{data:t,setupState:e,accessCache:o,ctx:n,appContext:i,propsOptions:s}},r){let a;return!!o[r]||t!==we&&ae(t,r)||pi(e,r)||(a=s[0])&&ae(a,r)||ae(n,r)||ae(qo,r)||ae(i.config.globalProperties,r)},defineProperty(t,e,o){return o.get!=null?t._.accessCache[e]=0:ae(o,"value")&&this.set(t,e,o.value,null),Reflect.defineProperty(t,e,o)}};function Ys(t){return oe(t)?t.reduce((e,o)=>(e[o]=null,e),{}):t}let Ii=!0;function nd(t){const e=ds(t),o=t.proxy,n=t.ctx;Ii=!1,e.beforeCreate&&Vs(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:r,watch:a,provide:l,inject:c,created:d,beforeMount:u,mounted:h,beforeUpdate:p,updated:f,activated:T,deactivated:m,beforeDestroy:x,beforeUnmount:E,destroyed:w,unmounted:y,render:B,renderTracked:I,renderTriggered:O,errorCaptured:v,serverPrefetch:b,expose:C,inheritAttrs:S,components:L,directives:A,filters:$}=e;if(c&&id(c,n,null),r)for(const ee in r){const G=r[ee];ie(G)&&(n[ee]=G.bind(o))}if(i){const ee=i.call(o,o);ke(ee)&&(t.data=Gn(ee))}if(Ii=!0,s)for(const ee in s){const G=s[ee],Ce=ie(G)?G.bind(o,o):ie(G.get)?G.get.bind(o,o):ut,$e=!ie(G)&&ie(G.set)?G.set.bind(o):ut,Le=rt({get:Ce,set:$e});Object.defineProperty(n,ee,{enumerable:!0,configurable:!0,get:()=>Le.value,set:Se=>Le.value=Se})}if(a)for(const ee in a)Ea(a[ee],n,o,ee);if(l){const ee=ie(l)?l.call(o):l;Reflect.ownKeys(ee).forEach(G=>{_n(G,ee[G])})}d&&Vs(d,t,"c");function q(ee,G){oe(G)?G.forEach(Ce=>ee(Ce.bind(o))):G&&ee(G.bind(o))}if(q(Wc,u),q(gn,h),q(Kc,p),q(qc,f),q($c,T),q(Uc,m),q(Gc,v),q(Zc,I),q(Xc,O),q(Yc,E),q(cs,y),q(Vc,b),oe(C))if(C.length){const ee=t.exposed||(t.exposed={});C.forEach(G=>{Object.defineProperty(ee,G,{get:()=>o[G],set:Ce=>o[G]=Ce})})}else t.exposed||(t.exposed={});B&&t.render===ut&&(t.render=B),S!=null&&(t.inheritAttrs=S),L&&(t.components=L),A&&(t.directives=A)}function id(t,e,o=ut){oe(t)&&(t=Mi(t));for(const n in t){const i=t[n];let s;ke(i)?"default"in i?s=Mt(i.from||n,i.default,!0):s=Mt(i.from||n):s=Mt(i),Ae(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:r=>s.value=r}):e[n]=s}}function Vs(t,e,o){ht(oe(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,o)}function Ea(t,e,o,n){const i=n.includes(".")?va(o,n):()=>o[n];if(Be(t)){const s=e[t];ie(s)&&Jt(i,s)}else if(ie(t))Jt(i,t.bind(o));else if(ke(t))if(oe(t))t.forEach(s=>Ea(s,e,o,n));else{const s=ie(t.handler)?t.handler.bind(o):e[t.handler];ie(s)&&Jt(i,s,t)}}function ds(t){const e=t.type,{mixins:o,extends:n}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:r}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!o&&!n?l=e:(l={},i.length&&i.forEach(c=>Dn(l,c,r,!0)),Dn(l,e,r)),ke(e)&&s.set(e,l),l}function Dn(t,e,o,n=!1){const{mixins:i,extends:s}=e;s&&Dn(t,s,o,!0),i&&i.forEach(r=>Dn(t,r,o,!0));for(const r in e)if(!(n&&r==="expose")){const a=sd[r]||o&&o[r];t[r]=a?a(t[r],e[r]):e[r]}return t}const sd={data:Xs,props:Zs,emits:Zs,methods:Uo,computed:Uo,beforeCreate:Ue,created:Ue,beforeMount:Ue,mounted:Ue,beforeUpdate:Ue,updated:Ue,beforeDestroy:Ue,beforeUnmount:Ue,destroyed:Ue,unmounted:Ue,activated:Ue,deactivated:Ue,errorCaptured:Ue,serverPrefetch:Ue,components:Uo,directives:Uo,watch:ad,provide:Xs,inject:rd};function Xs(t,e){return e?t?function(){return Oe(ie(t)?t.call(this,this):t,ie(e)?e.call(this,this):e)}:e:t}function rd(t,e){return Uo(Mi(t),Mi(e))}function Mi(t){if(oe(t)){const e={};for(let o=0;o<t.length;o++)e[t[o]]=t[o];return e}return t}function Ue(t,e){return t?[...new Set([].concat(t,e))]:e}function Uo(t,e){return t?Oe(Object.create(null),t,e):e}function Zs(t,e){return t?oe(t)&&oe(e)?[...new Set([...t,...e])]:Oe(Object.create(null),Ys(t),Ys(e??{})):e}function ad(t,e){if(!t)return e;if(!e)return t;const o=Oe(Object.create(null),t);for(const n in e)o[n]=Ue(t[n],e[n]);return o}function Ca(){return{app:null,config:{isNativeTag:Il,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ld=0;function cd(t,e){return function(n,i=null){ie(n)||(n=Oe({},n)),i!=null&&!ke(i)&&(i=null);const s=Ca(),r=new Set;let a=!1;const l=s.app={_uid:ld++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:Nd,get config(){return s.config},set config(c){},use(c,...d){return r.has(c)||(c&&ie(c.install)?(r.add(c),c.install(l,...d)):ie(c)&&(r.add(c),c(l,...d))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,d){return d?(s.components[c]=d,l):s.components[c]},directive(c,d){return d?(s.directives[c]=d,l):s.directives[c]},mount(c,d,u){if(!a){const h=le(n,i);return h.appContext=s,d&&e?e(h,c):t(h,c,u),a=!0,l._container=c,c.__vue_app__=l,gs(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,d){return s.provides[c]=d,l},runWithContext(c){Fn=l;try{return c()}finally{Fn=null}}};return l}}let Fn=null;function _n(t,e){if(Me){let o=Me.provides;const n=Me.parent&&Me.parent.provides;n===o&&(o=Me.provides=Object.create(n)),o[t]=e}}function Mt(t,e,o=!1){const n=Me||ze;if(n||Fn){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Fn._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return o&&ie(e)?e.call(n&&n.proxy):e}}function dd(t,e,o,n=!1){const i={},s={};Ln(s,ni,1),t.propsDefaults=Object.create(null),Sa(t,e,i,s);for(const r in t.propsOptions[0])r in i||(i[r]=void 0);o?t.props=n?i:oa(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function ud(t,e,o,n){const{props:i,attrs:s,vnode:{patchFlag:r}}=t,a=ce(i),[l]=t.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const d=t.vnode.dynamicProps;for(let u=0;u<d.length;u++){let h=d[u];if(ei(t.emitsOptions,h))continue;const p=e[h];if(l)if(ae(s,h))p!==s[h]&&(s[h]=p,c=!0);else{const f=Et(h);i[f]=Ai(l,a,f,p,t,!1)}else p!==s[h]&&(s[h]=p,c=!0)}}}else{Sa(t,e,i,s)&&(c=!0);let d;for(const u in a)(!e||!ae(e,u)&&((d=Oo(u))===u||!ae(e,d)))&&(l?o&&(o[u]!==void 0||o[d]!==void 0)&&(i[u]=Ai(l,a,u,void 0,t,!0)):delete i[u]);if(s!==a)for(const u in s)(!e||!ae(e,u))&&(delete s[u],c=!0)}c&&At(t,"set","$attrs")}function Sa(t,e,o,n){const[i,s]=t.propsOptions;let r=!1,a;if(e)for(let l in e){if(Bn(l))continue;const c=e[l];let d;i&&ae(i,d=Et(l))?!s||!s.includes(d)?o[d]=c:(a||(a={}))[d]=c:ei(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(s){const l=ce(o),c=a||we;for(let d=0;d<s.length;d++){const u=s[d];o[u]=Ai(i,l,u,c[u],t,!ae(c,u))}}return r}function Ai(t,e,o,n,i,s){const r=t[o];if(r!=null){const a=ae(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ie(l)){const{propsDefaults:c}=i;o in c?n=c[o]:(So(i),n=c[o]=l.call(null,e),Qt())}else n=l}r[0]&&(s&&!a?n=!1:r[1]&&(n===""||n===Oo(o))&&(n=!0))}return n}function Ta(t,e,o=!1){const n=e.propsCache,i=n.get(t);if(i)return i;const s=t.props,r={},a=[];let l=!1;if(!ie(t)){const d=u=>{l=!0;const[h,p]=Ta(u,e,!0);Oe(r,h),p&&a.push(...p)};!o&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return ke(t)&&n.set(t,fo),fo;if(oe(s))for(let d=0;d<s.length;d++){const u=Et(s[d]);Gs(u)&&(r[u]=we)}else if(s)for(const d in s){const u=Et(d);if(Gs(u)){const h=s[d],p=r[u]=oe(h)||ie(h)?{type:h}:Oe({},h);if(p){const f=er(Boolean,p.type),T=er(String,p.type);p[0]=f>-1,p[1]=T<0||f<T,(f>-1||ae(p,"default"))&&a.push(u)}}}const c=[r,a];return ke(t)&&n.set(t,c),c}function Gs(t){return t[0]!=="$"}function Js(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Qs(t,e){return Js(t)===Js(e)}function er(t,e){return oe(e)?e.findIndex(o=>Qs(o,t)):ie(e)&&Qs(e,t)?0:-1}const Ba=t=>t[0]==="_"||t==="$stable",us=t=>oe(t)?t.map(wt):[wt(t)],hd=(t,e,o)=>{if(e._n)return e;const n=as((...i)=>us(e(...i)),o);return n._c=!1,n},_a=(t,e,o)=>{const n=t._ctx;for(const i in t){if(Ba(i))continue;const s=t[i];if(ie(s))e[i]=hd(i,s,n);else if(s!=null){const r=us(s);e[i]=()=>r}}},Ia=(t,e)=>{const o=us(e);t.slots.default=()=>o},fd=(t,e)=>{if(t.vnode.shapeFlag&32){const o=e._;o?(t.slots=ce(e),Ln(e,"_",o)):_a(e,t.slots={})}else t.slots={},e&&Ia(t,e);Ln(t.slots,ni,1)},pd=(t,e,o)=>{const{vnode:n,slots:i}=t;let s=!0,r=we;if(n.shapeFlag&32){const a=e._;a?o&&a===1?s=!1:(Oe(i,e),!o&&a===1&&delete i._):(s=!e.$stable,_a(e,i)),r=e}else e&&(Ia(t,e),r={default:1});if(s)for(const a in i)!Ba(a)&&!(a in r)&&delete i[a]};function Oi(t,e,o,n,i=!1){if(oe(t)){t.forEach((h,p)=>Oi(h,e&&(oe(e)?e[p]:e),o,n,i));return}if(Ko(n)&&!i)return;const s=n.shapeFlag&4?gs(n.component)||n.component.proxy:n.el,r=i?null:s,{i:a,r:l}=t,c=e&&e.r,d=a.refs===we?a.refs={}:a.refs,u=a.setupState;if(c!=null&&c!==l&&(Be(c)?(d[c]=null,ae(u,c)&&(u[c]=null)):Ae(c)&&(c.value=null)),ie(l))Ut(l,a,12,[r,d]);else{const h=Be(l),p=Ae(l);if(h||p){const f=()=>{if(t.f){const T=h?ae(u,l)?u[l]:d[l]:l.value;i?oe(T)&&Zi(T,s):oe(T)?T.includes(s)||T.push(s):h?(d[l]=[s],ae(u,l)&&(u[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else h?(d[l]=r,ae(u,l)&&(u[l]=r)):p&&(l.value=r,t.k&&(d[t.k]=r))};r?(f.id=-1,We(f,o)):f()}}}const We=Fc;function gd(t){return md(t)}function md(t,e){const o=Ei();o.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:r,createText:a,createComment:l,setText:c,setElementText:d,parentNode:u,nextSibling:h,setScopeId:p=ut,insertStaticContent:f}=t,T=(g,k,_,N=null,D=null,F=null,K=!1,U=null,z=!!k.dynamicChildren)=>{if(g===k)return;g&&!Do(g,k)&&(N=P(g),Se(g,D,F,!0),g=null),k.patchFlag===-2&&(z=!1,k.dynamicChildren=null);const{type:H,ref:J,shapeFlag:V}=k;switch(H){case oi:m(g,k,_,N);break;case Wt:x(g,k,_,N);break;case gi:g==null&&E(k,_,N,K);break;case Ge:L(g,k,_,N,D,F,K,U,z);break;default:V&1?B(g,k,_,N,D,F,K,U,z):V&6?A(g,k,_,N,D,F,K,U,z):(V&64||V&128)&&H.process(g,k,_,N,D,F,K,U,z,W)}J!=null&&D&&Oi(J,g&&g.ref,F,k||g,!k)},m=(g,k,_,N)=>{if(g==null)n(k.el=a(k.children),_,N);else{const D=k.el=g.el;k.children!==g.children&&c(D,k.children)}},x=(g,k,_,N)=>{g==null?n(k.el=l(k.children||""),_,N):k.el=g.el},E=(g,k,_,N)=>{[g.el,g.anchor]=f(g.children,k,_,N,g.el,g.anchor)},w=({el:g,anchor:k},_,N)=>{let D;for(;g&&g!==k;)D=h(g),n(g,_,N),g=D;n(k,_,N)},y=({el:g,anchor:k})=>{let _;for(;g&&g!==k;)_=h(g),i(g),g=_;i(k)},B=(g,k,_,N,D,F,K,U,z)=>{K=K||k.type==="svg",g==null?I(k,_,N,D,F,K,U,z):b(g,k,D,F,K,U,z)},I=(g,k,_,N,D,F,K,U)=>{let z,H;const{type:J,props:V,shapeFlag:Q,transition:ne,dirs:se}=g;if(z=g.el=r(g.type,F,V&&V.is,V),Q&8?d(z,g.children):Q&16&&v(g.children,z,null,N,D,F&&J!=="foreignObject",K,U),se&&qt(g,null,N,"created"),O(z,g,g.scopeId,K,N),V){for(const pe in V)pe!=="value"&&!Bn(pe)&&s(z,pe,null,V[pe],F,g.children,N,D,De);"value"in V&&s(z,"value",null,V.value),(H=V.onVnodeBeforeMount)&&mt(H,N,g)}se&&qt(g,null,N,"beforeMount");const me=(!D||D&&!D.pendingBranch)&&ne&&!ne.persisted;me&&ne.beforeEnter(z),n(z,k,_),((H=V&&V.onVnodeMounted)||me||se)&&We(()=>{H&&mt(H,N,g),me&&ne.enter(z),se&&qt(g,null,N,"mounted")},D)},O=(g,k,_,N,D)=>{if(_&&p(g,_),N)for(let F=0;F<N.length;F++)p(g,N[F]);if(D){let F=D.subTree;if(k===F){const K=D.vnode;O(g,K,K.scopeId,K.slotScopeIds,D.parent)}}},v=(g,k,_,N,D,F,K,U,z=0)=>{for(let H=z;H<g.length;H++){const J=g[H]=U?Dt(g[H]):wt(g[H]);T(null,J,k,_,N,D,F,K,U)}},b=(g,k,_,N,D,F,K)=>{const U=k.el=g.el;let{patchFlag:z,dynamicChildren:H,dirs:J}=k;z|=g.patchFlag&16;const V=g.props||we,Q=k.props||we;let ne;_&&Yt(_,!1),(ne=Q.onVnodeBeforeUpdate)&&mt(ne,_,k,g),J&&qt(k,g,_,"beforeUpdate"),_&&Yt(_,!0);const se=D&&k.type!=="foreignObject";if(H?C(g.dynamicChildren,H,U,_,N,se,F):K||G(g,k,U,null,_,N,se,F,!1),z>0){if(z&16)S(U,k,V,Q,_,N,D);else if(z&2&&V.class!==Q.class&&s(U,"class",null,Q.class,D),z&4&&s(U,"style",V.style,Q.style,D),z&8){const me=k.dynamicProps;for(let pe=0;pe<me.length;pe++){const Te=me[pe],ot=V[Te],so=Q[Te];(so!==ot||Te==="value")&&s(U,Te,ot,so,D,g.children,_,N,De)}}z&1&&g.children!==k.children&&d(U,k.children)}else!K&&H==null&&S(U,k,V,Q,_,N,D);((ne=Q.onVnodeUpdated)||J)&&We(()=>{ne&&mt(ne,_,k,g),J&&qt(k,g,_,"updated")},N)},C=(g,k,_,N,D,F,K)=>{for(let U=0;U<k.length;U++){const z=g[U],H=k[U],J=z.el&&(z.type===Ge||!Do(z,H)||z.shapeFlag&70)?u(z.el):_;T(z,H,J,null,N,D,F,K,!0)}},S=(g,k,_,N,D,F,K)=>{if(_!==N){if(_!==we)for(const U in _)!Bn(U)&&!(U in N)&&s(g,U,_[U],null,K,k.children,D,F,De);for(const U in N){if(Bn(U))continue;const z=N[U],H=_[U];z!==H&&U!=="value"&&s(g,U,H,z,K,k.children,D,F,De)}"value"in N&&s(g,"value",_.value,N.value)}},L=(g,k,_,N,D,F,K,U,z)=>{const H=k.el=g?g.el:a(""),J=k.anchor=g?g.anchor:a("");let{patchFlag:V,dynamicChildren:Q,slotScopeIds:ne}=k;ne&&(U=U?U.concat(ne):ne),g==null?(n(H,_,N),n(J,_,N),v(k.children,_,J,D,F,K,U,z)):V>0&&V&64&&Q&&g.dynamicChildren?(C(g.dynamicChildren,Q,_,D,F,K,U),(k.key!=null||D&&k===D.subTree)&&Ma(g,k,!0)):G(g,k,_,J,D,F,K,U,z)},A=(g,k,_,N,D,F,K,U,z)=>{k.slotScopeIds=U,g==null?k.shapeFlag&512?D.ctx.activate(k,_,N,K,z):$(k,_,N,D,F,K,z):R(g,k,z)},$=(g,k,_,N,D,F,K)=>{const U=g.component=Td(g,N,D);if(ls(g)&&(U.ctx.renderer=W),Bd(U),U.asyncDep){if(D&&D.registerDep(U,q),!g.el){const z=U.subTree=le(Wt);x(null,z,k,_)}return}q(U,g,k,_,D,F,K)},R=(g,k,_)=>{const N=k.component=g.component;if(Nc(g,k,_))if(N.asyncDep&&!N.asyncResolved){ee(N,k,_);return}else N.next=k,Ic(N.update),N.update();else k.el=g.el,N.vnode=k},q=(g,k,_,N,D,F,K)=>{const U=()=>{if(g.isMounted){let{next:J,bu:V,u:Q,parent:ne,vnode:se}=g,me=J,pe;Yt(g,!1),J?(J.el=se.el,ee(g,J,K)):J=se,V&&ui(V),(pe=J.props&&J.props.onVnodeBeforeUpdate)&&mt(pe,ne,J,se),Yt(g,!0);const Te=hi(g),ot=g.subTree;g.subTree=Te,T(ot,Te,u(ot.el),P(ot),g,D,F),J.el=Te.el,me===null&&Pc(g,Te.el),Q&&We(Q,D),(pe=J.props&&J.props.onVnodeUpdated)&&We(()=>mt(pe,ne,J,se),D)}else{let J;const{el:V,props:Q}=k,{bm:ne,m:se,parent:me}=g,pe=Ko(k);if(Yt(g,!1),ne&&ui(ne),!pe&&(J=Q&&Q.onVnodeBeforeMount)&&mt(J,me,k),Yt(g,!0),V&&he){const Te=()=>{g.subTree=hi(g),he(V,g.subTree,g,D,null)};pe?k.type.__asyncLoader().then(()=>!g.isUnmounted&&Te()):Te()}else{const Te=g.subTree=hi(g);T(null,Te,_,N,g,D,F),k.el=Te.el}if(se&&We(se,D),!pe&&(J=Q&&Q.onVnodeMounted)){const Te=k;We(()=>mt(J,me,Te),D)}(k.shapeFlag&256||me&&Ko(me.vnode)&&me.vnode.shapeFlag&256)&&g.a&&We(g.a,D),g.isMounted=!0,k=_=N=null}},z=g.effect=new es(U,()=>Qn(H),g.scope),H=g.update=()=>z.run();H.id=g.uid,Yt(g,!0),H()},ee=(g,k,_)=>{k.component=g;const N=g.vnode.props;g.vnode=k,g.next=null,ud(g,k.props,N,_),pd(g,k.children,_),Lo(),Ws(),Ro()},G=(g,k,_,N,D,F,K,U,z=!1)=>{const H=g&&g.children,J=g?g.shapeFlag:0,V=k.children,{patchFlag:Q,shapeFlag:ne}=k;if(Q>0){if(Q&128){$e(H,V,_,N,D,F,K,U,z);return}else if(Q&256){Ce(H,V,_,N,D,F,K,U,z);return}}ne&8?(J&16&&De(H,D,F),V!==H&&d(_,V)):J&16?ne&16?$e(H,V,_,N,D,F,K,U,z):De(H,D,F,!0):(J&8&&d(_,""),ne&16&&v(V,_,N,D,F,K,U,z))},Ce=(g,k,_,N,D,F,K,U,z)=>{g=g||fo,k=k||fo;const H=g.length,J=k.length,V=Math.min(H,J);let Q;for(Q=0;Q<V;Q++){const ne=k[Q]=z?Dt(k[Q]):wt(k[Q]);T(g[Q],ne,_,null,D,F,K,U,z)}H>J?De(g,D,F,!0,!1,V):v(k,_,N,D,F,K,U,z,V)},$e=(g,k,_,N,D,F,K,U,z)=>{let H=0;const J=k.length;let V=g.length-1,Q=J-1;for(;H<=V&&H<=Q;){const ne=g[H],se=k[H]=z?Dt(k[H]):wt(k[H]);if(Do(ne,se))T(ne,se,_,null,D,F,K,U,z);else break;H++}for(;H<=V&&H<=Q;){const ne=g[V],se=k[Q]=z?Dt(k[Q]):wt(k[Q]);if(Do(ne,se))T(ne,se,_,null,D,F,K,U,z);else break;V--,Q--}if(H>V){if(H<=Q){const ne=Q+1,se=ne<J?k[ne].el:N;for(;H<=Q;)T(null,k[H]=z?Dt(k[H]):wt(k[H]),_,se,D,F,K,U,z),H++}}else if(H>Q)for(;H<=V;)Se(g[H],D,F,!0),H++;else{const ne=H,se=H,me=new Map;for(H=se;H<=Q;H++){const Ve=k[H]=z?Dt(k[H]):wt(k[H]);Ve.key!=null&&me.set(Ve.key,H)}let pe,Te=0;const ot=Q-se+1;let so=!1,Os=0;const Po=new Array(ot);for(H=0;H<ot;H++)Po[H]=0;for(H=ne;H<=V;H++){const Ve=g[H];if(Te>=ot){Se(Ve,D,F,!0);continue}let gt;if(Ve.key!=null)gt=me.get(Ve.key);else for(pe=se;pe<=Q;pe++)if(Po[pe-se]===0&&Do(Ve,k[pe])){gt=pe;break}gt===void 0?Se(Ve,D,F,!0):(Po[gt-se]=H+1,gt>=Os?Os=gt:so=!0,T(Ve,k[gt],_,null,D,F,K,U,z),Te++)}const Ls=so?bd(Po):fo;for(pe=Ls.length-1,H=ot-1;H>=0;H--){const Ve=se+H,gt=k[Ve],Rs=Ve+1<J?k[Ve+1].el:N;Po[H]===0?T(null,gt,_,Rs,D,F,K,U,z):so&&(pe<0||H!==Ls[pe]?Le(gt,_,Rs,2):pe--)}}},Le=(g,k,_,N,D=null)=>{const{el:F,type:K,transition:U,children:z,shapeFlag:H}=g;if(H&6){Le(g.component.subTree,k,_,N);return}if(H&128){g.suspense.move(k,_,N);return}if(H&64){K.move(g,k,_,W);return}if(K===Ge){n(F,k,_);for(let V=0;V<z.length;V++)Le(z[V],k,_,N);n(g.anchor,k,_);return}if(K===gi){w(g,k,_);return}if(N!==2&&H&1&&U)if(N===0)U.beforeEnter(F),n(F,k,_),We(()=>U.enter(F),D);else{const{leave:V,delayLeave:Q,afterLeave:ne}=U,se=()=>n(F,k,_),me=()=>{V(F,()=>{se(),ne&&ne()})};Q?Q(F,se,me):me()}else n(F,k,_)},Se=(g,k,_,N=!1,D=!1)=>{const{type:F,props:K,ref:U,children:z,dynamicChildren:H,shapeFlag:J,patchFlag:V,dirs:Q}=g;if(U!=null&&Oi(U,null,_,g,!0),J&256){k.ctx.deactivate(g);return}const ne=J&1&&Q,se=!Ko(g);let me;if(se&&(me=K&&K.onVnodeBeforeUnmount)&&mt(me,k,g),J&6)bn(g.component,_,N);else{if(J&128){g.suspense.unmount(_,N);return}ne&&qt(g,null,k,"beforeUnmount"),J&64?g.type.remove(g,k,_,D,W,N):H&&(F!==Ge||V>0&&V&64)?De(H,k,_,!1,!0):(F===Ge&&V&384||!D&&J&16)&&De(z,k,_),N&&no(g)}(se&&(me=K&&K.onVnodeUnmounted)||ne)&&We(()=>{me&&mt(me,k,g),ne&&qt(g,null,k,"unmounted")},_)},no=g=>{const{type:k,el:_,anchor:N,transition:D}=g;if(k===Ge){io(_,N);return}if(k===gi){y(g);return}const F=()=>{i(_),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(g.shapeFlag&1&&D&&!D.persisted){const{leave:K,delayLeave:U}=D,z=()=>K(_,F);U?U(g.el,F,z):z()}else F()},io=(g,k)=>{let _;for(;g!==k;)_=h(g),i(g),g=_;i(k)},bn=(g,k,_)=>{const{bum:N,scope:D,update:F,subTree:K,um:U}=g;N&&ui(N),D.stop(),F&&(F.active=!1,Se(K,g,k,_)),U&&We(U,k),We(()=>{g.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},De=(g,k,_,N=!1,D=!1,F=0)=>{for(let K=F;K<g.length;K++)Se(g[K],k,_,N,D)},P=g=>g.shapeFlag&6?P(g.component.subTree):g.shapeFlag&128?g.suspense.next():h(g.anchor||g.el),Y=(g,k,_)=>{g==null?k._vnode&&Se(k._vnode,null,null,!0):T(k._vnode||null,g,k,null,null,null,_),Ws(),fa(),k._vnode=g},W={p:T,um:Se,m:Le,r:no,mt:$,mc:v,pc:G,pbc:C,n:P,o:t};let Z,he;return e&&([Z,he]=e(W)),{render:Y,hydrate:Z,createApp:cd(Y,Z)}}function Yt({effect:t,update:e},o){t.allowRecurse=e.allowRecurse=o}function Ma(t,e,o=!1){const n=t.children,i=e.children;if(oe(n)&&oe(i))for(let s=0;s<n.length;s++){const r=n[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Dt(i[s]),a.el=r.el),o||Ma(r,a)),a.type===oi&&(a.el=r.el)}}function bd(t){const e=t.slice(),o=[0];let n,i,s,r,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(i=o[o.length-1],t[i]<c){e[n]=i,o.push(n);continue}for(s=0,r=o.length-1;s<r;)a=s+r>>1,t[o[a]]<c?s=a+1:r=a;c<t[o[s]]&&(s>0&&(e[n]=o[s-1]),o[s]=n)}}for(s=o.length,r=o[s-1];s-- >0;)o[s]=r,r=e[r];return o}const vd=t=>t.__isTeleport,Ge=Symbol.for("v-fgt"),oi=Symbol.for("v-txt"),Wt=Symbol.for("v-cmt"),gi=Symbol.for("v-stc"),Yo=[];let at=null;function Ne(t=!1){Yo.push(at=t?null:[])}function kd(){Yo.pop(),at=Yo[Yo.length-1]||null}let nn=1;function tr(t){nn+=t}function Aa(t){return t.dynamicChildren=nn>0?at||fo:null,kd(),nn>0&&at&&at.push(t),t}function Ct(t,e,o,n,i,s){return Aa(Ie(t,e,o,n,i,s,!0))}function oo(t,e,o,n,i){return Aa(le(t,e,o,n,i,!0))}function Hn(t){return t?t.__v_isVNode===!0:!1}function Do(t,e){return t.type===e.type&&t.key===e.key}const ni="__vInternal",Oa=({key:t})=>t??null,In=({ref:t,ref_key:e,ref_for:o})=>(typeof t=="number"&&(t=""+t),t!=null?Be(t)||Ae(t)||ie(t)?{i:ze,r:t,k:e,f:!!o}:t:null);function Ie(t,e=null,o=null,n=0,i=null,s=t===Ge?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Oa(e),ref:e&&In(e),scopeId:ma,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ze};return a?(fs(l,o),s&128&&t.normalize(l)):o&&(l.shapeFlag|=Be(o)?8:16),nn>0&&!r&&at&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&at.push(l),l}const le=yd;function yd(t,e=null,o=null,n=0,i=null,s=!1){if((!t||t===wa)&&(t=Wt),Hn(t)){const a=Co(t,e,!0);return o&&fs(a,o),nn>0&&!s&&at&&(a.shapeFlag&6?at[at.indexOf(t)]=a:at.push(a)),a.patchFlag|=-2,a}if(Od(t)&&(t=t.__vccOpts),e){e=wd(e);let{class:a,style:l}=e;a&&!Be(a)&&(e.class=ge(a)),ke(l)&&(ia(l)&&!oe(l)&&(l=Oe({},l)),e.style=Xn(l))}const r=Be(t)?1:Dc(t)?128:vd(t)?64:ke(t)?4:ie(t)?2:0;return Ie(t,e,o,n,i,r,s,!0)}function wd(t){return t?ia(t)||ni in t?Oe({},t):t:null}function Co(t,e,o=!1){const{props:n,ref:i,patchFlag:s,children:r}=t,a=e?Ed(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Oa(a),ref:e&&e.ref?o&&i?oe(i)?i.concat(In(e)):[i,In(e)]:In(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ge?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Co(t.ssContent),ssFallback:t.ssFallback&&Co(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function hs(t=" ",e=0){return le(oi,null,t,e)}function xd(t="",e=!1){return e?(Ne(),oo(Wt,null,t)):le(Wt,null,t)}function wt(t){return t==null||typeof t=="boolean"?le(Wt):oe(t)?le(Ge,null,t.slice()):typeof t=="object"?Dt(t):le(oi,null,String(t))}function Dt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Co(t)}function fs(t,e){let o=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(oe(e))o=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),fs(t,i()),i._c&&(i._d=!0));return}else{o=32;const i=e._;!i&&!(ni in e)?e._ctx=ze:i===3&&ze&&(ze.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ie(e)?(e={default:e,_ctx:ze},o=32):(e=String(e),n&64?(o=16,e=[hs(e)]):o=8);t.children=e,t.shapeFlag|=o}function Ed(...t){const e={};for(let o=0;o<t.length;o++){const n=t[o];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=ge([e.class,n.class]));else if(i==="style")e.style=Xn([e.style,n.style]);else if(Kn(i)){const s=e[i],r=n[i];r&&s!==r&&!(oe(s)&&s.includes(r))&&(e[i]=s?[].concat(s,r):r)}else i!==""&&(e[i]=n[i])}return e}function mt(t,e,o,n=null){ht(t,e,7,[o,n])}const Cd=Ca();let Sd=0;function Td(t,e,o){const n=t.type,i=(e?e.appContext:t.appContext)||Cd,s={uid:Sd++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new zl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ta(n,i),emitsOptions:ga(n,i),emit:null,emitted:null,propsDefaults:we,inheritAttrs:n.inheritAttrs,ctx:we,data:we,props:we,attrs:we,slots:we,refs:we,setupState:we,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Oc.bind(null,s),t.ce&&t.ce(s),s}let Me=null,ps,ro,or="__VUE_INSTANCE_SETTERS__";(ro=Ei()[or])||(ro=Ei()[or]=[]),ro.push(t=>Me=t),ps=t=>{ro.length>1?ro.forEach(e=>e(t)):ro[0](t)};const So=t=>{ps(t),t.scope.on()},Qt=()=>{Me&&Me.scope.off(),ps(null)};function La(t){return t.vnode.shapeFlag&4}let To=!1;function Bd(t,e=!1){To=e;const{props:o,children:n}=t.vnode,i=La(t);dd(t,o,i,e),fd(t,n);const s=i?_d(t,e):void 0;return To=!1,s}function _d(t,e){const o=t.type;t.accessCache=Object.create(null),t.proxy=sa(new Proxy(t.ctx,od));const{setup:n}=o;if(n){const i=t.setupContext=n.length>1?Md(t):null;So(t),Lo();const s=Ut(n,t,0,[t.props,i]);if(Ro(),Qt(),$r(s)){if(s.then(Qt,Qt),e)return s.then(r=>{nr(t,r,e)}).catch(r=>{pn(r,t,0)});t.asyncDep=s}else nr(t,s,e)}else Ra(t,e)}function nr(t,e,o){ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ke(e)&&(t.setupState=ca(e)),Ra(t,o)}let ir;function Ra(t,e,o){const n=t.type;if(!t.render){if(!e&&ir&&!n.render){const i=n.template||ds(t).template;if(i){const{isCustomElement:s,compilerOptions:r}=t.appContext.config,{delimiters:a,compilerOptions:l}=n,c=Oe(Oe({isCustomElement:s,delimiters:a},r),l);n.render=ir(i,c)}}t.render=n.render||ut}So(t),Lo(),nd(t),Ro(),Qt()}function Id(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,o){return qe(t,"get","$attrs"),e[o]}}))}function Md(t){const e=o=>{t.exposed=o||{}};return{get attrs(){return Id(t)},slots:t.slots,emit:t.emit,expose:e}}function gs(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ca(sa(t.exposed)),{get(e,o){if(o in e)return e[o];if(o in qo)return qo[o](t)},has(e,o){return o in e||o in qo}}))}function Ad(t,e=!0){return ie(t)?t.displayName||t.name:t.name||e&&t.__name}function Od(t){return ie(t)&&"__vccOpts"in t}const rt=(t,e)=>Tc(t,e,To);function Na(t,e,o){const n=arguments.length;return n===2?ke(e)&&!oe(e)?Hn(e)?le(t,null,[e]):le(t,e):le(t,null,e):(n>3?o=Array.prototype.slice.call(arguments,2):n===3&&Hn(o)&&(o=[o]),le(t,e,o))}const Ld=Symbol.for("v-scx"),Rd=()=>Mt(Ld),Nd="3.3.4",Pd="http://www.w3.org/2000/svg",Xt=typeof document<"u"?document:null,sr=Xt&&Xt.createElement("template"),Dd={insert:(t,e,o)=>{e.insertBefore(t,o||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,o,n)=>{const i=e?Xt.createElementNS(Pd,t):Xt.createElement(t,o?{is:o}:void 0);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>Xt.createTextNode(t),createComment:t=>Xt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Xt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,o,n,i,s){const r=o?o.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),o),!(i===s||!(i=i.nextSibling)););else{sr.innerHTML=n?`<svg>${t}</svg>`:t;const a=sr.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,o)}return[r?r.nextSibling:e.firstChild,o?o.previousSibling:e.lastChild]}};function Fd(t,e,o){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):o?t.setAttribute("class",e):t.className=e}function Hd(t,e,o){const n=t.style,i=Be(o);if(o&&!i){if(e&&!Be(e))for(const s in e)o[s]==null&&Li(n,s,"");for(const s in o)Li(n,s,o[s])}else{const s=n.display;i?e!==o&&(n.cssText=o):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=s)}}const rr=/\s*!important$/;function Li(t,e,o){if(oe(o))o.forEach(n=>Li(t,e,n));else if(o==null&&(o=""),e.startsWith("--"))t.setProperty(e,o);else{const n=jd(t,e);rr.test(o)?t.setProperty(Oo(n),o.replace(rr,""),"important"):t[n]=o}}const ar=["Webkit","Moz","ms"],mi={};function jd(t,e){const o=mi[e];if(o)return o;let n=Et(e);if(n!=="filter"&&n in t)return mi[e]=n;n=Vn(n);for(let i=0;i<ar.length;i++){const s=ar[i]+n;if(s in t)return mi[e]=s}return e}const lr="http://www.w3.org/1999/xlink";function $d(t,e,o,n,i){if(n&&e.startsWith("xlink:"))o==null?t.removeAttributeNS(lr,e.slice(6,e.length)):t.setAttributeNS(lr,e,o);else{const s=$l(e);o==null||s&&!Wr(o)?t.removeAttribute(e):t.setAttribute(e,s?"":o)}}function Ud(t,e,o,n,i,s,r){if(e==="innerHTML"||e==="textContent"){n&&r(n,i,s),t[e]=o??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=o;const c=a==="OPTION"?t.getAttribute("value"):t.value,d=o??"";c!==d&&(t.value=d),o==null&&t.removeAttribute(e);return}let l=!1;if(o===""||o==null){const c=typeof t[e];c==="boolean"?o=Wr(o):o==null&&c==="string"?(o="",l=!0):c==="number"&&(o=0,l=!0)}try{t[e]=o}catch{}l&&t.removeAttribute(e)}function zd(t,e,o,n){t.addEventListener(e,o,n)}function Wd(t,e,o,n){t.removeEventListener(e,o,n)}function Kd(t,e,o,n,i=null){const s=t._vei||(t._vei={}),r=s[e];if(n&&r)r.value=n;else{const[a,l]=qd(e);if(n){const c=s[e]=Xd(n,i);zd(t,a,c,l)}else r&&(Wd(t,a,r,l),s[e]=void 0)}}const cr=/(?:Once|Passive|Capture)$/;function qd(t){let e;if(cr.test(t)){e={};let n;for(;n=t.match(cr);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Oo(t.slice(2)),e]}let bi=0;const Yd=Promise.resolve(),Vd=()=>bi||(Yd.then(()=>bi=0),bi=Date.now());function Xd(t,e){const o=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=o.attached)return;ht(Zd(n,o.value),e,5,[n])};return o.value=t,o.attached=Vd(),o}function Zd(t,e){if(oe(e)){const o=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{o.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const dr=/^on[a-z]/,Gd=(t,e,o,n,i=!1,s,r,a,l)=>{e==="class"?Fd(t,n,i):e==="style"?Hd(t,o,n):Kn(e)?Xi(e)||Kd(t,e,o,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Jd(t,e,n,i))?Ud(t,e,n,s,r,a,l):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),$d(t,e,n,i))};function Jd(t,e,o,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&dr.test(e)&&ie(o)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||dr.test(e)&&Be(o)?!1:e in t}const Qd=["ctrl","shift","alt","meta"],eu={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Qd.some(o=>t[`${o}Key`]&&!e.includes(o))},Ft=(t,e)=>(o,...n)=>{for(let i=0;i<e.length;i++){const s=eu[e[i]];if(s&&s(o,e))return}return t(o,...n)},tu=Oe({patchProp:Gd},Dd);let ur;function ou(){return ur||(ur=gd(tu))}const nu=(...t)=>{const e=ou().createApp(...t),{mount:o}=e;return e.mount=n=>{const i=iu(n);if(!i)return;const s=e._component;!ie(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const r=o(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},e};function iu(t){return Be(t)?document.querySelector(t):t}const su=["disabled","placeholder","value","type"],ru=Ye({__name:"BaseInput",props:{onChange:{type:Function},disabled:{type:Boolean},placeholder:{},type:{},value:{},variant:{}},setup(t){return(e,o)=>(Ne(),Ct("input",{class:ge([e.$style.input,e.$style[`input_${e.variant}`]]),disabled:e.disabled,placeholder:e.placeholder||"",value:e.value,type:e.type||"text",onClick:o[0]||(o[0]=(...n)=>e.onChange&&e.onChange(...n))},null,10,su))}}),au="_input_4mb6r_2",lu="_input_border_4mb6r_10",cu="_input_flat_4mb6r_14",du={input:au,input_border:lu,input_flat:cu},Rt=(t,e)=>{const o=t.__vccOpts||t;for(const[n,i]of e)o[n]=i;return o},uu={$style:du},hu=Rt(ru,[["__cssModules",uu]]),fu="modulepreload",pu=function(t){return"/"+t},hr={},bt=function(e,o,n){if(!o||o.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(o.map(s=>{if(s=pu(s),s in hr)return;hr[s]=!0;const r=s.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const u=i[d];if(u.href===s&&(!r||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":fu,r||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),r)return new Promise((d,u)=>{c.addEventListener("load",d),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s})},gu=(t,e)=>{const o=t[e];return o?typeof o=="function"?o():Promise.resolve(o):new Promise((n,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e)))})},ms=Ye({__name:"BaseIcon",props:{name:{},width:{},height:{}},setup(t){const e=t,o=jc(()=>gu(Object.assign({"../assets/svg/arrow-left.svg":()=>bt(()=>import("./arrow-left-89e79ccc.js"),[]),"../assets/svg/arrow-right.svg":()=>bt(()=>import("./arrow-right-5931e055.js"),[]),"../assets/svg/copy.svg":()=>bt(()=>import("./copy-5ca0ce42.js"),[]),"../assets/svg/export.svg":()=>bt(()=>import("./export-6d0a7cb5.js"),[]),"../assets/svg/font.svg":()=>bt(()=>import("./font-ff795521.js"),[]),"../assets/svg/image-tool.svg":()=>bt(()=>import("./image-tool-018c08ad.js"),[]),"../assets/svg/image.svg":()=>bt(()=>import("./image-55358dae.js"),[]),"../assets/svg/logo.svg":()=>bt(()=>import("./logo-6933845c.js"),[]),"../assets/svg/plus.svg":()=>bt(()=>import("./plus-bca29242.js"),[]),"../assets/svg/remove.svg":()=>bt(()=>import("./remove-9db7b775.js"),[])}),`../assets/svg/${e.name}.svg`));return(n,i)=>(Ne(),oo(Jc(xe(o)),{style:{width:"width",height:"height"}}))}}),mu=["disabled"],bu=Ye({__name:"BaseButton",props:{action:{type:Function},variant:{},disabled:{type:Boolean},highlighted:{type:Boolean},iconName:{}},setup(t){return(e,o)=>(Ne(),Ct("button",{class:ge([e.$style["base-button"],e.$style[`base-button_${e.variant}`],e.highlighted?e.$style["base-button_highlighted"]:""]),disabled:e.disabled,onClick:o[0]||(o[0]=(...n)=>e.action&&e.action(...n))},[Ie("span",{class:ge(e.$style["base-button-container"])},[e.iconName?(Ne(),oo(ms,{key:0,name:e.iconName},null,8,["name"])):xd("",!0),td(e.$slots,"default")],2)],10,mu))}}),vu={"base-button":"_base-button_1dm2z_2","base-button-container":"_base-button-container_1dm2z_15","base-button_light":"_base-button_light_1dm2z_22","base-button_highlighted":"_base-button_highlighted_1dm2z_28","base-button_colored":"_base-button_colored_1dm2z_38"},ku={$style:vu},jn=Rt(bu,[["__cssModules",ku]]),Pa=ue(!1),yu=Ye({__name:"BaseHeader",setup(t){const e=ue("");function o(s){e.value=s.trim()}function n(s){console.log("[ handleDownloadClick ] e: ",s)}function i(){document.addEventListener("fullscreenchange",()=>{Pa.value=!!document.fullscreenElement}),document.documentElement.requestFullscreen()}return(s,r)=>(Ne(),Ct("header",{class:ge(s.$style.header)},[Ie("div",{class:ge(s.$style.wrapper)},[le(ms,{name:"logo"}),le(hu,{placeholder:" ",value:e.value,variant:"flat",onChange:o},null,8,["value"])],2),Ie("div",{class:ge(s.$style.wrapper)},[le(jn,{"icon-name":"export",action:n,variant:"light"}),le(jn,{"icon-name":"image",action:i,variant:"colored"},{default:as(()=>[hs("   ")]),_:1})],2)],2))}}),wu="_header_4h65d_2",xu="_wrapper_4h65d_9",Eu={header:wu,wrapper:xu},Cu={$style:Eu},Su=Rt(yu,[["__cssModules",Cu]]),Da=18,Ri=t=>`${t}px 'Manrope', system-ui, 'SF Pro Display', Roboto, Oxygen, Arial, sans-serif`,Tu=[{id:"1",elements:[]}],$n=(t,e,o,n=1,i)=>{if(!(t===null||!o)){e.clearRect(0,0,t.width,t.height);for(const s of o.elements)if(s.type==="rectangle")e.fillStyle=s.color||"",e.fillRect(s.area.x*n,s.area.y*n,s.area.width*n,s.area.height*n);else if(s.type==="image"){const r=document.createElement("canvas"),a=r.getContext("2d");r.width=s.content.width,r.height=s.content.height,a==null||a.putImageData(s.content,0,0),e.drawImage(r,s.area.x*n,s.area.y*n,s.area.width*n,s.area.height*n)}else s.type==="text"&&Mn(s.content,s.area.x*n,s.area.y*n,e,i)}};function Mn(t,e,o,n,i){if(!t)return;let s=o;n.fillStyle="#383838",n.font=`normal ${Ri(i)}`,t.blocks.forEach(({type:r,data:a})=>{r==="paragraph"?(Bu(a.text,e,s,n,i),s=s+43):r==="list"&&a.items.forEach(l=>{n.fillText(l.content,e,s),s=s+38})})}function Bu(t,e,o,n,i){let s=e;const r=o;let a=!1,l=!1,c=1;const d=new Array(t.length);for(let u=0;u<t.length;u+=c){if(c=1,a){t[u]==="/"?(d.pop(),a=!1):(d.push(t[u]),a=!1,l=!0),c=t.substring(u).indexOf(">");continue}if(l){const h=d[d.length-1],p=["bold","italic"].find(E=>E.match(h));p&&(n.font=`${p} ${Ri(i)}`);const f=t.slice(u).indexOf("<"),T=t.slice(u).slice(1,f);n.fillText(T,s,r);const{width:m,fontBoundingBoxDescent:x}=n.measureText(T);if(!p)switch(h){case"u":n.fillRect(s,r+x-i/6,m,1);break;case"s":n.fillRect(s,r+i/2-1,m,1);break}s+=n.measureText(T).width,c=T.length+5,n.font=`normal ${Ri(i)}`,l=!1;continue}t[u]==="<"?a=!0:(n.fillText(t[u],s,r),s+=n.measureText(t[u]).width)}return!1}const _u=Ye({__name:"SlideFrame",props:{slideNumber:{},slideIndex:{},selected:{type:Boolean},slide:{}},emits:["remove"],setup(t,{emit:e}){const o=t,n=Jn(o,"slide"),i=ue(),s=ue(0),r=ue(0);let a;gn(()=>{a=i.value.getContext("2d",{willReadFrequently:!0});const c=document.querySelector("#workspace"),d=+getComputedStyle(c).width.slice(0,-2);s.value=i.value.width/d,r.value=Da*s.value,$n(i.value,a,n.value,s.value,r.value)});const l=()=>{e("remove",o.slideIndex)};return Jt(n,()=>{$n(i.value,a,n.value,s.value,r.value)},{deep:!0}),(c,d)=>(Ne(),Ct("div",{class:ge([c.$style.containerSlide])},[Ie("div",{class:ge([c.$style.wrapper])},[Ie("div",{class:ge([c.$style.slideNumber])},Ul(c.slideNumber),3),Ie("button",{class:ge([c.$style.btnRemove]),onClick:l},[le(ms,{name:"remove"})],2)],2),Ie("div",{class:ge([c.$style.miniature,c.selected?c.$style.selected:""])},[Ie("canvas",{ref_key:"canvas",ref:i,width:157,height:92,class:ge(c.$style.miniCanvas)},null,2)],2)],2))}}),Iu="_btnRemove_515bg_2",Mu="_containerSlide_515bg_8",Au="_slideNumber_515bg_20",Ou="_miniature_515bg_26",Lu="_selected_515bg_49",Ru="_miniCanvas_515bg_58",Nu={btnRemove:Iu,containerSlide:Mu,slideNumber:Au,miniature:Ou,selected:Lu,miniCanvas:Ru},Pu={$style:Nu},Du=Rt(_u,[["__cssModules",Pu],["__scopeId","data-v-ffcc949d"]]);function Fu(){const t=Math.floor(Math.random()*1e9);return String(t)}const Hu=Ye({__name:"SlidesContainer",props:{slides:{},currentSlideId:{}},emits:["selectSlide","removeSlide"],setup(t,{emit:e}){const n=Jn(t,"slides");function i(f){e("selectSlide",f)}function s(){n.value.push({id:Fu(),elements:[]}),dt.save()}const r=f=>{e("removeSlide",f)},a=ue(-1),l=(f,T)=>{T.dataTransfer.setData("Text",f.toString()),T.dataTransfer.dropEffect="move",a.value=f},c=(f,T)=>{const x=T.target.className.includes("miniature");a.value!==f&&x&&(T.target.style.backgroundColor="#e3e3e3")},d=(f,T)=>{T.target.style.backgroundColor="white"},u=()=>{a.value=-1},h=(f,T)=>{T!==-1&&(n.value.splice(T,0,n.value.splice(f,1)[0]),dt.save())},p=(f,T)=>{h(a.value,f),T.target.style.backgroundColor="white"};return(f,T)=>(Ne(),Ct("div",{class:ge(f.$style.container)},[le(jn,{"icon-name":"plus",action:s,variant:"light",class:ge([f.$style.button])},{default:as(()=>[hs("  ")]),_:1},8,["class"]),Ie("div",{class:ge(f.$style.slidesContainer)},[(Ne(!0),Ct(Ge,null,ed(n.value,(m,x)=>(Ne(),oo(Du,{class:ge(f.$style.slideItem),key:m.id,"slide-index":m.id,slideNumber:x+1,selected:f.currentSlideId===m.id,slide:m,onMousedown:E=>i(m.id),draggable:"true",onDragstart:E=>l(x,E),onDragenter:[E=>c(x,E),T[1]||(T[1]=Ft(()=>{},["prevent"]))],onDragleave:E=>d(x,E),onDragend:u,onDrop:E=>p(x,E),onDragover:T[0]||(T[0]=Ft(()=>{},["prevent"])),onRemove:r},null,8,["class","slide-index","slideNumber","selected","slide","onMousedown","onDragstart","onDragenter","onDragleave","onDrop"]))),128))],2)],2))}}),ju="_container_tuere_2",$u="_button_tuere_10",Uu="_slidesContainer_tuere_15",zu="_slideItem_tuere_20",Wu={container:ju,button:$u,slidesContainer:Uu,slideItem:zu},Ku={$style:Wu},qu=Rt(Hu,[["__cssModules",Ku]]);class Fa{constructor(){vn(this,"isMouseInShape",(e,o,n)=>{const{x:i,y:s,height:r,width:a}=n,l=i,c=s,d=i+a,u=s+r;return e>l&&e<d&&o>c&&o<u})}}var an,ln,bo,cn;class Yu{constructor(e){be(this,an,ue(null));be(this,ln,[]);be(this,bo,ue(!1));be(this,cn,void 0);ye(this,ln,e),ye(this,cn,new Fa)}drag(e,o){let n=0;for(const i of j(this,ln)){if(j(this,cn).isMouseInShape(e,o,i)){this.currentPointIndex=n,j(this,bo).value=!0;return}n++}}move(e,o,n){this.currentPointIndex===0&&(e.area.x+=o,e.area.y+=n,e.area.width-=o,e.area.height-=n),this.currentPointIndex===1&&(e.area.width+=o,e.area.y+=n,e.area.height-=n),this.currentPointIndex===2&&(e.area.width+=o,e.area.height+=n),this.currentPointIndex===3&&(e.area.x+=o,e.area.width-=o,e.area.height+=n),this.currentPointIndex===4&&(e.area.y+=n,e.area.height-=n),this.currentPointIndex===5&&(e.area.width+=o),this.currentPointIndex===6&&(e.area.height+=n),this.currentPointIndex===7&&(e.area.x+=o,e.area.width-=o)}drop(){this.isResizing&&(this.isResizing=!1),this.currentPointIndex=null}get currentPointIndex(){return j(this,an).value}set currentPointIndex(e){j(this,an).value=e}get isResizing(){return j(this,bo).value}set isResizing(e){j(this,bo).value=e}}an=new WeakMap,ln=new WeakMap,bo=new WeakMap,cn=new WeakMap;var vo,dn,un,ko;class Vu{constructor(e){be(this,vo,ue(!1));be(this,dn,ue(null));be(this,un,void 0);be(this,ko,void 0);ye(this,un,new Fa),ye(this,ko,e)}drag(e,o){if(!j(this,ko))return;let n=0;for(const i of j(this,ko))j(this,un).isMouseInShape(e,o,i.area)&&(this.currentElementIndex=n,j(this,vo).value=!0),n++}move(e,o,n){e.area.x+=o,e.area.y+=n}drop(){this.isDragging&&(this.isDragging=!1)}get currentElementIndex(){return j(this,dn).value}set currentElementIndex(e){j(this,dn).value=e}get isDragging(){return j(this,vo).value}set isDragging(e){j(this,vo).value=e}}vo=new WeakMap,dn=new WeakMap,un=new WeakMap,ko=new WeakMap;var yo,wo,vt,kt,hn,it,Je;class Xu{constructor(e,o,n,i){be(this,yo,void 0);be(this,wo,void 0);be(this,vt,void 0);be(this,kt,void 0);be(this,hn,void 0);be(this,it,void 0);be(this,Je,void 0);ye(this,yo,e),ye(this,wo,o),ye(this,vt,ue()),ye(this,kt,ue()),ye(this,hn,i),ye(this,Je,new Vu(o)),ye(this,it,new Yu(n))}drag(e){const o=j(this,yo).getBoundingClientRect();j(this,vt).value=e.clientX-o.left,j(this,kt).value=e.clientY-o.top,j(this,it).drag(j(this,vt).value,j(this,kt).value),!j(this,it).isResizing&&j(this,Je).drag(j(this,vt).value,j(this,kt).value)}drop(){(j(this,Je).isDragging||j(this,it).isResizing)&&dt.save(),j(this,Je).drop(),j(this,it).drop()}move(e){if(!j(this,Je).isDragging&&!j(this,it).isResizing||!j(this,wo)||!j(this,vt).value||!j(this,kt).value||j(this,Je).currentElementIndex===null)return;const o=j(this,yo).getBoundingClientRect(),n=e.clientX-o.left,i=e.clientY-o.top,s=n-j(this,vt).value,r=i-j(this,kt).value,a=j(this,wo)[j(this,Je).currentElementIndex];j(this,it).isResizing&&j(this,it).move(a,s,r),j(this,Je).isDragging&&j(this,Je).move(a,s,r),j(this,hn).call(this),j(this,vt).value=n,j(this,kt).value=i}}yo=new WeakMap,wo=new WeakMap,vt=new WeakMap,kt=new WeakMap,hn=new WeakMap,it=new WeakMap,Je=new WeakMap;const Ze=ue({addImage:void 0,addRectangle:void 0,isTextEdit:!1,fullScreenToggle:void 0});var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ii(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function vi(){}Object.assign(vi,{default:vi,register:vi,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){const e=(this.document||this.ownerDocument).querySelectorAll(t);let o=e.length;for(;--o>=0&&e.item(o)!==this;);return o>-1});Element.prototype.closest||(Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(e!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(t){const e=document.createDocumentFragment();Array.isArray(t)||(t=[t]),t.forEach(o=>{const n=o instanceof Node;e.appendChild(n?o:document.createTextNode(o))}),this.insertBefore(e,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(t){t=arguments.length===0?!0:!!t;const e=this.parentNode,o=window.getComputedStyle(e,null),n=parseInt(o.getPropertyValue("border-top-width")),i=parseInt(o.getPropertyValue("border-left-width")),s=this.offsetTop-e.offsetTop<e.scrollTop,r=this.offsetTop-e.offsetTop+this.clientHeight-n>e.scrollTop+e.clientHeight,a=this.offsetLeft-e.offsetLeft<e.scrollLeft,l=this.offsetLeft-e.offsetLeft+this.clientWidth-i>e.scrollLeft+e.clientWidth,c=s&&!r;(s||r)&&t&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-n+this.clientHeight/2),(a||l)&&t&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-i+this.clientWidth/2),(s||r||a||l)&&!t&&this.scrollIntoView(c)});window.requestIdleCallback=window.requestIdleCallback||function(t){const e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(t){clearTimeout(t)};let Gu=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,o)=>(o&=63,o<36?e+=o.toString(36):o<62?e+=(o-26).toString(36).toUpperCase():o>62?e+="-":e+="_",e),"");var Ha=(t=>(t.VERBOSE="VERBOSE",t.INFO="INFO",t.WARN="WARN",t.ERROR="ERROR",t))(Ha||{});const te={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91},Ju={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};function mn(t,e,o="log",n,i="color: inherit"){if(!("console"in window)||!window.console[o])return;const s=["info","log","warn","error"].includes(o),r=[];switch(mn.logLevel){case"ERROR":if(o!=="error")return;break;case"WARN":if(!["error","warn"].includes(o))return;break;case"INFO":if(!s||t)return;break}n&&r.push(n);const a="Editor.js 2.28.2",l=`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`;t&&(s?(r.unshift(l,i),e=`%c${a}%c ${e}`):e=`( ${a} )${e}`);try{s?n?console[o](`${e} %o`,...r):console[o](e,...r):console[o](e)}catch{}}mn.logLevel="VERBOSE";function Qu(t){mn.logLevel=t}const de=mn.bind(window,!1),lt=mn.bind(window,!0);function to(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function ve(t){return to(t)==="function"||to(t)==="asyncfunction"}function Pe(t){return to(t)==="object"}function Kt(t){return to(t)==="string"}function eh(t){return to(t)==="boolean"}function fr(t){return to(t)==="number"}function pr(t){return to(t)==="undefined"}function ft(t){return t?Object.keys(t).length===0&&t.constructor===Object:!0}function ja(t){return t>47&&t<58||t===32||t===13||t===229||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223}async function th(t,e=()=>{},o=()=>{}){async function n(i,s,r){try{await i.function(i.data),await s(pr(i.data)?{}:i.data)}catch{r(pr(i.data)?{}:i.data)}}return t.reduce(async(i,s)=>(await i,n(s,e,o)),Promise.resolve())}function $a(t){return Array.prototype.slice.call(t)}function Bo(t,e){return function(){const o=this,n=arguments;window.setTimeout(()=>t.apply(o,n),e)}}function oh(t){return t.name.split(".").pop()}function nh(t){return/^[-\w]+\/([-+\w]+|\*)$/.test(t)}function ih(t,e,o){let n;return(...i)=>{const s=this,r=()=>{n=null,o||t.apply(s,i)},a=o&&!n;window.clearTimeout(n),n=window.setTimeout(r,e),a&&t.apply(s,i)}}function Ni(t,e,o=void 0){let n,i,s,r=null,a=0;o||(o={});const l=function(){a=o.leading===!1?0:Date.now(),r=null,s=t.apply(n,i),r||(n=i=null)};return function(){const c=Date.now();!a&&o.leading===!1&&(a=c);const d=e-(c-a);return n=this,i=arguments,d<=0||d>e?(r&&(clearTimeout(r),r=null),a=c,s=t.apply(n,i),r||(n=i=null)):!r&&o.trailing!==!1&&(r=setTimeout(l,d)),s}}function sh(){const t={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(t).find(o=>window.navigator.appVersion.toLowerCase().indexOf(o)!==-1);return e&&(t[e]=!0),t}function _o(t){return t[0].toUpperCase()+t.slice(1)}function Pi(t,...e){if(!e.length)return t;const o=e.shift();if(Pe(t)&&Pe(o))for(const n in o)Pe(o[n])?(t[n]||Object.assign(t,{[n]:{}}),Pi(t[n],o[n])):Object.assign(t,{[n]:o[n]});return Pi(t,...e)}function bs(t){const e=sh();return t=t.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi," + "),e.mac?t=t.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):t=t.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),t}function rh(t){try{return new URL(t).href}catch{}return t.substring(0,2)==="//"?window.location.protocol+t:window.location.origin+t}function ah(){return Gu(10)}function lh(t){window.open(t,"_blank")}function ch(t=""){return`${t}${Math.floor(Math.random()*1e8).toString(16)}`}function Di(t,e,o){const n=`${e} is deprecated and will be removed in the next major release. Please use the ${o} instead.`;t&&lt(n,"warn")}function No(t,e,o){const n=o.value?"value":"get",i=o[n],s=`#${e}Cache`;if(o[n]=function(...r){return this[s]===void 0&&(this[s]=i.apply(this,...r)),this[s]},n==="get"&&o.set){const r=o.set;o.set=function(a){delete t[s],r.apply(this,a)}}return o}const Ua=650;function eo(){return window.matchMedia(`(max-width: ${Ua}px)`).matches}const gr=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function dh(t,e){const o=Array.isArray(t)||Pe(t),n=Array.isArray(e)||Pe(e);return o||n?JSON.stringify(t)===JSON.stringify(e):t===e}class M{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,o=null,n={}){const i=document.createElement(e);Array.isArray(o)?i.classList.add(...o):o&&i.classList.add(o);for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s]);return i}static text(e){return document.createTextNode(e)}static append(e,o){Array.isArray(o)?o.forEach(n=>e.appendChild(n)):e.appendChild(o)}static prepend(e,o){Array.isArray(o)?(o=o.reverse(),o.forEach(n=>e.prepend(n))):e.prepend(o)}static swap(e,o){const n=document.createElement("div"),i=e.parentNode;i.insertBefore(n,e),i.insertBefore(e,o),i.insertBefore(o,n),i.removeChild(n)}static find(e=document,o){return e.querySelector(o)}static get(e){return document.getElementById(e)}static findAll(e=document,o){return e.querySelectorAll(o)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(e=>`input[type="${e}"]`).join(", ")}static findAllInputs(e){return $a(e.querySelectorAll(M.allInputsSelector)).reduce((o,n)=>M.isNativeInput(n)||M.containsOnlyInlineElements(n)?[...o,n]:[...o,...M.getDeepestBlockElements(n)],[])}static getDeepestNode(e,o=!1){const n=o?"lastChild":"firstChild",i=o?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[n]){let s=e[n];if(M.isSingleTag(s)&&!M.isNativeInput(s)&&!M.isLineBreakTag(s))if(s[i])s=s[i];else if(s.parentNode[i])s=s.parentNode[i];else return s.parentNode;return this.getDeepestNode(s,o)}return e}static isElement(e){return fr(e)?!1:e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return fr(e)?!1:e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return e.contentEditable==="true"}static isNativeInput(e){const o=["INPUT","TEXTAREA"];return e&&e.tagName?o.includes(e.tagName):!1}static canSetCaret(e){let o=!0;if(M.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":o=!1;break}else o=M.isContentEditable(e);return o}static isNodeEmpty(e){let o;return this.isSingleTag(e)&&!this.isLineBreakTag(e)?!1:(this.isElement(e)&&this.isNativeInput(e)?o=e.value:o=e.textContent.replace("",""),o.trim().length===0)}static isLeaf(e){return e?e.childNodes.length===0:!1}static isEmpty(e){e.normalize();const o=[e];for(;o.length>0;)if(e=o.shift(),!!e){if(this.isLeaf(e)&&!this.isNodeEmpty(e))return!1;e.childNodes&&o.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const o=M.make("div");return o.innerHTML=e,o.childElementCount>0}static getContentLength(e){return M.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let o;Kt(e)?(o=document.createElement("div"),o.innerHTML=e):o=e;const n=i=>!M.blockElements.includes(i.tagName.toLowerCase())&&Array.from(i.children).every(n);return Array.from(o.children).every(n)}static getDeepestBlockElements(e){return M.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((o,n)=>[...o,...M.getDeepestBlockElements(n)],[])}static getHolder(e){return Kt(e)?document.getElementById(e):e}static isAnchor(e){return e.tagName.toLowerCase()==="a"}static offset(e){const o=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop,s=o.top+i,r=o.left+n;return{top:s,left:r,bottom:s+o.height,right:r+o.width}}}const uh={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":""}},hh={Text:"",Link:"",Bold:"",Italic:""},fh={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},ph={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},za={ui:uh,toolNames:hh,tools:fh,blockTunes:ph},ao=class{static ui(t,e){return ao._t(t,e)}static t(t,e){return ao._t(t,e)}static setDictionary(t){ao.currentDictionary=t}static _t(t,e){const o=ao.getNamespace(t);return!o||!o[e]?e:o[e]}static getNamespace(t){return t.split(".").reduce((e,o)=>!e||!Object.keys(e).length?{}:e[o],ao.currentDictionary)}};let Ke=ao;Ke.currentDictionary=za;class Wa extends Error{}class si{constructor(){this.subscribers={}}on(e,o){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(o)}once(e,o){e in this.subscribers||(this.subscribers[e]=[]);const n=i=>{const s=o(i),r=this.subscribers[e].indexOf(n);return r!==-1&&this.subscribers[e].splice(r,1),s};this.subscribers[e].push(n)}emit(e,o){ft(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((n,i)=>{const s=i(n);return s!==void 0?s:n},o)}off(e,o){if(this.subscribers[e]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let n=0;n<this.subscribers[e].length;n++)if(this.subscribers[e][n]===o){delete this.subscribers[e][n];break}}destroy(){this.subscribers={}}}function Zt(t){Object.setPrototypeOf(this,{get id(){return t.id},get name(){return t.name},get config(){return t.config},get holder(){return t.holder},get isEmpty(){return t.isEmpty},get selected(){return t.selected},set stretched(e){t.stretched=e},get stretched(){return t.stretched},call(e,o){return t.call(e,o)},save(){return t.save()},validate(e){return t.validate(e)},dispatchChange(){t.dispatchChange()}})}class vs{constructor(){this.allListeners=[]}on(e,o,n,i=!1){const s=ch("l"),r={id:s,element:e,eventType:o,handler:n,options:i};if(!this.findOne(e,o,n))return this.allListeners.push(r),e.addEventListener(o,n,i),s}off(e,o,n,i){const s=this.findAll(e,o,n);s.forEach((r,a)=>{const l=this.allListeners.indexOf(s[a]);l>-1&&(this.allListeners.splice(l,1),r.element.removeEventListener(r.eventType,r.handler,r.options))})}offById(e){const o=this.findById(e);o&&o.element.removeEventListener(o.eventType,o.handler,o.options)}findOne(e,o,n){const i=this.findAll(e,o,n);return i.length>0?i[0]:null}findAll(e,o,n){let i;const s=e?this.findByEventTarget(e):[];return e&&o&&n?i=s.filter(r=>r.eventType===o&&r.handler===n):e&&o?i=s.filter(r=>r.eventType===o):i=s,i}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(o=>{if(o.element===e)return o})}findByType(e){return this.allListeners.filter(o=>{if(o.eventType===e)return o})}findByHandler(e){return this.allListeners.filter(o=>{if(o.handler===e)return o})}findById(e){return this.allListeners.find(o=>o.id===e)}}class re{constructor({config:e,eventsDispatcher:o}){if(this.nodes={},this.listeners=new vs,this.readOnlyMutableListeners={on:(n,i,s,r=!1)=>{this.mutableListenerIds.push(this.listeners.on(n,i,s,r))},clearAll:()=>{for(const n of this.mutableListenerIds)this.listeners.offById(n);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===re)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=o}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const o=this.nodes[e];o instanceof HTMLElement&&o.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}}class X{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const o=e.anchorNode;return o?M.isElement(o)?o:o.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(X.get())}static isSelectionAtEditor(e){if(!e)return!1;let o=e.anchorNode||e.focusNode;o&&o.nodeType===Node.TEXT_NODE&&(o=o.parentNode);let n=null;return o&&o instanceof Element&&(n=o.closest(`.${X.CSS.editorZone}`)),n?n.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(e){if(!e)return;let o=e.startContainer;o&&o.nodeType===Node.TEXT_NODE&&(o=o.parentNode);let n=null;return o&&o instanceof Element&&(n=o.closest(`.${X.CSS.editorZone}`)),n?n.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!X.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,o,n={x:0,y:0,width:0,height:0};if(e&&e.type!=="Control")return e=e,o=e.createRange(),n.x=o.boundingLeft,n.y=o.boundingTop,n.width=o.boundingWidth,n.height=o.boundingHeight,n;if(!window.getSelection)return de("Method window.getSelection is not supported","warn"),n;if(e=window.getSelection(),e.rangeCount===null||isNaN(e.rangeCount))return de("Method SelectionUtils.rangeCount is not supported","warn"),n;if(e.rangeCount===0)return n;if(o=e.getRangeAt(0).cloneRange(),o.getBoundingClientRect&&(n=o.getBoundingClientRect()),n.x===0&&n.y===0){const i=document.createElement("span");if(i.getBoundingClientRect){i.appendChild(document.createTextNode("")),o.insertNode(i),n=i.getBoundingClientRect();const s=i.parentNode;s.removeChild(i),s.normalize()}}return n}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,o=0){const n=document.createRange(),i=window.getSelection();return M.isNativeInput(e)?M.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=o,e.getBoundingClientRect()):void 0:(n.setStart(e,o),n.setEnd(e,o),i.removeAllRanges(),i.addRange(n),n.getBoundingClientRect())}static isRangeInsideContainer(e){const o=X.range;return o===null?!1:e.contains(o.startContainer)}static addFakeCursor(){const e=X.range;if(e===null)return;const o=M.make("span","codex-editor__fake-cursor");o.dataset.mutationFree="true",e.collapse(),e.insertNode(o)}static isFakeCursorInsideContainer(e){return M.find(e,".codex-editor__fake-cursor")!==null}static removeFakeCursor(e=document.body){const o=M.find(e,".codex-editor__fake-cursor");o&&o.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=X.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),o=document.createRange();o.selectNodeContents(e.focusNode),o.collapse(!1),e.removeAllRanges(),e.addRange(o)}findParentTag(e,o,n=10){const i=window.getSelection();let s=null;return!i||!i.anchorNode||!i.focusNode?null:([i.anchorNode,i.focusNode].forEach(r=>{let a=n;for(;a>0&&r.parentNode&&!(r.tagName===e&&(s=r,o&&r.classList&&!r.classList.contains(o)&&(s=null),s));)r=r.parentNode,a--}),s)}expandToTag(e){const o=window.getSelection();o.removeAllRanges();const n=document.createRange();n.selectNodeContents(e),o.addRange(n)}}function gh(t,e){const{type:o,target:n,addedNodes:i,removedNodes:s}=t;if(n===e)return!0;if(["characterData","attributes"].includes(o)){const l=n.nodeType===Node.TEXT_NODE?n.parentNode:n;return e.contains(l)}const r=Array.from(i).some(l=>e.contains(l)),a=Array.from(s).some(l=>e.contains(l));return r||a}const Fi="redactor dom changed",Ka="block changed",qa="fake cursor is about to be toggled",Ya="fake cursor have been set";function mr(t,e){return t.mergeable&&t.name===e.name}function mh(t,e){const o=e==null?void 0:e.export;return ve(o)?o(t):Kt(o)?t[o]:(o!==void 0&&de("Conversion export property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function bh(t,e){const o=e==null?void 0:e.import;return ve(o)?o(t):Kt(o)?{[o]:t}:(o!==void 0&&de("Conversion import property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var Bt=(t=>(t.APPEND_CALLBACK="appendCallback",t.RENDERED="rendered",t.MOVED="moved",t.UPDATED="updated",t.REMOVED="removed",t.ON_PASTE="onPaste",t))(Bt||{});class _e extends si{constructor({id:e=ah(),data:o,tool:n,api:i,readOnly:s,tunesData:r},a){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(l=void 0)=>{const c=l===void 0,d=l instanceof InputEvent;!c&&!d&&this.detectToolRootChange(l);let u;c||d?u=!0:u=!(l.length>0&&l.every(h=>{const{addedNodes:p,removedNodes:f,target:T}=h;return[...Array.from(p),...Array.from(f),T].some(m=>M.isElement(m)?m.dataset.mutationFree==="true":!1)})),u&&(this.dropInputsCache(),this.updateCurrentInput(),this.call("updated"),this.emit("didMutated",this))},this.name=n.name,this.id=e,this.settings=n.settings,this.config=n.settings.config||{},this.api=i,this.editorEventBus=a||null,this.blockAPI=new Zt(this),this.tool=n,this.toolInstance=n.create(o,this.blockAPI,s),this.tunes=n.tunes,this.composeTunes(r),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",focused:"ce-block--focused",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const e=M.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const o=this.inputs.findIndex(n=>n===e||n.contains(e));o!==-1&&(this.inputIndex=o)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!ft(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return ve(this.toolInstance.merge)}get isEmpty(){const e=M.isEmpty(this.pluginsContent),o=!this.hasMedia;return e&&o}get hasMedia(){const e=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(e.join(","))}set focused(e){this.holder.classList.toggle(_e.CSS.focused,e)}get focused(){return this.holder.classList.contains(_e.CSS.focused)}set selected(e){var o,n;this.holder.classList.toggle(_e.CSS.selected,e);const i=e===!0&&X.isRangeInsideContainer(this.holder),s=e===!1&&X.isFakeCursorInsideContainer(this.holder);(i||s)&&((o=this.editorEventBus)==null||o.emit(qa,{state:e}),i?X.addFakeCursor():X.removeFakeCursor(this.holder),(n=this.editorEventBus)==null||n.emit(Ya,{state:e}))}get selected(){return this.holder.classList.contains(_e.CSS.selected)}set stretched(e){this.holder.classList.toggle(_e.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(_e.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(_e.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,o){if(ve(this.toolInstance[e])){e==="appendCallback"&&de("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,o)}catch(n){de(`Error during '${e}' call: ${n.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),o=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([s,r])=>{if(ve(r.save))try{o[s]=r.save()}catch(a){de(`Tune ${r.constructor.name} save method throws an Error %o`,"warn",a)}});const n=window.performance.now();let i;return Promise.resolve(e).then(s=>(i=window.performance.now(),{id:this.id,tool:this.name,data:s,tunes:o,time:i-n})).catch(s=>{de(`Saving process for ${this.name} tool failed due to the ${s}`,"log","red")})}async validate(e){let o=!0;return this.toolInstance.validate instanceof Function&&(o=await this.toolInstance.validate(e)),o}getTunes(){const e=document.createElement("div"),o=[],n=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[],i=[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(s=>s.render());return[n,i].flat().forEach(s=>{M.isElement(s)?e.appendChild(s):Array.isArray(s)?o.push(...s):o.push(s)}),[o,e]}updateCurrentInput(){this.currentInput=M.isNativeInput(document.activeElement)||!X.anchorNode?document.activeElement:X.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),ve(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(e.length===1)return Promise.resolve(this.tool.toolbox[0]);const o=await this.data;return e.find(n=>Object.entries(n.data).some(([i,s])=>o[i]&&dh(o[i],s)))}async exportDataAsString(){const e=await this.data;return mh(e,this.tool.conversionConfig)}compose(){const e=M.make("div",_e.CSS.wrapper),o=M.make("div",_e.CSS.content),n=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=n,o.appendChild(this.toolRenderedElement);let i=o;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(s=>{if(ve(s.wrap))try{i=s.wrap(i)}catch(r){de(`Tune ${s.constructor.name} wrap method throws an Error %o`,"warn",r)}}),e.appendChild(i),e}composeTunes(e){Array.from(this.tunes.values()).forEach(o=>{(o.isInternal?this.defaultTunesInstances:this.tunesInstances).set(o.name,o.create(e[o.name],this.blockAPI))}),Object.entries(e).forEach(([o,n])=>{this.tunesInstances.has(o)||(this.unavailableTunesData[o]=n)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),M.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),M.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=o=>{const{mutations:n}=o;n.some(i=>gh(i,this.toolRenderedElement))&&this.didMutated(n)},(e=this.editorEventBus)==null||e.on(Fi,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;(e=this.editorEventBus)==null||e.off(Fi,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(o=>{if(Array.from(o.removedNodes).includes(this.toolRenderedElement)){const n=o.addedNodes[o.addedNodes.length-1];this.toolRenderedElement=n}})}dropInputsCache(){this.cachedInputs=[]}}class vh extends re{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,o={},n={},i,s,r,a)=>{const l=this.Editor.BlockManager.insert({id:a,tool:e,data:o,index:i,needToFocus:s,replace:r});return new Zt(l)},this.composeBlockData=async e=>{const o=this.Editor.Tools.blockTools.get(e);return new _e({tool:o,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,o)=>{const{BlockManager:n}=this.Editor,i=n.getBlockById(e);if(i===void 0)throw new Error(`Block with id "${e}" not found`);const s=await n.update(i,o);return new Zt(s)},this.convert=(e,o,n)=>{var i,s;const{BlockManager:r,Tools:a}=this.Editor,l=r.getBlockById(e);if(!l)throw new Error(`Block with id "${e}" not found`);const c=a.blockTools.get(l.name),d=a.blockTools.get(o);if(!d)throw new Error(`Block Tool with type "${o}" not found`);const u=((i=c==null?void 0:c.conversionConfig)==null?void 0:i.export)!==void 0,h=((s=d.conversionConfig)==null?void 0:s.import)!==void 0;if(u&&h)r.convert(l,o,n);else{const p=[u?!1:_o(l.name),h?!1:_o(o)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${l.name}" to "${o}" is not possible. ${p} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,o=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(o);const n=e.map(({id:i,type:s,data:r})=>this.Editor.BlockManager.composeBlock({id:i,tool:s||this.config.defaultBlock,data:r}));return this.Editor.BlockManager.insertMany(n,o),n.map(i=>new Zt(i))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,o)=>this.swap(e,o),move:(e,o)=>this.move(e,o),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),stretchBlock:(e,o=!0)=>this.stretchBlock(e,o),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const o=this.Editor.BlockManager.getBlockById(e);if(!o){lt("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(o)}getBlockByIndex(e){const o=this.Editor.BlockManager.getBlockByIndex(e);if(o===void 0){lt("There is no block at index `"+e+"`","warn");return}return new Zt(o)}getById(e){const o=this.Editor.BlockManager.getBlockById(e);return o===void 0?(lt("There is no block with id `"+e+"`","warn"),null):new Zt(o)}swap(e,o){de("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,o)}move(e,o){this.Editor.BlockManager.move(e,o)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const o=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(o)}catch(o){lt(o,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(e===void 0||e.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,o=!0){Di(!0,"blocks.stretchBlock()","BlockAPI");const n=this.Editor.BlockManager.getBlockByIndex(e);n&&(n.stretched=o)}insertNewBlock(){de("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if(typeof e!="number")throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(e===null)throw new Error("Index should be greater than or equal to 0")}}class kh extends re{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,o=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,o),!0):!1,this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,o=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,o),!0):!1,this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,o=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,o),!0):!1,this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,o=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,o),!0):!1,this.setToBlock=(e,o=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.blocks[e]?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.blocks[e],o,n),!0):!1,this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class yh extends re{get methods(){return{emit:(e,o)=>this.emit(e,o),off:(e,o)=>this.off(e,o),on:(e,o)=>this.on(e,o)}}on(e,o){this.eventsDispatcher.on(e,o)}emit(e,o){this.eventsDispatcher.emit(e,o)}off(e,o){this.eventsDispatcher.off(e,o)}}class ks extends re{static getNamespace(e){return e.isTune()?`blockTunes.${e.name}`:`tools.${e.name}`}get methods(){return{t:()=>{lt("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e){return Object.assign(this.methods,{t:o=>Ke.t(ks.getNamespace(e),o)})}}class wh extends re{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e)})}}class xh extends re{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class Eh extends re{get methods(){return{on:(e,o,n,i)=>this.on(e,o,n,i),off:(e,o,n,i)=>this.off(e,o,n,i),offById:e=>this.offById(e)}}on(e,o,n,i){return this.listeners.on(e,o,n,i)}off(e,o,n,i){this.listeners.off(e,o,n,i)}offById(e){this.listeners.offById(e)}}var Hi={},Ch={get exports(){return Hi},set exports(t){Hi=t}};(function(t,e){(function(o,n){t.exports=n()})(window,function(){return function(o){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return o[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=o,i.c=n,i.d=function(s,r,a){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:a})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var l in s)i.d(a,l,(function(c){return s[c]}).bind(null,l));return a},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="/",i(i.s=0)}([function(o,n,i){i(1),o.exports=function(){var s=i(6),r="cdx-notify--bounce-in",a=null;return{show:function(l){if(l.message){(function(){if(a)return!0;a=s.getWrapper(),document.body.appendChild(a)})();var c=null,d=l.time||8e3;switch(l.type){case"confirm":c=s.confirm(l);break;case"prompt":c=s.prompt(l);break;default:c=s.alert(l),window.setTimeout(function(){c.remove()},d)}a.appendChild(c),c.classList.add(r)}}}}()},function(o,n,i){var s=i(2);typeof s=="string"&&(s=[[o.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(4)(s,r),s.locals&&(o.exports=s.locals)},function(o,n,i){(o.exports=i(3)(!1)).push([o.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(o,n){o.exports=function(i){var s=[];return s.toString=function(){return this.map(function(r){var a=function(l,c){var d=l[1]||"",u=l[3];if(!u)return d;if(c&&typeof btoa=="function"){var h=(f=u,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(f))))+" */"),p=u.sources.map(function(T){return"/*# sourceURL="+u.sourceRoot+T+" */"});return[d].concat(p).concat([h]).join(`
`)}var f;return[d].join(`
`)}(r,i);return r[2]?"@media "+r[2]+"{"+a+"}":a}).join("")},s.i=function(r,a){typeof r=="string"&&(r=[[null,r,""]]);for(var l={},c=0;c<this.length;c++){var d=this[c][0];typeof d=="number"&&(l[d]=!0)}for(c=0;c<r.length;c++){var u=r[c];typeof u[0]=="number"&&l[u[0]]||(a&&!u[2]?u[2]=a:a&&(u[2]="("+u[2]+") and ("+a+")"),s.push(u))}},s}},function(o,n,i){var s,r,a={},l=(s=function(){return window&&document&&document.all&&!window.atob},function(){return r===void 0&&(r=s.apply(this,arguments)),r}),c=function(v){var b={};return function(C){if(typeof C=="function")return C();if(b[C]===void 0){var S=(function(L){return document.querySelector(L)}).call(this,C);if(window.HTMLIFrameElement&&S instanceof window.HTMLIFrameElement)try{S=S.contentDocument.head}catch{S=null}b[C]=S}return b[C]}}(),d=null,u=0,h=[],p=i(5);function f(v,b){for(var C=0;C<v.length;C++){var S=v[C],L=a[S.id];if(L){L.refs++;for(var A=0;A<L.parts.length;A++)L.parts[A](S.parts[A]);for(;A<S.parts.length;A++)L.parts.push(y(S.parts[A],b))}else{var $=[];for(A=0;A<S.parts.length;A++)$.push(y(S.parts[A],b));a[S.id]={id:S.id,refs:1,parts:$}}}}function T(v,b){for(var C=[],S={},L=0;L<v.length;L++){var A=v[L],$=b.base?A[0]+b.base:A[0],R={css:A[1],media:A[2],sourceMap:A[3]};S[$]?S[$].parts.push(R):C.push(S[$]={id:$,parts:[R]})}return C}function m(v,b){var C=c(v.insertInto);if(!C)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var S=h[h.length-1];if(v.insertAt==="top")S?S.nextSibling?C.insertBefore(b,S.nextSibling):C.appendChild(b):C.insertBefore(b,C.firstChild),h.push(b);else if(v.insertAt==="bottom")C.appendChild(b);else{if(typeof v.insertAt!="object"||!v.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var L=c(v.insertInto+" "+v.insertAt.before);C.insertBefore(b,L)}}function x(v){if(v.parentNode===null)return!1;v.parentNode.removeChild(v);var b=h.indexOf(v);b>=0&&h.splice(b,1)}function E(v){var b=document.createElement("style");return v.attrs.type===void 0&&(v.attrs.type="text/css"),w(b,v.attrs),m(v,b),b}function w(v,b){Object.keys(b).forEach(function(C){v.setAttribute(C,b[C])})}function y(v,b){var C,S,L,A;if(b.transform&&v.css){if(!(A=b.transform(v.css)))return function(){};v.css=A}if(b.singleton){var $=u++;C=d||(d=E(b)),S=O.bind(null,C,$,!1),L=O.bind(null,C,$,!0)}else v.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(C=function(R){var q=document.createElement("link");return R.attrs.type===void 0&&(R.attrs.type="text/css"),R.attrs.rel="stylesheet",w(q,R.attrs),m(R,q),q}(b),S=(function(R,q,ee){var G=ee.css,Ce=ee.sourceMap,$e=q.convertToAbsoluteUrls===void 0&&Ce;(q.convertToAbsoluteUrls||$e)&&(G=p(G)),Ce&&(G+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(Ce))))+" */");var Le=new Blob([G],{type:"text/css"}),Se=R.href;R.href=URL.createObjectURL(Le),Se&&URL.revokeObjectURL(Se)}).bind(null,C,b),L=function(){x(C),C.href&&URL.revokeObjectURL(C.href)}):(C=E(b),S=(function(R,q){var ee=q.css,G=q.media;if(G&&R.setAttribute("media",G),R.styleSheet)R.styleSheet.cssText=ee;else{for(;R.firstChild;)R.removeChild(R.firstChild);R.appendChild(document.createTextNode(ee))}}).bind(null,C),L=function(){x(C)});return S(v),function(R){if(R){if(R.css===v.css&&R.media===v.media&&R.sourceMap===v.sourceMap)return;S(v=R)}else L()}}o.exports=function(v,b){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(b=b||{}).attrs=typeof b.attrs=="object"?b.attrs:{},b.singleton||typeof b.singleton=="boolean"||(b.singleton=l()),b.insertInto||(b.insertInto="head"),b.insertAt||(b.insertAt="bottom");var C=T(v,b);return f(C,b),function(S){for(var L=[],A=0;A<C.length;A++){var $=C[A];(R=a[$.id]).refs--,L.push(R)}for(S&&f(T(S,b),b),A=0;A<L.length;A++){var R;if((R=L[A]).refs===0){for(var q=0;q<R.parts.length;q++)R.parts[q]();delete a[R.id]}}}};var B,I=(B=[],function(v,b){return B[v]=b,B.filter(Boolean).join(`
`)});function O(v,b,C,S){var L=C?"":S.css;if(v.styleSheet)v.styleSheet.cssText=I(b,L);else{var A=document.createTextNode(L),$=v.childNodes;$[b]&&v.removeChild($[b]),$.length?v.insertBefore(A,$[b]):v.appendChild(A)}}},function(o,n){o.exports=function(i){var s=typeof window<"u"&&window.location;if(!s)throw new Error("fixUrls requires window.location");if(!i||typeof i!="string")return i;var r=s.protocol+"//"+s.host,a=r+s.pathname.replace(/\/[^\/]*$/,"/");return i.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(l,c){var d,u=c.trim().replace(/^"(.*)"$/,function(h,p){return p}).replace(/^'(.*)'$/,function(h,p){return p});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(u)?l:(d=u.indexOf("//")===0?u:u.indexOf("/")===0?r+u:a+u.replace(/^\.\//,""),"url("+JSON.stringify(d)+")")})}},function(o,n,i){var s,r,a,l,c,d,u,h,p;o.exports=(s="cdx-notifies",r="cdx-notify",a="cdx-notify__cross",l="cdx-notify__button--confirm",c="cdx-notify__button--cancel",d="cdx-notify__input",u="cdx-notify__button",h="cdx-notify__btns-wrapper",{alert:p=function(f){var T=document.createElement("DIV"),m=document.createElement("DIV"),x=f.message,E=f.style;return T.classList.add(r),E&&T.classList.add(r+"--"+E),T.innerHTML=x,m.classList.add(a),m.addEventListener("click",T.remove.bind(T)),T.appendChild(m),T},confirm:function(f){var T=p(f),m=document.createElement("div"),x=document.createElement("button"),E=document.createElement("button"),w=T.querySelector("."+a),y=f.cancelHandler,B=f.okHandler;return m.classList.add(h),x.innerHTML=f.okText||"Confirm",E.innerHTML=f.cancelText||"Cancel",x.classList.add(u),E.classList.add(u),x.classList.add(l),E.classList.add(c),y&&typeof y=="function"&&(E.addEventListener("click",y),w.addEventListener("click",y)),B&&typeof B=="function"&&x.addEventListener("click",B),x.addEventListener("click",T.remove.bind(T)),E.addEventListener("click",T.remove.bind(T)),m.appendChild(x),m.appendChild(E),T.appendChild(m),T},prompt:function(f){var T=p(f),m=document.createElement("div"),x=document.createElement("button"),E=document.createElement("input"),w=T.querySelector("."+a),y=f.cancelHandler,B=f.okHandler;return m.classList.add(h),x.innerHTML=f.okText||"Ok",x.classList.add(u),x.classList.add(l),E.classList.add(d),f.placeholder&&E.setAttribute("placeholder",f.placeholder),f.default&&(E.value=f.default),f.inputType&&(E.type=f.inputType),y&&typeof y=="function"&&w.addEventListener("click",y),B&&typeof B=="function"&&x.addEventListener("click",function(){B(E.value)}),x.addEventListener("click",T.remove.bind(T)),m.appendChild(E),m.appendChild(x),T.appendChild(m),T},getWrapper:function(){var f=document.createElement("DIV");return f.classList.add(s),f}})}])})})(Ch);const Sh=ii(Hi);class Th{show(e){Sh.show(e)}}class Bh extends re{constructor({config:e,eventsDispatcher:o}){super({config:e,eventsDispatcher:o}),this.notifier=new Th}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}}class _h extends re{get methods(){const e=()=>this.isEnabled;return{toggle:o=>this.toggle(o),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var ji={},Ih={get exports(){return ji},set exports(t){ji=t}};(function(t,e){(function(o,n){t.exports=n()})(Zu,function(){function o(u){var h=u.tags,p=Object.keys(h),f=p.map(function(T){return typeof h[T]}).every(function(T){return T==="object"||T==="boolean"||T==="function"});if(!f)throw new Error("The configuration was invalid");this.config=u}var n=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function i(u){return n.indexOf(u.nodeName)!==-1}var s=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function r(u){return s.indexOf(u.nodeName)!==-1}o.prototype.clean=function(u){const h=document.implementation.createHTMLDocument(),p=h.createElement("div");return p.innerHTML=u,this._sanitize(h,p),p.innerHTML},o.prototype._sanitize=function(u,h){var p=a(u,h),f=p.firstChild();if(f)do{if(f.nodeType===Node.TEXT_NODE)if(f.data.trim()===""&&(f.previousElementSibling&&i(f.previousElementSibling)||f.nextElementSibling&&i(f.nextElementSibling))){h.removeChild(f),this._sanitize(u,h);break}else continue;if(f.nodeType===Node.COMMENT_NODE){h.removeChild(f),this._sanitize(u,h);break}var T=r(f),m;T&&(m=Array.prototype.some.call(f.childNodes,i));var x=!!h.parentNode,E=i(h)&&i(f)&&x,w=f.nodeName.toLowerCase(),y=l(this.config,w,f),B=T&&m;if(B||c(f,y)||!this.config.keepNestedBlockElements&&E){if(!(f.nodeName==="SCRIPT"||f.nodeName==="STYLE"))for(;f.childNodes.length>0;)h.insertBefore(f.childNodes[0],f);h.removeChild(f),this._sanitize(u,h);break}for(var I=0;I<f.attributes.length;I+=1){var O=f.attributes[I];d(O,y,f)&&(f.removeAttribute(O.name),I=I-1)}this._sanitize(u,f)}while(f=p.nextSibling())};function a(u,h){return u.createTreeWalker(h,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function l(u,h,p){return typeof u.tags[h]=="function"?u.tags[h](p):u.tags[h]}function c(u,h){return typeof h>"u"?!0:typeof h=="boolean"?!h:!1}function d(u,h,p){var f=u.name.toLowerCase();return h===!0?!1:typeof h[f]=="function"?!h[f](u.value,p):typeof h[f]>"u"||h[f]===!1?!0:typeof h[f]=="string"?h[f]!==u.value:!1}return o})})(Ih);const Mh=ji;function Va(t,e){return t.map(o=>{const n=ve(e)?e(o.tool):e;return ft(n)||(o.data=ys(o.data,n)),o})}function It(t,e={}){const o={tags:e};return new Mh(o).clean(t)}function ys(t,e){return Array.isArray(t)?Ah(t,e):Pe(t)?Oh(t,e):Kt(t)?Lh(t,e):t}function Ah(t,e){return t.map(o=>ys(o,e))}function Oh(t,e){const o={};for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const i=t[n],s=Rh(e[n])?e[n]:e;o[n]=ys(i,s)}return o}function Lh(t,e){return Pe(e)?It(t,e):e===!1?It(t,{}):t}function Rh(t){return Pe(t)||eh(t)||ve(t)}class Nh extends re{get methods(){return{clean:(e,o)=>this.clean(e,o)}}clean(e,o){return It(e,o)}}class Ph extends re{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(lt(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}}class Dh extends re{get methods(){return{findParentTag:(e,o)=>this.findParentTag(e,o),expandToTag:e=>this.expandToTag(e)}}findParentTag(e,o){return new X().findParentTag(e,o)}expandToTag(e){new X().expandToTag(e)}}class Fh extends re{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class Hh extends re{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(this.Editor.BlockManager.currentBlockIndex===-1){lt("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(this.Editor.BlockManager.currentBlockIndex===-1){lt("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var $i={},jh={get exports(){return $i},set exports(t){$i=t}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(t,e){(function(o,n){t.exports=n()})(window,function(){return function(o){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return o[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=o,i.c=n,i.d=function(s,r,a){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:a})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var l in s)i.d(a,l,(function(c){return s[c]}).bind(null,l));return a},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="",i(i.s=0)}([function(o,n,i){o.exports=i(1)},function(o,n,i){i.r(n),i.d(n,"default",function(){return s});class s{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(a,l,c){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const d=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},c);if(d.hidingDelay&&(this.hidingDelay=d.hidingDelay),this.nodes.content.innerHTML="",typeof l=="string")this.nodes.content.appendChild(document.createTextNode(l));else{if(!(l instanceof Node))throw Error("[CodeX Tooltip] Wrong type of content passed. It should be an instance of Node or String. But "+typeof l+" given.");this.nodes.content.appendChild(l)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),d.placement){case"top":this.placeTop(a,d);break;case"left":this.placeLeft(a,d);break;case"right":this.placeRight(a,d);break;case"bottom":default:this.placeBottom(a,d)}d&&d.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},d.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(a=!1){if(this.hidingDelay&&!a)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(a,l,c){a.addEventListener("mouseenter",()=>{this.show(a,l,c)}),a.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const a="codex-tooltips-style";if(document.getElementById(a))return;const l=i(2),c=this.make("style",null,{textContent:l.toString(),id:a});this.prepend(document.head,c)}placeBottom(a,l){const c=a.getBoundingClientRect(),d=c.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,u=c.bottom+window.pageYOffset+this.offsetTop+l.marginTop;this.applyPlacement("bottom",d,u)}placeTop(a,l){const c=a.getBoundingClientRect(),d=c.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,u=c.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",d,u)}placeLeft(a,l){const c=a.getBoundingClientRect(),d=c.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-l.marginLeft,u=c.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",d,u)}placeRight(a,l){const c=a.getBoundingClientRect(),d=c.right+this.offsetRight+l.marginRight,u=c.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",d,u)}applyPlacement(a,l,c){this.nodes.wrapper.classList.add(this.CSS.placement[a]),this.nodes.wrapper.style.left=l+"px",this.nodes.wrapper.style.top=c+"px"}make(a,l=null,c={}){const d=document.createElement(a);Array.isArray(l)?d.classList.add(...l):l&&d.classList.add(l);for(const u in c)c.hasOwnProperty(u)&&(d[u]=c[u]);return d}append(a,l){Array.isArray(l)?l.forEach(c=>a.appendChild(c)):a.appendChild(l)}prepend(a,l){Array.isArray(l)?(l=l.reverse()).forEach(c=>a.prepend(c)):a.prepend(l)}}},function(o,n){o.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(jh);const $h=ii($i);class ws{constructor(){this.lib=new $h}destroy(){this.lib.destroy()}show(e,o,n){this.lib.show(e,o,n)}hide(e=!1){this.lib.hide(e)}onHover(e,o,n){this.lib.onHover(e,o,n)}}class Uh extends re{constructor({config:e,eventsDispatcher:o}){super({config:e,eventsDispatcher:o}),this.tooltip=new ws}destroy(){this.tooltip.destroy()}get methods(){return{show:(e,o,n)=>this.show(e,o,n),hide:()=>this.hide(),onHover:(e,o,n)=>this.onHover(e,o,n)}}show(e,o,n){this.tooltip.show(e,o,n)}hide(){this.tooltip.hide()}onHover(e,o,n){this.tooltip.onHover(e,o,n)}}class zh extends re{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function Xa(t,e){const o={};return Object.entries(t).forEach(([n,i])=>{if(Pe(i)){const s=e?`${e}.${n}`:n;Object.values(i).every(r=>Kt(r))?o[n]=s:o[n]=Xa(i,s);return}o[n]=i}),o}const ct=Xa(za);function Wh(t,e){const o={};return Object.keys(t).forEach(n=>{const i=e[n];i!==void 0?o[i]=t[n]:o[n]=t[n]}),o}const Kh='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',Za='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',qh='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',Yh='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',Vh='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',Xh='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',br='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',Zh='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',Gh='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',Jh='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Qh='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',ef='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>';class Ee{constructor(e){this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{this.nodes.root.classList.remove(Ee.CSS.noFocus)},this.removeSpecialHoverBehavior=()=>{this.nodes.root.classList.remove(Ee.CSS.noHover)},this.onErrorAnimationEnd=()=>{this.nodes.icon.classList.remove(Ee.CSS.wobbleAnimation),this.nodes.icon.removeEventListener("animationend",this.onErrorAnimationEnd)},this.params=e,this.nodes.root=this.make(e)}get isDisabled(){return this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get closeOnActivate(){return this.params.closeOnActivate}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root.classList.contains(Ee.CSS.focused)}static get CSS(){return{container:"ce-popover-item",title:"ce-popover-item__title",secondaryTitle:"ce-popover-item__secondary-title",icon:"ce-popover-item__icon",active:"ce-popover-item--active",disabled:"ce-popover-item--disabled",focused:"ce-popover-item--focused",hidden:"ce-popover-item--hidden",confirmationState:"ce-popover-item--confirmation",noHover:"ce-popover-item--no-hover",noFocus:"ce-popover-item--no-focus",wobbleAnimation:"wobble"}}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){this.nodes.root.classList.toggle(Ee.CSS.active,e)}toggleHidden(e){this.nodes.root.classList.toggle(Ee.CSS.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e){const o=M.make("div",Ee.CSS.container);return e.name&&(o.dataset.itemName=e.name),this.nodes.icon=M.make("div",Ee.CSS.icon,{innerHTML:e.icon||Vh}),o.appendChild(this.nodes.icon),o.appendChild(M.make("div",Ee.CSS.title,{innerHTML:e.title||""})),e.secondaryLabel&&o.appendChild(M.make("div",Ee.CSS.secondaryTitle,{textContent:e.secondaryLabel})),e.isActive&&o.classList.add(Ee.CSS.active),e.isDisabled&&o.classList.add(Ee.CSS.disabled),o}enableConfirmationMode(e){const o={...this.params,...e,confirmation:e.confirmation},n=this.make(o);this.nodes.root.innerHTML=n.innerHTML,this.nodes.root.classList.add(Ee.CSS.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(Ee.CSS.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){this.nodes.root.classList.add(Ee.CSS.noHover),this.nodes.root.classList.add(Ee.CSS.noFocus),this.nodes.root.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.nodes.root.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){if(e.confirmation===void 0)try{e.onActivate(e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){this.nodes.icon.classList.contains(Ee.CSS.wobbleAnimation)||(this.nodes.icon.classList.add(Ee.CSS.wobbleAnimation),this.nodes.icon.addEventListener("animationend",this.onErrorAnimationEnd))}}const zo=class{constructor(t,e){this.cursor=-1,this.items=[],this.items=t||[],this.focusedCssClass=e}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(t){t<this.items.length&&t>=-1&&(this.dropCursor(),this.cursor=t,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(t){this.items=t}next(){this.cursor=this.leafNodesAndReturnIndex(zo.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(zo.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(t){if(this.items.length===0)return this.cursor;let e=this.cursor;return e===-1?e=t===zo.directions.RIGHT?-1:0:this.items[e].classList.remove(this.focusedCssClass),t===zo.directions.RIGHT?e=(e+1)%this.items.length:e=(this.items.length+e-1)%this.items.length,M.canSetCaret(this.items[e])&&Bo(()=>X.setCursor(this.items[e]),50)(),this.items[e].classList.add(this.focusedCssClass),e}};let lo=zo;lo.directions={RIGHT:"right",LEFT:"left"};class Ot{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=o=>{if(this.isEventReadyForHandling(o))switch(Ot.usedKeys.includes(o.keyCode)&&o.preventDefault(),o.keyCode){case te.TAB:this.handleTabPress(o);break;case te.LEFT:case te.UP:this.flipLeft();break;case te.RIGHT:case te.DOWN:this.flipRight();break;case te.ENTER:this.handleEnterPress(o);break}},this.iterator=new lo(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||Ot.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[te.TAB,te.LEFT,te.RIGHT,te.ENTER,te.UP,te.DOWN]}activate(e,o){this.activated=!0,e&&this.iterator.setItems(e),o!==void 0&&this.iterator.setCursor(o),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(o=>o!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?lo.directions.LEFT:lo.directions.RIGHT){case lo.directions.RIGHT:this.flipRight();break;case lo.directions.LEFT:this.flipLeft();break}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),ve(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}}class Vo{static get CSS(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}constructor({items:e,onSearch:o,placeholder:n}){this.listeners=new vs,this.items=e,this.onSearch=o,this.render(n)}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.onSearch("",this.foundItems)}destroy(){this.listeners.removeAll()}render(e){this.wrapper=M.make("div",Vo.CSS.wrapper);const o=M.make("div",Vo.CSS.icon,{innerHTML:Jh});this.input=M.make("input",Vo.CSS.input,{placeholder:e}),this.wrapper.appendChild(o),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.onSearch(this.searchQuery,this.foundItems)})}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var o;const n=((o=e.title)==null?void 0:o.toLowerCase())||"",i=this.searchQuery.toLowerCase();return n.includes(i)}}const Wo=class{lock(){gr?this.lockHard():document.body.classList.add(Wo.CSS.scrollLocked)}unlock(){gr?this.unlockHard():document.body.classList.remove(Wo.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(Wo.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(Wo.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};let Ga=Wo;Ga.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};var tf=Object.defineProperty,of=Object.getOwnPropertyDescriptor,nf=(t,e,o,n)=>{for(var i=n>1?void 0:n?of(e,o):e,s=t.length-1,r;s>=0;s--)(r=t[s])&&(i=(n?r(e,o,i):r(i))||i);return n&&i&&tf(e,o,i),i},sn=(t=>(t.Close="close",t))(sn||{});const Re=class extends si{constructor(t){super(),this.scopeElement=document.body,this.listeners=new vs,this.scrollLocker=new Ga,this.nodes={wrapper:null,popover:null,nothingFoundMessage:null,customContent:null,items:null,overlay:null},this.messages={nothingFound:"Nothing found",search:"Search"},this.onFlip=()=>{this.items.find(e=>e.isFocused).onFocus()},this.items=t.items.map(e=>new Ee(e)),t.scopeElement!==void 0&&(this.scopeElement=t.scopeElement),t.messages&&(this.messages={...this.messages,...t.messages}),t.customContentFlippableItems&&(this.customContentFlippableItems=t.customContentFlippableItems),this.make(),t.customContent&&this.addCustomContent(t.customContent),t.searchable&&this.addSearch(),this.initializeFlipper()}static get CSS(){return{popover:"ce-popover",popoverOpenTop:"ce-popover--open-top",popoverOpened:"ce-popover--opened",search:"ce-popover__search",nothingFoundMessage:"ce-popover__nothing-found-message",nothingFoundMessageDisplayed:"ce-popover__nothing-found-message--displayed",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden",items:"ce-popover__items",overlay:"ce-popover__overlay",overlayHidden:"ce-popover__overlay--hidden"}}getElement(){return this.nodes.wrapper}hasFocus(){return this.flipper.hasFocus()}show(){this.shouldOpenBottom||(this.nodes.popover.style.setProperty("--popover-height",this.height+"px"),this.nodes.popover.classList.add(Re.CSS.popoverOpenTop)),this.nodes.overlay.classList.remove(Re.CSS.overlayHidden),this.nodes.popover.classList.add(Re.CSS.popoverOpened),this.flipper.activate(this.flippableElements),this.search!==void 0&&setTimeout(()=>{this.search.focus()},100),eo()&&this.scrollLocker.lock()}hide(){this.nodes.popover.classList.remove(Re.CSS.popoverOpened),this.nodes.popover.classList.remove(Re.CSS.popoverOpenTop),this.nodes.overlay.classList.add(Re.CSS.overlayHidden),this.flipper.deactivate(),this.items.forEach(t=>t.reset()),this.search!==void 0&&this.search.clear(),eo()&&this.scrollLocker.unlock(),this.emit("close")}destroy(){this.flipper.deactivate(),this.listeners.removeAll(),eo()&&this.scrollLocker.unlock()}make(){this.nodes.popover=M.make("div",[Re.CSS.popover]),this.nodes.nothingFoundMessage=M.make("div",[Re.CSS.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popover.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=M.make("div",[Re.CSS.items]),this.items.forEach(t=>{this.nodes.items.appendChild(t.getElement())}),this.nodes.popover.appendChild(this.nodes.items),this.listeners.on(this.nodes.popover,"click",t=>{const e=this.getTargetItem(t);e!==void 0&&this.handleItemClick(e)}),this.nodes.wrapper=M.make("div"),this.nodes.overlay=M.make("div",[Re.CSS.overlay,Re.CSS.overlayHidden]),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.nodes.wrapper.appendChild(this.nodes.overlay),this.nodes.wrapper.appendChild(this.nodes.popover)}addSearch(){this.search=new Vo({items:this.items,placeholder:this.messages.search,onSearch:(e,o)=>{this.items.forEach(i=>{const s=!o.includes(i);i.toggleHidden(s)}),this.toggleNothingFoundMessage(o.length===0),this.toggleCustomContent(e!=="");const n=e===""?this.flippableElements:o.map(i=>i.getElement());this.flipper.isActivated&&(this.flipper.deactivate(),this.flipper.activate(n))}});const t=this.search.getElement();t.classList.add(Re.CSS.search),this.nodes.popover.insertBefore(t,this.nodes.popover.firstChild)}addCustomContent(t){this.nodes.customContent=t,this.nodes.customContent.classList.add(Re.CSS.customContent),this.nodes.popover.insertBefore(t,this.nodes.popover.firstChild)}getTargetItem(t){return this.items.find(e=>t.composedPath().includes(e.getElement()))}handleItemClick(t){t.isDisabled||(this.items.filter(e=>e!==t).forEach(e=>e.reset()),t.handleClick(),this.toggleItemActivenessIfNeeded(t),t.closeOnActivate&&this.hide())}initializeFlipper(){this.flipper=new Ot({items:this.flippableElements,focusedItemClass:Ee.CSS.focused,allowedKeys:[te.TAB,te.UP,te.DOWN,te.ENTER]}),this.flipper.onFlip(this.onFlip)}get flippableElements(){const t=this.items.map(e=>e.getElement());return(this.customContentFlippableItems||[]).concat(t)}get height(){let t=0;if(this.nodes.popover===null)return t;const e=this.nodes.popover.cloneNode(!0);return e.style.visibility="hidden",e.style.position="absolute",e.style.top="-1000px",e.classList.add(Re.CSS.popoverOpened),document.body.appendChild(e),t=e.offsetHeight,e.remove(),t}get shouldOpenBottom(){const t=this.nodes.popover.getBoundingClientRect(),e=this.scopeElement.getBoundingClientRect(),o=this.height,n=t.top+o,i=t.top-o,s=Math.min(window.innerHeight,e.bottom);return i<e.top||n<=s}toggleNothingFoundMessage(t){this.nodes.nothingFoundMessage.classList.toggle(Re.CSS.nothingFoundMessageDisplayed,t)}toggleCustomContent(t){var e;(e=this.nodes.customContent)==null||e.classList.toggle(Re.CSS.customContentHidden,t)}toggleItemActivenessIfNeeded(t){if(t.toggle===!0&&t.toggleActive(),typeof t.toggle=="string"){const e=this.items.filter(o=>o.toggle===t.toggle);if(e.length===1){t.toggleActive();return}e.forEach(o=>{o.toggleActive(o===t)})}}};let xs=Re;nf([No],xs.prototype,"height",1);class sf extends re{constructor(){super(...arguments),this.opened=!1,this.selection=new X,this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;return(e=this.popover)==null?void 0:e.flipper}make(){this.nodes.wrapper=M.make("div",[this.CSS.settings])}destroy(){this.removeAllNodes()}open(e=this.Editor.BlockManager.currentBlock){this.opened=!0,this.selection.save(),e.selected=!0,this.Editor.BlockSelection.clearCache();const[o,n]=e.getTunes();this.eventsDispatcher.emit(this.events.opened),this.popover=new xs({searchable:!0,items:o.map(i=>this.resolveTuneAliases(i)),customContent:n,customContentFlippableItems:this.getControls(n),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Ke.ui(ct.ui.popover,"Nothing found"),search:Ke.ui(ct.ui.popover,"Filter")}}),this.popover.on(sn.Close,this.onPopoverClose),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}close(){this.opened=!1,X.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&(this.Editor.BlockManager.currentBlock.selected=!1),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(sn.Close,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null)}getControls(e){const{StylesAPI:o}=this.Editor,n=e.querySelectorAll(`.${o.classes.settingsButton}, ${M.allInputsSelector}`);return Array.from(n)}resolveTuneAliases(e){const o=Wh(e,{label:"title"});return e.confirmation&&(o.confirmation=this.resolveTuneAliases(e.confirmation)),o}}class Xe extends re{constructor(){super(...arguments),this.opened=!1,this.tools=[],this.flipper=null,this.togglingCallback=null}static get CSS(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolSecondaryLabel:"ce-conversion-tool__secondary-label",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}make(){this.nodes.wrapper=M.make("div",[Xe.CSS.conversionToolbarWrapper,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.tools=M.make("div",Xe.CSS.conversionToolbarTools);const e=M.make("div",Xe.CSS.conversionToolbarLabel,{textContent:Ke.ui(ct.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),M.append(this.nodes.wrapper,e),M.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}toggle(e){this.opened?this.close():this.open(),ve(e)&&(this.togglingCallback=e)}open(){this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(Xe.CSS.conversionToolbarShowed),window.requestAnimationFrame(()=>{this.flipper.activate(this.tools.map(e=>e.button).filter(e=>!e.classList.contains(Xe.CSS.conversionToolHidden))),this.flipper.focusFirst(),ve(this.togglingCallback)&&this.togglingCallback(!0)})}close(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(Xe.CSS.conversionToolbarShowed),ve(this.togglingCallback)&&this.togglingCallback(!1)}hasTools(){return this.tools.length===1?this.tools[0].name!==this.config.defaultBlock:!0}async replaceWithBlock(e,o){const{BlockManager:n,BlockSelection:i,InlineToolbar:s,Caret:r}=this.Editor;n.convert(this.Editor.BlockManager.currentBlock,e,o),i.clearSelection(),this.close(),s.close(),window.requestAnimationFrame(()=>{r.setToBlock(this.Editor.BlockManager.currentBlock,r.positions.END)})}addTools(){const e=this.Editor.Tools.blockTools;Array.from(e.entries()).forEach(([o,n])=>{var i;const s=n.conversionConfig;!s||!s.import||(i=n.toolbox)==null||i.forEach(r=>this.addToolIfValid(o,r))})}addToolIfValid(e,o){ft(o)||!o.icon||this.addTool(e,o)}addTool(e,o){var n;const i=M.make("div",[Xe.CSS.conversionTool]),s=M.make("div",[Xe.CSS.conversionToolIcon]);i.dataset.tool=e,s.innerHTML=o.icon,M.append(i,s),M.append(i,M.text(Ke.t(ct.toolNames,o.title||_o(e))));const r=(n=this.Editor.Tools.blockTools.get(e))==null?void 0:n.shortcut;if(r){const a=M.make("span",Xe.CSS.conversionToolSecondaryLabel,{innerText:bs(r)});M.append(i,a)}M.append(this.nodes.tools,i),this.tools.push({name:e,button:i,toolboxItem:o}),this.listeners.on(i,"click",async()=>{await this.replaceWithBlock(e,o.data)})}async filterTools(){const{currentBlock:e}=this.Editor.BlockManager,o=await e.getActiveToolboxEntry();function n(i,s){return i.icon===s.icon&&i.title===s.title}this.tools.forEach(i=>{let s=!1;if(o){const r=n(o,i.toolboxItem);s=i.button.dataset.tool===e.name&&r}i.button.hidden=s,i.button.classList.toggle(Xe.CSS.conversionToolHidden,s)})}enableFlipper(){this.flipper=new Ot({focusedItemClass:Xe.CSS.conversionToolFocused})}}var Ui={},rf={get exports(){return Ui},set exports(t){Ui=t}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(t,e){(function(o,n){t.exports=n()})(window,function(){return function(o){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return o[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=o,i.c=n,i.d=function(s,r,a){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:a})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var l in s)i.d(a,l,(function(c){return s[c]}).bind(null,l));return a},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="",i(i.s=0)}([function(o,n,i){function s(l,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}function r(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}i.r(n);var a=function(){function l(c){var d=this;(function(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")})(this,l),this.commands={},this.keys={},this.name=c.name,this.parseShortcutName(c.name),this.element=c.on,this.callback=c.callback,this.executeShortcut=function(u){d.execute(u)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return r(l,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),r(l,[{key:"parseShortcutName",value:function(c){c=c.split("+");for(var d=0;d<c.length;d++){c[d]=c[d].toUpperCase();var u=!1;for(var h in l.supportedCommands)if(l.supportedCommands[h].includes(c[d])){u=this.commands[h]=!0;break}u||(this.keys[c[d]]=!0)}for(var p in l.supportedCommands)this.commands[p]||(this.commands[p]=!1)}},{key:"execute",value:function(c){var d,u={CMD:c.ctrlKey||c.metaKey,SHIFT:c.shiftKey,ALT:c.altKey},h=!0;for(d in this.commands)this.commands[d]!==u[d]&&(h=!1);var p,f=!0;for(p in this.keys)f=f&&c.keyCode===l.keyCodes[p];h&&f&&this.callback(c)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),l}();n.default=a}]).default})})(rf);const af=ii(Ui);class lf{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const o=new af({name:e.name,on:e.on,callback:e.handler}),n=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...n,o])}remove(e,o){const n=this.findShortcut(e,o);if(!n)return;n.remove();const i=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,i.filter(s=>s!==n))}findShortcut(e,o){return(this.registeredShortcuts.get(e)||[]).find(({name:n})=>n===o)}}const Io=new lf;var cf=Object.defineProperty,df=Object.getOwnPropertyDescriptor,Ja=(t,e,o,n)=>{for(var i=n>1?void 0:n?df(e,o):e,s=t.length-1,r;s>=0;s--)(r=t[s])&&(i=(n?r(e,o,i):r(i))||i);return n&&i&&cf(e,o,i),i},An=(t=>(t.Opened="toolbox-opened",t.Closed="toolbox-closed",t.BlockAdded="toolbox-block-added",t))(An||{});const Qa=class extends si{constructor({api:t,tools:e,i18nLabels:o}){super(),this.opened=!1,this.nodes={toolbox:null},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=t,this.tools=e,this.i18nLabels=o}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}make(){return this.popover=new xs({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(sn.Close,this.onPopoverClose),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox.classList.add(Qa.CSS.toolbox),this.nodes.toolbox}hasFocus(){var t;return(t=this.popover)==null?void 0:t.hasFocus()}destroy(){var t;super.destroy(),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),(t=this.popover)==null||t.off(sn.Close,this.onPopoverClose)}toolButtonActivated(t,e){this.insertNewBlock(t,e)}open(){var t;this.isEmpty||((t=this.popover)==null||t.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var t;(t=this.popover)==null||t.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}get toolsToBeDisplayed(){const t=[];return this.tools.forEach(e=>{e.toolbox&&t.push(e)}),t}get toolboxItemsToBeDisplayed(){const t=(e,o)=>({icon:e.icon,title:Ke.t(ct.toolNames,e.title||_o(o.name)),name:o.name,onActivate:()=>{this.toolButtonActivated(o.name,e.data)},secondaryLabel:o.shortcut?bs(o.shortcut):""});return this.toolsToBeDisplayed.reduce((e,o)=>(Array.isArray(o.toolbox)?o.toolbox.forEach(n=>{e.push(t(n,o))}):o.toolbox!==void 0&&e.push(t(o.toolbox,o)),e),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(t=>{const e=t.shortcut;e&&this.enableShortcutForTool(t.name,e)})}enableShortcutForTool(t,e){Io.add({name:e,on:this.api.ui.nodes.redactor,handler:o=>{o.preventDefault();const n=this.api.blocks.getCurrentBlockIndex(),i=this.api.blocks.getBlockByIndex(n);if(i)try{this.api.blocks.convert(i.id,t),window.requestAnimationFrame(()=>{this.api.caret.setToBlock(n,"end")});return}catch{}this.insertNewBlock(t)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(t=>{const e=t.shortcut;e&&Io.remove(this.api.ui.nodes.redactor,e)})}async insertNewBlock(t,e){const o=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(o);if(!n)return;const i=n.isEmpty?o:o+1;let s;if(e){const a=await this.api.blocks.composeBlockData(t);s=Object.assign(a,e)}const r=this.api.blocks.insert(t,s,void 0,i,void 0,n.isEmpty);r.call(Bt.APPEND_CALLBACK),this.api.caret.setToBlock(i),this.emit("toolbox-block-added",{block:r}),this.api.toolbar.close()}};let Es=Qa;Ja([No],Es.prototype,"toolsToBeDisplayed",1);Ja([No],Es.prototype,"toolboxItemsToBeDisplayed",1);const el="block hovered";class uf extends re{constructor({config:e,eventsDispatcher:o}){super({config:e,eventsDispatcher:o}),this.toolboxInstance=null,this.tooltip=new ws}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:(e=this.toolboxInstance)==null?void 0:e.opened,close:()=>{var o;(o=this.toolboxInstance)==null||o.close()},open:()=>{if(this.toolboxInstance===null){de("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){de("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var o;return(o=this.toolboxInstance)==null?void 0:o.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){de("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const o=e.holder,{isMobile:n}=this.Editor.UI,i=e.pluginsContent,s=window.getComputedStyle(i),r=parseInt(s.paddingTop,10),a=o.offsetHeight;let l;n?l=o.offsetTop+a:l=o.offsetTop+r,this.nodes.wrapper.style.top=`${Math.floor(l)}px`,this.Editor.BlockManager.blocks.length===1&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e;this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(e=this.toolboxInstance)==null||e.close(),this.Editor.BlockSettings.close())}open(e=!0){Bo(()=>{this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()},50)()}make(){this.nodes.wrapper=M.make("div",this.CSS.toolbar),["content","actions"].forEach(o=>{this.nodes[o]=M.make("div",this.CSS[o])}),M.append(this.nodes.wrapper,this.nodes.content),M.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=M.make("div",this.CSS.plusButton,{innerHTML:Gh}),M.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{this.tooltip.hide(!0),this.plusButtonClicked()},!1);const e=M.make("div");e.appendChild(document.createTextNode(Ke.ui(ct.ui.toolbar.toolbox,"Add"))),e.appendChild(M.make("div",this.CSS.plusButtonShortcut,{textContent:" Tab"})),this.tooltip.onHover(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=M.make("span",this.CSS.settingsToggler,{innerHTML:Zh}),M.append(this.nodes.actions,this.nodes.settingsToggler),this.tooltip.onHover(this.nodes.settingsToggler,Ke.ui(ct.ui.blockTunes.toggler,"Click to tune"),{hidingDelay:400}),M.append(this.nodes.actions,this.makeToolbox()),M.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),M.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new Es({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:Ke.ui(ct.ui.popover,"Filter"),nothingFound:Ke.ui(ct.ui.popover,"Nothing found")}}),this.toolboxInstance.on(An.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(An.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(An.BlockAdded,({block:e})=>{const{BlockManager:o,Caret:n}=this.Editor,i=o.getBlockById(e.id);i.inputs.length===0&&(i===o.lastBlock?(o.insertAtEnd(),n.setToBlock(o.lastBlock)):n.setToBlock(o.nextBlock))}),this.toolboxInstance.make()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(e=this.toolboxInstance)==null||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var o;e.stopPropagation(),this.settingsTogglerClicked(),(o=this.toolboxInstance)!=null&&o.opened&&this.toolboxInstance.close(),this.tooltip.hide(!0)},!0),eo()||this.eventsDispatcher.on(el,e=>{var o;this.Editor.BlockSettings.opened||(o=this.toolboxInstance)!=null&&o.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy(),this.tooltip.destroy()}}var ri=(t=>(t[t.Block=0]="Block",t[t.Inline=1]="Inline",t[t.Tune=2]="Tune",t))(ri||{}),On=(t=>(t.Shortcut="shortcut",t.Toolbox="toolbox",t.EnabledInlineTools="inlineToolbar",t.EnabledBlockTunes="tunes",t.Config="config",t))(On||{}),tl=(t=>(t.Shortcut="shortcut",t.SanitizeConfig="sanitize",t))(tl||{}),co=(t=>(t.IsEnabledLineBreaks="enableLineBreaks",t.Toolbox="toolbox",t.ConversionConfig="conversionConfig",t.IsReadOnlySupported="isReadOnlySupported",t.PasteConfig="pasteConfig",t))(co||{}),Cs=(t=>(t.IsInline="isInline",t.Title="title",t))(Cs||{}),ol=(t=>(t.IsTune="isTune",t))(ol||{});class Ss{constructor({name:e,constructable:o,config:n,api:i,isDefault:s,isInternal:r=!1,defaultPlaceholder:a}){this.api=i,this.name=e,this.constructable=o,this.config=n,this.isDefault=s,this.isInternal=r,this.defaultPlaceholder=a}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(ve(this.constructable.reset))return this.constructable.reset()}prepare(){if(ve(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===1}isBlock(){return this.type===0}isTune(){return this.type===2}}class hf extends re{constructor({config:e,eventsDispatcher:o}){super({config:e,eventsDispatcher:o}),this.CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},this.opened=!1,this.toolbarVerticalMargin=eo()?20:6,this.buttonsList=null,this.width=0,this.flipper=null,this.tooltip=new ws}toggleReadOnly(e){e?(this.destroy(),this.Editor.ConversionToolbar.destroy()):window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}tryToShow(e=!1,o=!0){if(!this.allowedToShow()){e&&this.close();return}this.move(),this.open(o),this.Editor.Toolbar.close()}move(){const e=X.rect,o=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),n={x:e.x-o.left,y:e.y+e.height-o.top+this.toolbarVerticalMargin};e.width&&(n.x+=Math.floor(e.width/2));const i=n.x-this.width/2,s=n.x+this.width/2;this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarLeftOriented,i<this.Editor.UI.contentRect.left),this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarRightOriented,s>this.Editor.UI.contentRect.right),this.nodes.wrapper.style.left=Math.floor(n.x)+"px",this.nodes.wrapper.style.top=Math.floor(n.y)+"px"}close(){this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(([e,o])=>{const n=this.getToolShortcut(e);n&&Io.remove(this.Editor.UI.nodes.redactor,n),ve(o.clear)&&o.clear()}),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}open(e=!0){if(this.opened)return;this.addToolsFiltered(),this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(`.${this.CSS.inlineToolButton}`),this.opened=!0,e&&this.Editor.ConversionToolbar.hasTools()?this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0;let o=Array.from(this.buttonsList);o.unshift(this.nodes.conversionToggler),o=o.filter(n=>!n.hidden),this.flipper.activate(o)}containsNode(e){return this.nodes.wrapper.contains(e)}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes(),this.tooltip.destroy()}make(){this.nodes.wrapper=M.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.togglerAndButtonsWrapper=M.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=M.make("div",this.CSS.buttonsWrapper),this.nodes.actions=M.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",e=>{e.target.closest(`.${this.CSS.actionsWrapper}`)||e.preventDefault()}),M.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),M.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),M.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),window.requestAnimationFrame(()=>{this.recalculateWidth()}),this.enableFlipper()}allowedToShow(){const e=["IMG","INPUT"],o=X.get(),n=X.text;if(!o||!o.anchorNode||o.isCollapsed||n.length<1)return!1;const i=M.isElement(o.anchorNode)?o.anchorNode:o.anchorNode.parentElement;if(o&&e.includes(i.tagName)||i.closest('[contenteditable="true"]')===null)return!1;const s=this.Editor.BlockManager.getBlock(o.anchorNode);return s?s.tool.inlineTools.size!==0:!1}recalculateWidth(){this.width=this.nodes.wrapper.offsetWidth}addConversionToggler(){this.nodes.conversionToggler=M.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=M.make("div",this.CSS.conversionTogglerContent);const e=M.make("div",this.CSS.conversionTogglerArrow,{innerHTML:Za});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(e),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",()=>{this.Editor.ConversionToolbar.toggle(o=>{!o&&this.opened?this.flipper.activate():this.opened&&this.flipper.deactivate()})}),eo()===!1&&this.tooltip.onHover(this.nodes.conversionToggler,Ke.ui(ct.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}async setConversionTogglerContent(){const{BlockManager:e}=this.Editor,{currentBlock:o}=e,n=o.name,i=o.tool.conversionConfig,s=i&&i.export;this.nodes.conversionToggler.hidden=!s,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!s);const r=await o.getActiveToolboxEntry()||{};this.nodes.conversionTogglerContent.innerHTML=r.icon||r.title||_o(n)}prepareConversionToolbar(){const e=this.Editor.ConversionToolbar.make();M.append(this.nodes.wrapper,e)}addToolsFiltered(){const e=X.get(),o=this.Editor.BlockManager.getBlock(e.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(o.tool.inlineTools.values()).forEach(n=>{this.addTool(n)}),this.recalculateWidth()}addTool(e){const o=e.create(),n=o.render();if(!n){de("Render method must return an instance of Node","warn",e.name);return}if(n.dataset.tool=e.name,this.nodes.buttons.appendChild(n),this.toolsInstances.set(e.name,o),ve(o.renderActions)){const a=o.renderActions();this.nodes.actions.appendChild(a)}this.listeners.on(n,"click",a=>{this.toolClicked(o),a.preventDefault()});const i=this.getToolShortcut(e.name);if(i)try{this.enableShortcuts(o,i)}catch{}const s=M.make("div"),r=Ke.t(ct.toolNames,e.title||_o(e.name));s.appendChild(M.text(r)),i&&s.appendChild(M.make("div",this.CSS.inlineToolbarShortcut,{textContent:bs(i)})),eo()===!1&&this.tooltip.onHover(n,s,{placement:"top",hidingDelay:100}),o.checkState(X.get())}getToolShortcut(e){const{Tools:o}=this.Editor,n=o.inlineTools.get(e),i=o.internal.inlineTools;return Array.from(i.keys()).includes(e)?this.inlineTools[e][tl.Shortcut]:n.shortcut}enableShortcuts(e,o){Io.add({name:o,handler:n=>{const{currentBlock:i}=this.Editor.BlockManager;i&&i.tool.enabledInlineTools&&(n.preventDefault(),this.toolClicked(e))},on:this.Editor.UI.nodes.redactor})}toolClicked(e){const o=X.range;e.surround(o),this.checkToolsState(),e.renderActions!==void 0&&this.flipper.deactivate()}checkToolsState(){this.toolsInstances.forEach(e=>{e.checkState(X.get())})}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([o,n])=>{e[o]=n.create()}),e}enableFlipper(){this.flipper=new Ot({focusedItemClass:this.CSS.focusedButton,allowedKeys:[te.ENTER,te.TAB]})}}class ff extends re{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case te.BACKSPACE:this.backspace(e);break;case te.DELETE:this.delete(e);break;case te.ENTER:this.enter(e);break;case te.DOWN:case te.RIGHT:this.arrowRightAndDown(e);break;case te.UP:case te.LEFT:this.arrowLeftAndUp(e);break;case te.TAB:this.tabPressed(e);break}}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&ja(e.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||(this.Editor.BlockManager.clearFocused(),this.Editor.BlockSelection.clearSelection(e)))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}tabPressed(e){this.Editor.BlockSelection.clearSelection(e);const{BlockManager:o,InlineToolbar:n,ConversionToolbar:i}=this.Editor,s=o.currentBlock;if(!s)return;const r=s.isEmpty,a=s.tool.isDefault&&r,l=!r&&i.opened,c=!r&&!X.isCollapsed&&n.opened;a?this.activateToolbox():!l&&!c&&this.activateBlockSettings()}dragOver(e){const o=this.Editor.BlockManager.getBlockByChildNode(e.target);o.dropTarget=!0}dragLeave(e){const o=this.Editor.BlockManager.getBlockByChildNode(e.target);o.dropTarget=!1}handleCommandC(e){const{BlockSelection:o}=this.Editor;o.anyBlockSelected&&o.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:o,BlockManager:n,Caret:i}=this.Editor;o.anyBlockSelected&&o.copySelectedBlocks(e).then(()=>{const s=n.removeSelectedBlocks(),r=n.insertDefaultBlockAtIndex(s,!0);i.setToBlock(r,i.positions.START),o.clearSelection(e)})}enter(e){const{BlockManager:o,UI:n}=this.Editor;if(o.currentBlock.tool.isLineBreaksEnabled||n.someToolbarOpened&&n.someFlipperButtonFocused||e.shiftKey)return;let i=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):this.Editor.Caret.isAtEnd?i=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):i=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(i),this.Editor.Toolbar.moveAndOpen(i),e.preventDefault()}backspace(e){const{BlockManager:o,Caret:n}=this.Editor,{currentBlock:i,previousBlock:s}=o;if(!(!X.isCollapsed||!n.isAtStart)){if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput!==i.firstInput){n.navigatePrevious();return}if(s!==null){if(s.isEmpty){o.removeBlock(s);return}if(i.isEmpty){o.removeBlock(i);const r=o.currentBlock;n.setToBlock(r,n.positions.END);return}mr(i,s)?this.mergeBlocks(s,i):n.setToBlock(s,n.positions.END)}}}delete(e){const{BlockManager:o,Caret:n}=this.Editor,{currentBlock:i,nextBlock:s}=o;if(!(!X.isCollapsed||!n.isAtEnd)){if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput!==i.lastInput){n.navigateNext();return}if(s!==null){if(s.isEmpty){o.removeBlock(s);return}if(i.isEmpty){o.removeBlock(i),n.setToBlock(s,n.positions.START);return}mr(i,s)?this.mergeBlocks(i,s):n.setToBlock(s,n.positions.START)}}}mergeBlocks(e,o){const{BlockManager:n,Caret:i,Toolbar:s}=this.Editor;i.createShadow(e.pluginsContent),n.mergeBlocks(e,o).then(()=>{window.requestAnimationFrame(()=>{i.restoreCaret(e.pluginsContent),e.pluginsContent.normalize(),s.close()})})}arrowRightAndDown(e){const o=Ot.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===te.TAB);if(this.Editor.UI.someToolbarOpened&&o)return;this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();const n=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===te.DOWN&&n){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}(e.keyCode===te.DOWN||e.keyCode===te.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious())?e.preventDefault():Bo(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(Ot.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===te.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();const o=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===te.UP&&o){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}(e.keyCode===te.UP||e.keyCode===te.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext())?e.preventDefault():Bo(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){const o=e.keyCode===te.ENTER&&this.Editor.Toolbar.toolbox.opened,n=e.keyCode===te.ENTER&&this.Editor.BlockSettings.opened,i=e.keyCode===te.ENTER&&this.Editor.InlineToolbar.opened,s=e.keyCode===te.ENTER&&this.Editor.ConversionToolbar.opened,r=e.keyCode===te.TAB;return!(e.shiftKey||r||o||n||i||s)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||(this.Editor.BlockManager.currentBlock.focused=!0,this.Editor.Toolbar.moveAndOpen()),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}class ki{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return $a(this.workingArea.children)}static set(e,o,n){return isNaN(Number(o))?(Reflect.set(e,o,n),!0):(e.insert(+o,n),!0)}static get(e,o){return isNaN(Number(o))?Reflect.get(e,o):e.get(+o)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,o){const n=this.blocks[o];M.swap(this.blocks[e].holder,n.holder),this.blocks[o]=this.blocks[e],this.blocks[e]=n}move(e,o){const n=this.blocks.splice(o,1)[0],i=e-1,s=Math.max(0,i),r=this.blocks[s];e>0?this.insertToDOM(n,"afterend",r):this.insertToDOM(n,"beforebegin",r),this.blocks.splice(e,0,n);const a=this.composeBlockEvent("move",{fromIndex:o,toIndex:e});n.call(Bt.MOVED,a)}insert(e,o,n=!1){if(!this.length){this.push(o);return}e>this.length&&(e=this.length),n&&(this.blocks[e].holder.remove(),this.blocks[e].call(Bt.REMOVED));const i=n?1:0;if(this.blocks.splice(e,i,o),e>0){const s=this.blocks[e-1];this.insertToDOM(o,"afterend",s)}else{const s=this.blocks[e+1];s?this.insertToDOM(o,"beforebegin",s):this.insertToDOM(o)}}replace(e,o){if(this.blocks[e]===void 0)throw Error("Incorrect index");this.blocks[e].holder.replaceWith(o.holder),this.blocks[e]=o}insertMany(e,o){const n=new DocumentFragment;for(const i of e)n.appendChild(i.holder);if(this.length>0){if(o>0){const i=Math.min(o-1,this.length-1);this.blocks[i].holder.after(n)}else o===0&&this.workingArea.prepend(n);this.blocks.splice(o,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(n);e.forEach(i=>i.call(Bt.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(Bt.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(Bt.REMOVED)),this.blocks.length=0}insertAfter(e,o){const n=this.blocks.indexOf(e);this.insert(n+1,o)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,o,n){o?n.holder.insertAdjacentElement(o,e.holder):this.workingArea.appendChild(e.holder),e.call(Bt.RENDERED)}composeBlockEvent(e,o){return new CustomEvent(e,{detail:o})}}const vr="block-removed",kr="block-added",pf="block-moved",yr="block-changed";class gf{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((o,n)=>{this.completed=this.completed.then(e).then(o).catch(n)})}}class mf extends re{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(e=>!!e.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(e=>!!e.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){const e=new ki(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:ki.set,get:ki.get}),this.listeners.on(document,"copy",o=>this.Editor.BlockEvents.handleCommandC(o))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:o={},id:n=void 0,tunes:i={}}){const s=this.Editor.ReadOnly.isEnabled,r=this.Editor.Tools.blockTools.get(e),a=new _e({id:n,data:o,tool:r,api:this.Editor.API,readOnly:s,tunesData:i},this.eventsDispatcher);return s||window.requestIdleCallback(()=>{this.bindBlockEvents(a)},{timeout:2e3}),a}insert({id:e=void 0,tool:o=this.config.defaultBlock,data:n={},index:i,needToFocus:s=!0,replace:r=!1,tunes:a={}}={}){let l=i;l===void 0&&(l=this.currentBlockIndex+(r?0:1));const c=this.composeBlock({id:e,tool:o,data:n,tunes:a});return r&&this.blockDidMutated(vr,this.getBlockByIndex(l),{index:l}),this._blocks.insert(l,c,r),this.blockDidMutated(kr,c,{index:l}),s?this.currentBlockIndex=l:l<=this.currentBlockIndex&&this.currentBlockIndex++,c}insertMany(e,o=0){this._blocks.insertMany(e,o)}async update(e,o){const n=await e.data,i=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},n,o),tunes:e.tunes}),s=this.getBlockIndex(e);return this._blocks.replace(s,i),this.blockDidMutated(yr,i,{index:s}),i}replace(e,o,n){const i=this.getBlockIndex(e);this.insert({tool:o,data:n,index:i,replace:!0})}paste(e,o,n=!1){const i=this.insert({tool:e,replace:n});try{window.requestIdleCallback(()=>{i.call(Bt.ON_PASTE,o)})}catch(s){de(`${e}: onPaste callback call is failed`,"error",s)}return i}insertDefaultBlockAtIndex(e,o=!1){const n=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=n,this.blockDidMutated(kr,n,{index:e}),o?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,n}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,o){const n=await o.data;ft(n)||await e.mergeWith(n),this.removeBlock(o),this.currentBlockIndex=this._blocks.indexOf(e)}removeBlock(e,o=!0){return new Promise(n=>{const i=this._blocks.indexOf(e);if(!this.validateIndex(i))throw new Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(i),this.blockDidMutated(vr,e,{index:i}),this.currentBlockIndex>=i&&this.currentBlockIndex--,this.blocks.length?i===0&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,o&&this.insert()),n()})}removeSelectedBlocks(){let e;for(let o=this.blocks.length-1;o>=0;o--)this.blocks[o].selected&&(this.removeBlock(this.blocks[o]),e=o);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),o=M.make("div");o.appendChild(e);const n={text:M.isEmpty(o)?"":o.innerHTML};return this.insert({data:n})}getBlockByIndex(e){return e===-1&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(o=>o.id===e)}getBlock(e){M.isElement(e)||(e=e.parentNode);const o=this._blocks.nodes,n=e.closest(`.${_e.CSS.wrapper}`),i=o.indexOf(n);if(i>=0)return this._blocks[i]}highlightCurrentNode(){this.clearFocused(),this.currentBlock.focused=!0}clearFocused(){this.blocks.forEach(e=>{e.focused=!1})}setCurrentBlockByChildNode(e){M.isElement(e)||(e=e.parentNode);const o=e.closest(`.${_e.CSS.wrapper}`);if(!o)return;const n=o.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(n!=null&&n.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(o),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){M.isElement(e)||(e=e.parentNode);const o=e.closest(`.${_e.CSS.wrapper}`);return this.blocks.find(n=>n.holder===o)}swap(e,o){this._blocks.swap(e,o),this.currentBlockIndex=o}move(e,o=this.currentBlockIndex){if(isNaN(e)||isNaN(o)){de("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(o)){de("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,o),this.currentBlockIndex=e,this.blockDidMutated(pf,this.currentBlock,{fromIndex:o,toIndex:e})}async convert(e,o,n){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const i=this.Editor.Tools.blockTools.get(o);if(!i)throw new Error(`Could not convert Block. Tool ${o} not found.`);const s=await e.exportDataAsString(),r=It(s,i.sanitizeConfig);let a=bh(r,i.conversionConfig);n&&(a=Object.assign(a,n)),this.replace(e,i.name,a)}dropPointer(){this.currentBlockIndex=-1,this.clearFocused()}async clear(e=!1){const o=new gf;this.blocks.forEach(n=>{o.add(async()=>{await this.removeBlock(n,!1)})}),await o.completed,this.dropPointer(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){const{BlockEvents:o}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",n=>{o.keydown(n)}),this.readOnlyMutableListeners.on(e.holder,"keyup",n=>{o.keyup(n)}),this.readOnlyMutableListeners.on(e.holder,"dragover",n=>{o.dragOver(n)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",n=>{o.dragLeave(n)}),e.on("didMutated",n=>this.blockDidMutated(yr,n,{index:this.getBlockIndex(n)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,o,n){const i=new CustomEvent(e,{detail:{target:new Zt(o),...n}});return this.eventsDispatcher.emit(Ka,{event:i}),o}}class bf extends re{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every(o=>o.selected===!0)}set allBlocksSelected(e){const{BlockManager:o}=this.Editor;o.blocks.forEach(n=>{n.selected=e}),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=e.blocks.some(o=>o.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new X,Io.add({name:"CMD+A",handler:e=>{const{BlockManager:o,ReadOnly:n}=this.Editor;if(n.isEnabled){e.preventDefault(),this.selectAllBlocks();return}o.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){X.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:o}=this.Editor;let n;isNaN(e)?n=o.currentBlock:n=o.getBlockByIndex(e),n.selected=!1,this.clearCache()}clearSelection(e,o=!1){const{BlockManager:n,Caret:i,RectangleSelection:s}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const r=e&&e instanceof KeyboardEvent,a=r&&ja(e.keyCode);if(this.anyBlockSelected&&r&&a&&!X.isSelectionExists){const l=n.removeSelectedBlocks();n.insertDefaultBlockAtIndex(l,!0),i.setToBlock(n.currentBlock),Bo(()=>{const c=e.key;i.insertContentAtCaretPosition(c.length>1?"":c)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||s.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}o&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();const o=M.make("div");this.selectedBlocks.forEach(s=>{const r=It(s.holder.innerHTML,this.sanitizerConfig),a=M.make("p");a.innerHTML=r,o.appendChild(a)});const n=Array.from(o.childNodes).map(s=>s.textContent).join(`

`),i=o.innerHTML;return e.clipboardData.setData("text/plain",n),e.clipboardData.setData("text/html",i),Promise.all(this.selectedBlocks.map(s=>s.save())).then(s=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(s))}catch{}})}selectBlockByIndex(e){const{BlockManager:o}=this.Editor;o.clearFocused();let n;isNaN(e)?n=o.currentBlock:n=o.getBlockByIndex(e),this.selection.save(),X.get().removeAllRanges(),n.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}clearCache(){this.anyBlockSelectedCache=null}destroy(){Io.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),M.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const o=this.Editor.BlockManager.getBlock(e.target).inputs;if(o.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(o.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlockByIndex(),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),X.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}class Un extends re{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}get isAtStart(){const e=X.get(),o=M.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput);let n=e.focusNode;if(M.isNativeInput(o))return o.selectionEnd===0;if(!e.anchorNode)return!1;let i=n.textContent.search(/\S/);i===-1&&(i=0);let s=e.focusOffset;return n.nodeType!==Node.TEXT_NODE&&n.childNodes.length&&(n.childNodes[s]?(n=n.childNodes[s],s=0):(n=n.childNodes[s-1],s=n.textContent.length)),(M.isLineBreakTag(o)||M.isEmpty(o))&&this.getHigherLevelSiblings(n,"left").every(r=>{const a=M.isLineBreakTag(r),l=r.children.length===1&&M.isLineBreakTag(r.children[0]),c=a||l;return M.isEmpty(r)&&!c})&&s===i?!0:o===null||n===o&&s<=i}get isAtEnd(){const e=X.get();let o=e.focusNode;const n=M.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput,!0);if(M.isNativeInput(n))return n.selectionEnd===n.value.length;if(!e.focusNode)return!1;let i=e.focusOffset;if(o.nodeType!==Node.TEXT_NODE&&o.childNodes.length&&(o.childNodes[i-1]?(o=o.childNodes[i-1],i=o.textContent.length):(o=o.childNodes[0],i=0)),M.isLineBreakTag(n)||M.isEmpty(n)){const r=this.getHigherLevelSiblings(o,"right");if(r.every((a,l)=>l===r.length-1&&M.isLineBreakTag(a)||M.isEmpty(a)&&!M.isLineBreakTag(a))&&i===o.textContent.length)return!0}const s=n.textContent.replace(/\s+$/,"");return o===n&&i>=s.length}setToBlock(e,o=this.positions.DEFAULT,n=0){const{BlockManager:i}=this.Editor;let s;switch(o){case this.positions.START:s=e.firstInput;break;case this.positions.END:s=e.lastInput;break;default:s=e.currentInput}if(!s)return;const r=M.getDeepestNode(s,o===this.positions.END),a=M.getContentLength(r);switch(!0){case o===this.positions.START:n=0;break;case o===this.positions.END:case n>a:n=a;break}Bo(()=>{this.set(r,n)},20)(),i.setCurrentBlockByChildNode(e.holder),i.currentBlock.currentInput=s}setToInput(e,o=this.positions.DEFAULT,n=0){const{currentBlock:i}=this.Editor.BlockManager,s=M.getDeepestNode(e);switch(o){case this.positions.START:this.set(s,0);break;case this.positions.END:this.set(s,M.getContentLength(s));break;default:n&&this.set(s,n)}i.currentInput=e}set(e,o=0){const{top:n,bottom:i}=X.setCursor(e,o),{innerHeight:s}=window;n<0&&window.scrollBy(0,n),i>s&&window.scrollBy(0,i-s)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const o=this.Editor.BlockManager.insertAtEnd();this.setToBlock(o)}}extractFragmentFromCaretPosition(){const e=X.get();if(e.rangeCount){const o=e.getRangeAt(0),n=this.Editor.BlockManager.currentBlock.currentInput;if(o.deleteContents(),n)if(M.isNativeInput(n)){const i=n,s=document.createDocumentFragment(),r=i.value.substring(0,i.selectionStart),a=i.value.substring(i.selectionStart);return s.textContent=a,i.value=r,s}else{const i=o.cloneRange();return i.selectNodeContents(n),i.setStart(o.endContainer,o.endOffset),i.extractContents()}}}navigateNext(){const{BlockManager:e}=this.Editor,{currentBlock:o,nextContentfulBlock:n}=e,{nextInput:i}=o,s=this.isAtEnd;let r=n;if(!r&&!i){if(o.tool.isDefault||!s)return!1;r=e.insertAtEnd()}return s?(i?this.setToInput(i,this.positions.START):this.setToBlock(r,this.positions.START),!0):!1}navigatePrevious(){const{currentBlock:e,previousContentfulBlock:o}=this.Editor.BlockManager;if(!e)return!1;const{previousInput:n}=e;return!o&&!n?!1:this.isAtStart?(n?this.setToInput(n,this.positions.END):this.setToBlock(o,this.positions.END),!0):!1}createShadow(e){const o=document.createElement("span");o.classList.add(Un.CSS.shadowCaret),e.insertAdjacentElement("beforeend",o)}restoreCaret(e){const o=e.querySelector(`.${Un.CSS.shadowCaret}`);if(!o)return;new X().expandToTag(o);const n=document.createRange();n.selectNode(o),n.extractContents()}insertContentAtCaretPosition(e){const o=document.createDocumentFragment(),n=document.createElement("div"),i=X.get(),s=X.range;n.innerHTML=e,Array.from(n.childNodes).forEach(c=>o.appendChild(c)),o.childNodes.length===0&&o.appendChild(new Text);const r=o.lastChild;s.deleteContents(),s.insertNode(o);const a=document.createRange(),l=r.nodeType===Node.TEXT_NODE?r:r.firstChild;l!==null&&l.textContent!==null&&a.setStart(l,l.textContent.length),i.removeAllRanges(),i.addRange(a)}getHigherLevelSiblings(e,o){let n=e;const i=[];for(;n.parentNode&&n.parentNode.contentEditable!=="true";)n=n.parentNode;const s=o==="left"?"previousSibling":"nextSibling";for(;n[s];)n=n[s],i.push(n);return i}}class vf extends re{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:o,BlockSelection:n}=this.Editor,i=o.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,s=o.getBlockByChildNode(e.target);if(!(!i||!s)&&s!==i){if(i===this.firstSelectedBlock){X.get().removeAllRanges(),i.selected=!0,s.selected=!0,n.clearCache();return}if(s===this.firstSelectedBlock){i.selected=!1,s.selected=!1,n.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(i,s),this.lastSelectedBlock=s}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(e.button!==Ju.LEFT)return;const{BlockManager:o}=this.Editor;this.firstSelectedBlock=o.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:o,BlockSelection:n}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=o.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,n.clearCache(),X.get().removeAllRanges());const i=o.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),s=o.blocks[i];s&&(this.lastSelectedBlock.selected!==s.selected?(s.selected=!0,n.clearCache()):(this.lastSelectedBlock.selected=!1,n.clearCache()),this.lastSelectedBlock=s,this.Editor.InlineToolbar.close(),s.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:o,BlockSelection:n,Caret:i}=this.Editor,s=o.blocks.indexOf(this.firstSelectedBlock),r=o.blocks.indexOf(this.lastSelectedBlock);if(n.anyBlockSelected&&s>-1&&r>-1)if(e&&e instanceof KeyboardEvent)switch(e.keyCode){case te.DOWN:case te.RIGHT:i.setToBlock(o.blocks[Math.max(s,r)],i.positions.END);break;case te.UP:case te.LEFT:i.setToBlock(o.blocks[Math.min(s,r)],i.positions.START);break;default:i.setToBlock(o.blocks[Math.max(s,r)],i.positions.END)}else i.setToBlock(o.blocks[Math.max(s,r)],i.positions.END);this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:o}=this.Editor;X.isCollapsed||this.Editor.BlockSelection.clearSelection(e),o.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,o){const{BlockManager:n,BlockSelection:i}=this.Editor,s=n.blocks.indexOf(e),r=n.blocks.indexOf(o),a=e.selected!==o.selected;for(let l=Math.min(s,r);l<=Math.max(s,r);l++){const c=n.blocks[l];c!==this.firstSelectedBlock&&c!==(a?e:o)&&(n.blocks[l].selected=!n.blocks[l].selected,i.clearCache())}}}class kf extends re{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async o=>{await this.processDrop(o)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",o=>{this.processDragOver(o)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:o,Caret:n,Paste:i}=this.Editor;e.preventDefault(),o.blocks.forEach(r=>{r.dropTarget=!1}),X.isAtEditor&&!X.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const s=o.setCurrentBlockByChildNode(e.target);if(s)this.Editor.Caret.setToBlock(s,n.positions.END);else{const r=o.setCurrentBlockByChildNode(o.lastBlock.holder);this.Editor.Caret.setToBlock(r,n.positions.END)}await i.processDataTransfer(e.dataTransfer,!0)}processDragStart(){X.isAtEditor&&!X.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}}class yf extends re{constructor({config:e,eventsDispatcher:o}){super({config:e,eventsDispatcher:o}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver(n=>{this.redactorChanged(n)}),this.eventsDispatcher.on(Ka,n=>{this.particularBlockChanged(n.event)}),this.eventsDispatcher.on(qa,()=>{this.disable()}),this.eventsDispatcher.on(Ya,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!ve(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let o;this.batchingOnChangeQueue.size===1?o=this.batchingOnChangeQueue.values().next().value:o=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,o),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(Fi,{mutations:e})}}const nl=class extends re{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=t=>{try{const e=t.create({},{},!1);if(t.pasteConfig===!1){this.exceptionList.push(t.name);return}if(!ve(e.onPaste))return;this.getTagsConfig(t),this.getFilesConfig(t),this.getPatternsConfig(t)}catch(e){de(`Paste handling for ${t.name} Tool hasn't been set up because of the error`,"warn",e)}},this.handlePasteEvent=async t=>{const{BlockManager:e,Toolbar:o}=this.Editor,n=e.setCurrentBlockByChildNode(t.target);!n||this.isNativeBehaviour(t.target)&&!t.clipboardData.types.includes("Files")||n&&this.exceptionList.includes(n.name)||(t.preventDefault(),this.processDataTransfer(t.clipboardData),e.clearFocused(),o.close())}}async prepare(){this.processTools()}toggleReadOnly(t){t?this.unsetCallback():this.setCallback()}async processDataTransfer(t,e=!1){const{Tools:o}=this.Editor,n=t.types;if((n.includes?n.includes("Files"):n.contains("Files"))&&!ft(this.toolsFiles)){await this.processFiles(t.files);return}const i=t.getData(this.MIME_TYPE),s=t.getData("text/plain");let r=t.getData("text/html");if(i)try{this.insertEditorJSData(JSON.parse(i));return}catch{}e&&s.trim()&&r.trim()&&(r="<p>"+(r.trim()?r:s)+"</p>");const a=Object.keys(this.toolsTags).reduce((d,u)=>(d[u.toLowerCase()]=this.toolsTags[u].sanitizationConfig??{},d),{}),l=Object.assign({},a,o.getAllInlineToolsSanitizeConfig(),{br:{}}),c=It(r,l);!c.trim()||c.trim()===s||!M.isHTMLString(c)?await this.processText(s):await this.processText(c,!0)}async processText(t,e=!1){const{Caret:o,BlockManager:n}=this.Editor,i=e?this.processHTML(t):this.processPlain(t);if(!i.length)return;if(i.length===1){i[0].isBlock?this.processSingleBlock(i.pop()):this.processInlinePaste(i.pop());return}const s=n.currentBlock&&n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty;i.map(async(r,a)=>this.insertBlock(r,a===0&&s)),n.currentBlock&&o.setToBlock(n.currentBlock,o.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const t=this.Editor.Tools.blockTools;Array.from(t.values()).forEach(this.processTool)}collectTagNames(t){return Kt(t)?[t]:Pe(t)?Object.keys(t):[]}getTagsConfig(t){if(t.pasteConfig===!1)return;const e=t.pasteConfig.tags||[],o=[];e.forEach(n=>{const i=this.collectTagNames(n);o.push(...i),i.forEach(s=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,s)){de(`Paste handler for ${t.name} Tool on ${s} tag is skipped because it is already used by ${this.toolsTags[s].tool.name} Tool.`,"warn");return}const r=Pe(n)?n[s]:null;this.toolsTags[s.toUpperCase()]={tool:t,sanitizationConfig:r}})}),this.tagsByTool[t.name]=o.map(n=>n.toUpperCase())}getFilesConfig(t){if(t.pasteConfig===!1)return;const{files:e={}}=t.pasteConfig;let{extensions:o,mimeTypes:n}=e;!o&&!n||(o&&!Array.isArray(o)&&(de(`extensions property of the onDrop config for ${t.name} Tool should be an array`),o=[]),n&&!Array.isArray(n)&&(de(`mimeTypes property of the onDrop config for ${t.name} Tool should be an array`),n=[]),n&&(n=n.filter(i=>nh(i)?!0:(de(`MIME type value ${i} for the ${t.name} Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[t.name]={extensions:o||[],mimeTypes:n||[]})}getPatternsConfig(t){t.pasteConfig===!1||!t.pasteConfig.patterns||ft(t.pasteConfig.patterns)||Object.entries(t.pasteConfig.patterns).forEach(([e,o])=>{o instanceof RegExp||de(`Pattern ${o} for ${t.name} Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:e,pattern:o,tool:t})})}isNativeBehaviour(t){return M.isNativeInput(t)}async processFiles(t){const{BlockManager:e}=this.Editor;let o;o=await Promise.all(Array.from(t).map(i=>this.processFile(i))),o=o.filter(i=>!!i);const n=e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty;o.forEach((i,s)=>{e.paste(i.type,i.event,s===0&&n)})}async processFile(t){const e=oh(t),o=Object.entries(this.toolsFiles).find(([i,{mimeTypes:s,extensions:r}])=>{const[a,l]=t.type.split("/"),c=r.find(u=>u.toLowerCase()===e.toLowerCase()),d=s.find(u=>{const[h,p]=u.split("/");return h===a&&(p===l||p==="*")});return!!c||!!d});if(!o)return;const[n]=o;return{event:this.composePasteEvent("file",{file:t}),type:n}}processHTML(t){const{Tools:e}=this.Editor,o=M.make("DIV");return o.innerHTML=t,this.getNodes(o).map(n=>{let i,s=e.defaultTool,r=!1;switch(n.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:i=M.make("div"),i.appendChild(n);break;case Node.ELEMENT_NODE:i=n,r=!0,this.toolsTags[i.tagName]&&(s=this.toolsTags[i.tagName].tool);break}const{tags:a}=s.pasteConfig||{tags:[]},l=a.reduce((u,h)=>(this.collectTagNames(h).forEach(p=>{const f=Pe(h)?h[p]:null;u[p.toLowerCase()]=f||{}}),u),{}),c=Object.assign({},l,s.baseSanitizeConfig);if(i.tagName.toLowerCase()==="table"){const u=It(i.outerHTML,c);i=M.make("div",void 0,{innerHTML:u}).firstChild}else i.innerHTML=It(i.innerHTML,c);const d=this.composePasteEvent("tag",{data:i});return{content:i,isBlock:r,tool:s.name,event:d}}).filter(n=>{const i=M.isEmpty(n.content),s=M.isSingleTag(n.content);return!i||s})}processPlain(t){const{defaultBlock:e}=this.config;if(!t)return[];const o=e;return t.split(/\r?\n/).filter(n=>n.trim()).map(n=>{const i=M.make("div");i.textContent=n;const s=this.composePasteEvent("tag",{data:i});return{content:i,tool:o,isBlock:!1,event:s}})}async processSingleBlock(t){const{Caret:e,BlockManager:o}=this.Editor,{currentBlock:n}=o;if(!n||t.tool!==n.name||!M.containsOnlyInlineElements(t.content.innerHTML)){this.insertBlock(t,(n==null?void 0:n.tool.isDefault)&&n.isEmpty);return}e.insertContentAtCaretPosition(t.content.innerHTML)}async processInlinePaste(t){const{BlockManager:e,Caret:o}=this.Editor,{content:n}=t;if(e.currentBlock&&e.currentBlock.tool.isDefault&&n.textContent.length<nl.PATTERN_PROCESSING_MAX_LENGTH){const i=await this.processPattern(n.textContent);if(i){const s=e.currentBlock&&e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty,r=e.paste(i.tool,i.event,s);o.setToBlock(r,o.positions.END);return}}if(e.currentBlock&&e.currentBlock.currentInput){const i=e.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,It(n.innerHTML,i))}else this.insertBlock(t)}async processPattern(t){const e=this.toolsPatterns.find(o=>{const n=o.pattern.exec(t);return n?t===n.shift():!1});return e?{event:this.composePasteEvent("pattern",{key:e.key,data:t}),tool:e.tool.name}:void 0}insertBlock(t,e=!1){const{BlockManager:o,Caret:n}=this.Editor,{currentBlock:i}=o;let s;if(e&&i&&i.isEmpty){s=o.paste(t.tool,t.event,!0),n.setToBlock(s,n.positions.END);return}s=o.paste(t.tool,t.event),n.setToBlock(s,n.positions.END)}insertEditorJSData(t){const{BlockManager:e,Caret:o,Tools:n}=this.Editor;Va(t,i=>n.blockTools.get(i).sanitizeConfig).forEach(({tool:i,data:s},r)=>{let a=!1;r===0&&(a=e.currentBlock&&e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty);const l=e.insert({tool:i,data:s,replace:a});o.setToBlock(l,o.positions.END)})}processElementNode(t,e,o){const n=Object.keys(this.toolsTags),i=t,{tool:s}=this.toolsTags[i.tagName]||{},r=this.tagsByTool[s==null?void 0:s.name]||[],a=n.includes(i.tagName),l=M.blockElements.includes(i.tagName.toLowerCase()),c=Array.from(i.children).some(({tagName:u})=>n.includes(u)&&!r.includes(u)),d=Array.from(i.children).some(({tagName:u})=>M.blockElements.includes(u.toLowerCase()));if(!l&&!a&&!c)return o.appendChild(i),[...e,o];if(a&&!c||l&&!d&&!c)return[...e,o,i]}getNodes(t){const e=Array.from(t.childNodes);let o;const n=(i,s)=>{if(M.isEmpty(s)&&!M.isSingleTag(s))return i;const r=i[i.length-1];let a=new DocumentFragment;switch(r&&M.isFragment(r)&&(a=i.pop()),s.nodeType){case Node.ELEMENT_NODE:if(o=this.processElementNode(s,i,a),o)return o;break;case Node.TEXT_NODE:return a.appendChild(s),[...i,a];default:return[...i,a]}return[...i,...Array.from(s.childNodes).reduce(n,[])]};return e.reduce(n,[])}composePasteEvent(t,e){return new CustomEvent(t,{detail:e})}};let il=nl;il.PATTERN_PROCESSING_MAX_LENGTH=450;class wf extends re{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:o}=e,n=[];Array.from(o.entries()).forEach(([i,s])=>{s.isReadOnlySupported||n.push(i)}),this.toolsDontSupportReadOnly=n,this.config.readOnly&&n.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly)}async toggle(e=!this.readOnlyEnabled){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const o=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const i in this.Editor)this.Editor[i].toggleReadOnly&&this.Editor[i].toggleReadOnly(e);if(o===e)return this.readOnlyEnabled;const n=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(n.blocks),this.readOnlyEnabled}throwCriticalError(){throw new Wa(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}class Xo extends re{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,o){const n=document.elementFromPoint(e-window.pageXOffset,o-window.pageYOffset);n.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const i=[`.${_e.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],s=n.closest("."+this.Editor.UI.CSS.editorWrapper),r=i.some(a=>!!n.closest(a));!s||r||(this.mousedown=!0,this.startX=e,this.startY=o)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",o=>{this.processMouseDown(o)},!1),this.listeners.on(document.body,"mousemove",Ni(o=>{this.processMouseMove(o)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",Ni(o=>{this.processScroll(o)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(e.target.closest(M.allInputsSelector)!==null||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:e}=this.Editor,o=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),n=M.make("div",Xo.CSS.overlay,{}),i=M.make("div",Xo.CSS.overlayContainer,{}),s=M.make("div",Xo.CSS.rect,{});return i.appendChild(s),n.appendChild(i),o.appendChild(n),this.overlayRectangle=s,{container:o,overlay:n}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;const o=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-o,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;e.pageY!==void 0&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:o,leftPos:n,index:i}=this.genInfoForMouseSelection(),s=this.startX>o&&this.mouseX>o,r=this.startX<n&&this.mouseX<n;this.rectCrossesBlocks=!(s||r),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),i!==void 0&&(this.trySelectNextBlock(i),this.inverseSelection(),X.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const o of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(o);if(!this.rectCrossesBlocks&&e)for(const o of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(o)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,o=this.mouseY-window.pageYOffset,n=document.elementFromPoint(e,o),i=this.Editor.BlockManager.getBlockByChildNode(n);let s;i!==void 0&&(s=this.Editor.BlockManager.blocks.findIndex(d=>d.holder===i.holder));const r=this.Editor.BlockManager.lastBlock.holder.querySelector("."+_e.CSS.content),a=Number.parseInt(window.getComputedStyle(r).width,10)/2,l=e-a,c=e+a;return{index:s,leftPos:l,rightPos:c}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const o=this.stackOfSelected[this.stackOfSelected.length-1]===e,n=this.stackOfSelected.length,i=1,s=-1,r=0;if(o)return;const a=this.stackOfSelected[n-1]-this.stackOfSelected[n-2]>0;let l=r;n>1&&(l=a?i:s);const c=e>this.stackOfSelected[n-1]&&l===i,d=e<this.stackOfSelected[n-1]&&l===s,u=!(c||d||l===r);if(!u&&(e>this.stackOfSelected[n-1]||this.stackOfSelected[n-1]===void 0)){let f=this.stackOfSelected[n-1]+1||e;for(f;f<=e;f++)this.addBlockInSelection(f);return}if(!u&&e<this.stackOfSelected[n-1]){for(let f=this.stackOfSelected[n-1]-1;f>=e;f--)this.addBlockInSelection(f);return}if(!u)return;let h=n-1,p;for(e>this.stackOfSelected[n-1]?p=()=>e>this.stackOfSelected[h]:p=()=>e<this.stackOfSelected[h];p();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[h]),this.stackOfSelected.pop(),h--}}class xf extends re{async render(e){return new Promise(o=>{const{Tools:n,BlockManager:i}=this.Editor,s=e.map(({type:r,data:a,tunes:l,id:c})=>{n.available.has(r)===!1&&(lt(`Tool ${r} is not found. Check 'tools' property at the Editor.js config.`,"warn"),a=this.composeStubDataForTool(r,a,c),r=n.stubTool);let d;try{d=i.composeBlock({id:c,tool:r,data:a,tunes:l})}catch(u){de(`Block ${r} skipped because of plugins error`,"error",{data:a,error:u}),a=this.composeStubDataForTool(r,a,c),r=n.stubTool,d=i.composeBlock({id:c,tool:r,data:a,tunes:l})}return d});i.insertMany(s),window.requestIdleCallback(()=>{o()},{timeout:2e3})})}composeStubDataForTool(e,o,n){const{Tools:i}=this.Editor;let s=e;if(i.unavailable.has(e)){const r=i.unavailable.get(e).toolbox;r!==void 0&&r[0].title!==void 0&&(s=r[0].title)}return{savedData:{id:n,type:e,data:o},title:s}}}class Ef extends re{async save(){const{BlockManager:e,Tools:o}=this.Editor,n=e.blocks,i=[];try{n.forEach(a=>{i.push(this.getSavedData(a))});const s=await Promise.all(i),r=await Va(s,a=>o.blockTools.get(a).sanitizeConfig);return this.makeOutput(r)}catch(s){lt("Saving failed due to the Error %o","error",s)}}async getSavedData(e){const o=await e.save(),n=o&&await e.validate(o.data);return{...o,isValid:n}}makeOutput(e){const o=[];return e.forEach(({id:n,tool:i,data:s,tunes:r,isValid:a})=>{if(!a){de(`Block ${i} skipped because saved data is invalid`);return}if(i===this.Editor.Tools.stubTool){o.push(s);return}const l={id:n,type:i,data:s,...!ft(r)&&{tunes:r}};o.push(l)}),{time:+new Date,blocks:o,version:"2.28.2"}}}var zi={},Cf={get exports(){return zi},set exports(t){zi=t}};(function(t,e){(function(o,n){t.exports=n()})(window,function(){return function(o){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return o[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=o,i.c=n,i.d=function(s,r,a){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:a})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var l in s)i.d(a,l,(function(c){return s[c]}).bind(null,l));return a},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="/",i(i.s=4)}([function(o,n,i){var s=i(1),r=i(2);typeof(r=r.__esModule?r.default:r)=="string"&&(r=[[o.i,r,""]]);var a={insert:"head",singleton:!1};s(r,a),o.exports=r.locals||{}},function(o,n,i){var s,r=function(){return s===void 0&&(s=!!(window&&document&&document.all&&!window.atob)),s},a=function(){var w={};return function(y){if(w[y]===void 0){var B=document.querySelector(y);if(window.HTMLIFrameElement&&B instanceof window.HTMLIFrameElement)try{B=B.contentDocument.head}catch{B=null}w[y]=B}return w[y]}}(),l=[];function c(w){for(var y=-1,B=0;B<l.length;B++)if(l[B].identifier===w){y=B;break}return y}function d(w,y){for(var B={},I=[],O=0;O<w.length;O++){var v=w[O],b=y.base?v[0]+y.base:v[0],C=B[b]||0,S="".concat(b," ").concat(C);B[b]=C+1;var L=c(S),A={css:v[1],media:v[2],sourceMap:v[3]};L!==-1?(l[L].references++,l[L].updater(A)):l.push({identifier:S,updater:E(A,y),references:1}),I.push(S)}return I}function u(w){var y=document.createElement("style"),B=w.attributes||{};if(B.nonce===void 0){var I=i.nc;I&&(B.nonce=I)}if(Object.keys(B).forEach(function(v){y.setAttribute(v,B[v])}),typeof w.insert=="function")w.insert(y);else{var O=a(w.insert||"head");if(!O)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");O.appendChild(y)}return y}var h,p=(h=[],function(w,y){return h[w]=y,h.filter(Boolean).join(`
`)});function f(w,y,B,I){var O=B?"":I.media?"@media ".concat(I.media," {").concat(I.css,"}"):I.css;if(w.styleSheet)w.styleSheet.cssText=p(y,O);else{var v=document.createTextNode(O),b=w.childNodes;b[y]&&w.removeChild(b[y]),b.length?w.insertBefore(v,b[y]):w.appendChild(v)}}function T(w,y,B){var I=B.css,O=B.media,v=B.sourceMap;if(O?w.setAttribute("media",O):w.removeAttribute("media"),v&&btoa&&(I+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(v))))," */")),w.styleSheet)w.styleSheet.cssText=I;else{for(;w.firstChild;)w.removeChild(w.firstChild);w.appendChild(document.createTextNode(I))}}var m=null,x=0;function E(w,y){var B,I,O;if(y.singleton){var v=x++;B=m||(m=u(y)),I=f.bind(null,B,v,!1),O=f.bind(null,B,v,!0)}else B=u(y),I=T.bind(null,B,y),O=function(){(function(b){if(b.parentNode===null)return!1;b.parentNode.removeChild(b)})(B)};return I(w),function(b){if(b){if(b.css===w.css&&b.media===w.media&&b.sourceMap===w.sourceMap)return;I(w=b)}else O()}}o.exports=function(w,y){(y=y||{}).singleton||typeof y.singleton=="boolean"||(y.singleton=r());var B=d(w=w||[],y);return function(I){if(I=I||[],Object.prototype.toString.call(I)==="[object Array]"){for(var O=0;O<B.length;O++){var v=c(B[O]);l[v].references--}for(var b=d(I,y),C=0;C<B.length;C++){var S=c(B[C]);l[S].references===0&&(l[S].updater(),l.splice(S,1))}B=b}}}},function(o,n,i){(n=i(3)(!1)).push([o.i,`.ce-paragraph {
    line-height: 1.6em;
    outline: none;
}

.ce-paragraph[data-placeholder]:empty::before{
  content: attr(data-placeholder);
  color: #707684;
  font-weight: normal;
  opacity: 0;
}

/** Show placeholder at the first paragraph if Editor is empty */
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {
  opacity: 1;
}

.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {
  opacity: 0;
}

.ce-paragraph p:first-of-type{
    margin-top: 0;
}

.ce-paragraph p:last-of-type{
    margin-bottom: 0;
}
`,""]),o.exports=n},function(o,n,i){o.exports=function(s){var r=[];return r.toString=function(){return this.map(function(a){var l=function(c,d){var u=c[1]||"",h=c[3];if(!h)return u;if(d&&typeof btoa=="function"){var p=(T=h,m=btoa(unescape(encodeURIComponent(JSON.stringify(T)))),x="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(m),"/*# ".concat(x," */")),f=h.sources.map(function(E){return"/*# sourceURL=".concat(h.sourceRoot||"").concat(E," */")});return[u].concat(f).concat([p]).join(`
`)}var T,m,x;return[u].join(`
`)}(a,s);return a[2]?"@media ".concat(a[2]," {").concat(l,"}"):l}).join("")},r.i=function(a,l,c){typeof a=="string"&&(a=[[null,a,""]]);var d={};if(c)for(var u=0;u<this.length;u++){var h=this[u][0];h!=null&&(d[h]=!0)}for(var p=0;p<a.length;p++){var f=[].concat(a[p]);c&&d[f[0]]||(l&&(f[2]?f[2]="".concat(l," and ").concat(f[2]):f[2]=l),r.push(f))}},r}},function(o,n,i){i.r(n),i.d(n,"default",function(){return a}),i(0);function s(l,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}function r(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */var a=function(){function l(c){var d=c.data,u=c.config,h=c.api,p=c.readOnly;(function(f,T){if(!(f instanceof T))throw new TypeError("Cannot call a class as a function")})(this,l),this.api=h,this.readOnly=p,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=u.placeholder?u.placeholder:l.DEFAULT_PLACEHOLDER,this._data={},this._element=null,this._preserveBlank=u.preserveBlank!==void 0&&u.preserveBlank,this.data=d}return r(l,null,[{key:"DEFAULT_PLACEHOLDER",get:function(){return""}}]),r(l,[{key:"onKeyUp",value:function(c){c.code!=="Backspace"&&c.code!=="Delete"||this._element.textContent===""&&(this._element.innerHTML="")}},{key:"drawView",value:function(){var c=document.createElement("DIV");return c.classList.add(this._CSS.wrapper,this._CSS.block),c.contentEditable=!1,c.dataset.placeholder=this.api.i18n.t(this._placeholder),this.readOnly||(c.contentEditable=!0,c.addEventListener("keyup",this.onKeyUp)),c}},{key:"render",value:function(){return this._element===null&&(this._element=this.drawView()),this.hydrate(),this._element}},{key:"merge",value:function(c){var d={text:this.data.text+c.text};this.data=d}},{key:"validate",value:function(c){return!(c.text.trim()===""&&!this._preserveBlank)}},{key:"save",value:function(c){return{text:c.innerHTML}}},{key:"onPaste",value:function(c){var d={text:c.detail.data.innerHTML};this.data=d}},{key:"hydrate",value:function(){var c=this;window.requestAnimationFrame(function(){c._element.innerHTML=c._data.text||""})}},{key:"data",get:function(){if(this._element!==null){var c=this._element.innerHTML;this._data.text=c}return this._data},set:function(c){this._data=c||{},this._element!==null&&this.hydrate()}}],[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{text:{br:!0}}}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"pasteConfig",get:function(){return{tags:["P"]}}},{key:"toolbox",get:function(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}]),l}()}]).default})})(Cf);const Sf=ii(zi);class Ts{constructor(){this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}static get sanitize(){return{b:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Kh,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+B"}}Ts.isInline=!0;Ts.title="Bold";class Bs{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Xh,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}Bs.isInline=!0;Bs.title="Italic";class _s{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new X}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=br,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const o=this.selection.findParentTag("A");if(o){this.selection.expandToTag(o),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML=Qh,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const o=e.getAttribute("href");this.nodes.input.value=o!=="null"?o:"",this.selection.save()}else this.nodes.button.innerHTML=br,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const o=new X;o.save(),this.selection.restore(),this.selection.removeFakeBackground(),o.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let o=this.nodes.input.value||"";if(!o.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(o)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),de("Incorrect Link pasted","warn",o);return}o=this.prepareLink(o),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(o),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e),e}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const o=/^\/[^/\s]/.test(e),n=e.substring(0,1)==="#",i=/^\/\/[^/\s]/.test(e);return!o&&!n&&!i&&(e="http://"+e),e}insertLink(e){const o=this.selection.findParentTag("A");o&&this.selection.expandToTag(o),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}_s.isInline=!0;_s.title="Link";class sl{constructor({data:e,api:o}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=o,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=M.make("div",this.CSS.wrapper),o=ef,n=M.make("div",this.CSS.info),i=M.make("div",this.CSS.title,{textContent:this.title}),s=M.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML=o,n.appendChild(i),n.appendChild(s),e.appendChild(n),e}}sl.isReadOnlySupported=!0;class Tf extends Ss{constructor(){super(...arguments),this.type=ri.Inline}get title(){return this.constructable[Cs.Title]}create(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}class Bf extends Ss{constructor(){super(...arguments),this.type=ri.Tune}create(e,o){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:o,data:e})}}class He extends Map{get blockTools(){const e=Array.from(this.entries()).filter(([,o])=>o.isBlock());return new He(e)}get inlineTools(){const e=Array.from(this.entries()).filter(([,o])=>o.isInline());return new He(e)}get blockTunes(){const e=Array.from(this.entries()).filter(([,o])=>o.isTune());return new He(e)}get internalTools(){const e=Array.from(this.entries()).filter(([,o])=>o.isInternal);return new He(e)}get externalTools(){const e=Array.from(this.entries()).filter(([,o])=>!o.isInternal);return new He(e)}}var _f=Object.defineProperty,If=Object.getOwnPropertyDescriptor,rl=(t,e,o,n)=>{for(var i=n>1?void 0:n?If(e,o):e,s=t.length-1,r;s>=0;s--)(r=t[s])&&(i=(n?r(e,o,i):r(i))||i);return n&&i&&_f(e,o,i),i};class Is extends Ss{constructor(){super(...arguments),this.type=ri.Block,this.inlineTools=new He,this.tunes=new He}create(e,o,n){return new this.constructable({data:e,block:o,readOnly:n,api:this.api.getMethodsForTool(this),config:this.settings})}get isReadOnlySupported(){return this.constructable[co.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[co.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[co.Toolbox],o=this.config[On.Toolbox];if(!ft(e)&&o!==!1)return o?Array.isArray(e)?Array.isArray(o)?o.map((n,i)=>{const s=e[i];return s?{...s,...n}:n}):[o]:Array.isArray(o)?o:[{...e,...o}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[co.ConversionConfig]}get enabledInlineTools(){return this.config[On.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[On.EnabledBlockTunes]}get pasteConfig(){return this.constructable[co.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,o=this.baseSanitizeConfig;if(ft(e))return o;const n={};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];Pe(s)?n[i]=Object.assign({},o,s):n[i]=s}return n}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(o=>Object.assign(e,o.sanitizeConfig)),Array.from(this.tunes.values()).forEach(o=>Object.assign(e,o.sanitizeConfig)),e}}rl([No],Is.prototype,"sanitizeConfig",1);rl([No],Is.prototype,"baseSanitizeConfig",1);class Mf{constructor(e,o,n){this.api=n,this.config=e,this.editorConfig=o}get(e){const{class:o,isInternal:n=!1,...i}=this.config[e],s=this.getConstructor(o);return new s({name:e,constructable:o,config:i,api:this.api,isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:n})}getConstructor(e){switch(!0){case e[Cs.IsInline]:return Tf;case e[ol.IsTune]:return Bf;default:return Is}}}class al{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:Za,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(e+1);if(!o)throw new Error("Unable to move Block down since it is already the last");const n=o.holder,i=n.getBoundingClientRect();let s=Math.abs(window.innerHeight-n.offsetHeight);i.top<window.innerHeight&&(s=window.scrollY+n.offsetHeight),window.scrollTo(0,s),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}}al.isTune=!0;class ll{constructor({api:e}){this.api=e}render(){return{icon:Yh,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}ll.isTune=!0;class cl{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:qh,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(e),n=this.api.blocks.getBlockByIndex(e-1);if(e===0||!o||!n)throw new Error("Unable to move Block up since it is already the first");const i=o.holder,s=n.holder,r=i.getBoundingClientRect(),a=s.getBoundingClientRect();let l;a.top>0?l=Math.abs(r.top)-Math.abs(a.top):l=Math.abs(r.top)+a.height,window.scrollBy(0,-1*l),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}}cl.isTune=!0;var Af=Object.defineProperty,Of=Object.getOwnPropertyDescriptor,Lf=(t,e,o,n)=>{for(var i=n>1?void 0:n?Of(e,o):e,s=t.length-1,r;s>=0;s--)(r=t[s])&&(i=(n?r(e,o,i):r(i))||i);return n&&i&&Af(e,o,i),i};class dl extends re{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new He,this.toolsUnavailable=new He}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=Pi({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new Mf(e,this.config,this.Editor.API);const o=this.getListOfPrepareFunctions(e);if(o.length===0)return Promise.resolve();await th(o,n=>{this.toolPrepareMethodSuccess(n)},n=>{this.toolPrepareMethodFallback(n)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(o=>{Object.assign(e,o.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{ve(e.reset)&&await e.reset()})}get internalTools(){return{bold:{class:Ts,isInternal:!0},italic:{class:Bs,isInternal:!0},link:{class:_s,isInternal:!0},paragraph:{class:Sf,inlineToolbar:!0,isInternal:!0},stub:{class:sl,isInternal:!0},moveUp:{class:cl,isInternal:!0},delete:{class:ll,isInternal:!0},moveDown:{class:al,isInternal:!0}}}toolPrepareMethodSuccess(e){const o=this.factory.get(e.toolName);if(o.isInline()){const n=["render","surround","checkState"].filter(i=>!o.create()[i]);if(n.length){de(`Incorrect Inline Tool: ${o.name}. Some of required methods is not implemented %o`,"warn",n),this.toolsUnavailable.set(o.name,o);return}}this.toolsAvailable.set(o.name,o)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const o=[];return Object.entries(e).forEach(([n,i])=>{o.push({function:ve(i.class.prepare)?i.class.prepare:()=>{},data:{toolName:n,config:i.config}})}),o}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(this.config.inlineToolbar!==!1){if(e.enabledInlineTools===!0){e.inlineTools=new He(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(o=>[o,this.inlineTools.get(o)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new He(e.enabledInlineTools.map(o=>[o,this.inlineTools.get(o)])))}}assignBlockTunesToBlockTool(e){if(e.enabledBlockTunes!==!1){if(Array.isArray(e.enabledBlockTunes)){const o=new He(e.enabledBlockTunes.map(n=>[n,this.blockTunes.get(n)]));e.tunes=new He([...o,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const o=new He(this.config.tunes.map(n=>[n,this.blockTunes.get(n)]));e.tunes=new He([...o,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const o=this.config.tools[e];if(!ve(o)&&!ve(o.class))throw Error(`Tool ${e} must be a constructor function or an object with function in the class property`)}}prepareConfig(){const e={};for(const o in this.config.tools)Pe(this.config.tools[o])?e[o]=this.config.tools[o]:e[o]={class:this.config.tools[o]};return e}}Lf([No],dl.prototype,"getAllInlineToolsSanitizeConfig",1);const Rf=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;-webkit-transform:translateX(-50%) translateY(8px) scale(.94);transform:translate(-50%) translateY(8px) scale(.94);opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease,-webkit-transform .15s ease;transition:opacity .25s ease,-webkit-transform .15s ease;transition:transform .15s ease,opacity .25s ease;transition:transform .15s ease,opacity .25s ease,-webkit-transform .15s ease;will-change:transform,opacity;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:translateX(-50%);transform:translate(-50%)}.ce-inline-toolbar--left-oriented{-webkit-transform:translateX(-23px) translateY(8px) scale(.94);transform:translate(-23px) translateY(8px) scale(.94)}.ce-inline-toolbar--left-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-23px);transform:translate(-23px)}.ce-inline-toolbar--right-oriented{-webkit-transform:translateX(-100%) translateY(8px) scale(.94);transform:translate(-100%) translateY(8px) scale(.94);margin-left:23px}.ce-inline-toolbar--right-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-100%);transform:translate(-100%)}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@media (min-width: 651px){.codex-editor--narrow .ce-block--focused{margin-right:-50px;padding-right:50px}}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}
`;class Nf extends re{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=ih(()=>{this.windowResize()},200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${_e.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.checkIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:o,InlineToolbar:n,ConversionToolbar:i}=this.Editor;return o.opened||n.opened||i.opened||e.toolbox.opened}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([e,o])=>o.flipper instanceof Ot).some(([e,o])=>o.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:e,BlockSettings:o,InlineToolbar:n,ConversionToolbar:i}=this.Editor;o.close(),n.close(),i.close(),e.toolbox.close()}checkIsMobile(){this.isMobile=window.innerWidth<Ua}make(){this.nodes.holder=M.getHolder(this.config.holder),this.nodes.wrapper=M.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=M.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const e="editor-js-styles";if(M.get(e))return;const o=M.make("style",null,{id:e,textContent:Rf.toString()});M.prepend(document.head,o)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",e=>{this.redactorClicked(e)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",e=>{this.documentTouched(e)},!0),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",e=>{this.documentTouched(e)},!0),this.readOnlyMutableListeners.on(document,"keydown",e=>{this.documentKeydown(e)},!0),this.readOnlyMutableListeners.on(document,"mousedown",e=>{this.documentClicked(e)},!0),this.readOnlyMutableListeners.on(document,"selectionchange",()=>{this.selectionChanged()},!0),this.readOnlyMutableListeners.on(window,"resize",()=>{this.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",Ni(o=>{const n=o.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||n&&e!==n&&(e=n,this.eventsDispatcher.emit(el,{block:this.Editor.BlockManager.getBlockByChildNode(n)}))},20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.checkIsMobile()}documentKeydown(e){switch(e.keyCode){case te.ENTER:this.enterPressed(e);break;case te.BACKSPACE:case te.DELETE:this.backspacePressed(e);break;case te.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e);break}}defaultBehaviour(e){const{currentBlock:o}=this.Editor.BlockManager,n=e.target.closest(`.${this.CSS.editorWrapper}`),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(o!==void 0&&n===null){this.Editor.BlockEvents.keydown(e);return}n||o&&i||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close())}backspacePressed(e){const{BlockManager:o,BlockSelection:n,Caret:i}=this.Editor;if(n.anyBlockSelected&&!X.isSelectionExists){const s=o.removeSelectedBlocks();i.setToBlock(o.insertDefaultBlockAtIndex(s,!0),i.positions.START),n.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:o,BlockSelection:n}=this.Editor,i=o.currentBlockIndex>=0;if(n.anyBlockSelected&&!X.isSelectionExists){n.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&i&&e.target.tagName==="BODY"){const s=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(s),this.Editor.BlockManager.highlightCurrentNode(),this.Editor.Toolbar.moveAndOpen(s)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){if(!e.isTrusted)return;const o=e.target;this.nodes.holder.contains(o)||X.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());const n=this.Editor.BlockSettings.nodes.wrapper.contains(o),i=this.Editor.Toolbar.nodes.settingsToggler.contains(o),s=n||i;if(this.Editor.BlockSettings.opened&&!s){this.Editor.BlockSettings.close();const r=this.Editor.BlockManager.getBlockByChildNode(o);this.Editor.Toolbar.moveAndOpen(r)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let o=e.target;if(o===this.nodes.redactor){const n=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;o=document.elementFromPoint(n,i)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(o),this.Editor.BlockManager.highlightCurrentNode()}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){const{BlockSelection:o}=this.Editor;if(!X.isCollapsed)return;const n=()=>{e.stopImmediatePropagation(),e.stopPropagation()},i=e.target,s=e.metaKey||e.ctrlKey;if(M.isAnchor(i)&&s){n();const c=i.getAttribute("href"),d=rh(c);lh(d);return}const r=this.Editor.BlockManager.getBlockByIndex(-1),a=M.offset(r.holder).bottom,l=e.pageY;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!o.anyBlockSelected&&a<l){n();const{BlockManager:c,Caret:d,Toolbar:u}=this.Editor;(!c.lastBlock.tool.isDefault||!c.lastBlock.isEmpty)&&c.insertAtEnd(),d.setToTheLastBlock(),u.moveAndOpen(c.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:o}=this.Editor,n=X.anchorElement;if(e.isCrossBlockSelectionStarted&&o.anyBlockSelected&&X.get().removeAllRanges(),!n){X.range||this.Editor.InlineToolbar.close();return}const i=n.closest(`.${_e.CSS.content}`)===null;if(i&&(this.Editor.InlineToolbar.containsNode(n)||this.Editor.InlineToolbar.close(),n.dataset.inlineToolbar!=="true"))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(n);const s=i!==!0;this.Editor.InlineToolbar.tryToShow(!0,s)}}const Pf={BlocksAPI:vh,CaretAPI:kh,EventsAPI:yh,I18nAPI:ks,API:wh,InlineToolbarAPI:xh,ListenersAPI:Eh,NotifierAPI:Bh,ReadOnlyAPI:_h,SanitizerAPI:Nh,SaverAPI:Ph,SelectionAPI:Dh,StylesAPI:Fh,ToolbarAPI:Hh,TooltipAPI:Uh,UiAPI:zh,BlockSettings:sf,ConversionToolbar:Xe,Toolbar:uf,InlineToolbar:hf,BlockEvents:ff,BlockManager:mf,BlockSelection:bf,Caret:Un,CrossBlockSelection:vf,DragNDrop:kf,ModificationsObserver:yf,Paste:il,ReadOnly:wf,RectangleSelection:Xo,Renderer:xf,Saver:Ef,Tools:dl,UI:Nf};class Df{constructor(e){this.moduleInstances={},this.eventsDispatcher=new si;let o,n;this.isReady=new Promise((i,s)=>{o=i,n=s}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:i,Caret:s,UI:r,ModificationsObserver:a}=this.moduleInstances;r.checkEmptiness(),a.enable(),this.configuration.autofocus&&(s.setToBlock(i.blocks[0],s.positions.START),i.highlightCurrentNode()),o()}).catch(i=>{de(`Editor.js is not ready because of ${i}`,"error"),n(i)})}set configuration(e){var o,n;Pe(e)?this.config={...e}:this.config={holder:e},Di(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=Ha.VERBOSE),Qu(this.config.logLevel),Di(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const i={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(ft(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[i]}),this.config.readOnly=this.config.readOnly||!1,(o=this.config.i18n)!=null&&o.messages&&Ke.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((n=this.config.i18n)==null?void 0:n.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:o}=this.config;if(e&&o)throw Error("holderId and holder param can't assign at the same time.");if(Kt(o)&&!M.get(o))throw Error(`element with ID ${o} is missing. Pass correct holder's ID.`);if(o&&Pe(o)&&!M.isElement(o))throw Error("holder value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((e,o)=>e.then(async()=>{try{await this.moduleInstances[o].prepare()}catch(n){if(n instanceof Wa)throw new Error(n.message);de(`Module ${o} was skipped because of %o`,"warn",n)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(Pf).forEach(([e,o])=>{try{this.moduleInstances[e]=new o({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(n){de("[constructModules]",`Module ${e} skipped because`,"error",n)}})}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const o={};for(const n in this.moduleInstances)n!==e&&(o[n]=this.moduleInstances[n]);return o}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class Ff{static get version(){return"2.28.2"}constructor(e){let o=()=>{};Pe(e)&&ve(e.onReady)&&(o=e.onReady);const n=new Df(e);this.isReady=n.isReady.then(()=>{this.exportAPI(n),o()})}exportAPI(e){const o=["configuration"],n=()=>{Object.values(e.moduleInstances).forEach(i=>{ve(i.destroy)&&i.destroy(),i.listeners.removeAll()}),e=null;for(const i in this)Object.prototype.hasOwnProperty.call(this,i)&&delete this[i];Object.setPrototypeOf(this,null)};o.forEach(i=>{this[i]=e[i]}),this.destroy=n,Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([i,s])=>{Object.entries(s).forEach(([r,a])=>{this[a]=e.moduleInstances.API.methods[i][r]})})}}function ai(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ul={exports:{}};(function(t,e){(function(o,n){t.exports=n()})(self,function(){return(()=>{var o={384:(r,a,l)=>{l.d(a,{Z:()=>u});var c=l(645),d=l.n(c)()(function(h){return h[1]});d.push([r.id,`.cdx-nested-list {
  margin: 0;
  padding: 0;
  outline: none;
  counter-reset: item;
  list-style: none;
}

  .cdx-nested-list__item {
    line-height: 1.6em;
    display: flex;
    margin: 2px 0;
  }

  .cdx-nested-list__item [contenteditable]{
      outline: none;
    }

  .cdx-nested-list__item-body {
      flex-grow: 2;
    }

  .cdx-nested-list__item-content,
    .cdx-nested-list__item-children {
      flex-basis: 100%;
    }

  .cdx-nested-list__item-content {
      word-break: break-word;
      white-space: pre-wrap;
    }

  .cdx-nested-list__item-children {}

  .cdx-nested-list__item::before {
      counter-increment: item;
      margin-right: 5px;
      white-space: nowrap;
    }

  .cdx-nested-list--ordered > .cdx-nested-list__item::before {
    content: counters(item, ".") ". ";
  }

  .cdx-nested-list--unordered > .cdx-nested-list__item::before {
    content: "";
  }

  .cdx-nested-list__settings {
    display: flex;
  }

  .cdx-nested-list__settings .cdx-settings-button {
      width: 50%;
    }
`,""]);const u=d},645:r=>{r.exports=function(a){var l=[];return l.toString=function(){return this.map(function(c){var d=a(c);return c[2]?"@media ".concat(c[2]," {").concat(d,"}"):d}).join("")},l.i=function(c,d,u){typeof c=="string"&&(c=[[null,c,""]]);var h={};if(u)for(var p=0;p<this.length;p++){var f=this[p][0];f!=null&&(h[f]=!0)}for(var T=0;T<c.length;T++){var m=[].concat(c[T]);u&&h[m[0]]||(d&&(m[2]?m[2]="".concat(d," and ").concat(m[2]):m[2]=d),l.push(m))}},l}},379:(r,a,l)=>{var c,d=function(){var I={};return function(O){if(I[O]===void 0){var v=document.querySelector(O);if(window.HTMLIFrameElement&&v instanceof window.HTMLIFrameElement)try{v=v.contentDocument.head}catch{v=null}I[O]=v}return I[O]}}(),u=[];function h(I){for(var O=-1,v=0;v<u.length;v++)if(u[v].identifier===I){O=v;break}return O}function p(I,O){for(var v={},b=[],C=0;C<I.length;C++){var S=I[C],L=O.base?S[0]+O.base:S[0],A=v[L]||0,$="".concat(L," ").concat(A);v[L]=A+1;var R=h($),q={css:S[1],media:S[2],sourceMap:S[3]};R!==-1?(u[R].references++,u[R].updater(q)):u.push({identifier:$,updater:B(q,O),references:1}),b.push($)}return b}function f(I){var O=document.createElement("style"),v=I.attributes||{};if(v.nonce===void 0){var b=l.nc;b&&(v.nonce=b)}if(Object.keys(v).forEach(function(S){O.setAttribute(S,v[S])}),typeof I.insert=="function")I.insert(O);else{var C=d(I.insert||"head");if(!C)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");C.appendChild(O)}return O}var T,m=(T=[],function(I,O){return T[I]=O,T.filter(Boolean).join(`
`)});function x(I,O,v,b){var C=v?"":b.media?"@media ".concat(b.media," {").concat(b.css,"}"):b.css;if(I.styleSheet)I.styleSheet.cssText=m(O,C);else{var S=document.createTextNode(C),L=I.childNodes;L[O]&&I.removeChild(L[O]),L.length?I.insertBefore(S,L[O]):I.appendChild(S)}}function E(I,O,v){var b=v.css,C=v.media,S=v.sourceMap;if(C?I.setAttribute("media",C):I.removeAttribute("media"),S&&typeof btoa<"u"&&(b+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(S))))," */")),I.styleSheet)I.styleSheet.cssText=b;else{for(;I.firstChild;)I.removeChild(I.firstChild);I.appendChild(document.createTextNode(b))}}var w=null,y=0;function B(I,O){var v,b,C;if(O.singleton){var S=y++;v=w||(w=f(O)),b=x.bind(null,v,S,!1),C=x.bind(null,v,S,!0)}else v=f(O),b=E.bind(null,v,O),C=function(){(function(L){if(L.parentNode===null)return!1;L.parentNode.removeChild(L)})(v)};return b(I),function(L){if(L){if(L.css===I.css&&L.media===I.media&&L.sourceMap===I.sourceMap)return;b(I=L)}else C()}}r.exports=function(I,O){(O=O||{}).singleton||typeof O.singleton=="boolean"||(O.singleton=(c===void 0&&(c=!!(window&&document&&document.all&&!window.atob)),c));var v=p(I=I||[],O);return function(b){if(b=b||[],Object.prototype.toString.call(b)==="[object Array]"){for(var C=0;C<v.length;C++){var S=h(v[C]);u[S].references--}for(var L=p(b,O),A=0;A<v.length;A++){var $=h(v[A]);u[$].references===0&&(u[$].updater(),u.splice($,1))}v=L}}}}},n={};function i(r){var a=n[r];if(a!==void 0)return a.exports;var l=n[r]={id:r,exports:{}};return o[r](l,l.exports,i),l.exports}i.n=r=>{var a=r&&r.__esModule?()=>r.default:()=>r;return i.d(a,{a}),a},i.d=(r,a)=>{for(var l in a)i.o(a,l)&&!i.o(r,l)&&Object.defineProperty(r,l,{enumerable:!0,get:a[l]})},i.o=(r,a)=>Object.prototype.hasOwnProperty.call(r,a);var s={};return(()=>{function r(T,m=null,x={}){const E=document.createElement(T);Array.isArray(m)?E.classList.add(...m):m&&E.classList.add(m);for(const w in x)E[w]=x[w];return E}function a(T){const m=r("div");return m.appendChild(T),m.innerHTML}function l(T){let m;return T.nodeType!==Node.ELEMENT_NODE?m=T.textContent:(m=T.innerHTML,m=m.replaceAll("<br>","")),m.trim().length===0}i.d(s,{default:()=>f});class c{constructor(){this.savedFakeCaret=void 0}save(){const m=c.range,x=r("span");x.hidden=!0,m.insertNode(x),this.savedFakeCaret=x}restore(){if(!this.savedFakeCaret)return;const m=window.getSelection(),x=new Range;x.setStartAfter(this.savedFakeCaret),x.setEndAfter(this.savedFakeCaret),m.removeAllRanges(),m.addRange(x),setTimeout(()=>{this.savedFakeCaret.remove()},150)}static get range(){const m=window.getSelection();return m&&m.rangeCount?m.getRangeAt(0):null}static extractFragmentFromCaretPositionTillTheEnd(){const m=window.getSelection();if(!m.rangeCount)return;const x=m.getRangeAt(0);let E=x.startContainer;E.nodeType!==Node.ELEMENT_NODE&&(E=E.parentNode);const w=E.closest("[contenteditable]");x.deleteContents();const y=x.cloneRange();return y.selectNodeContents(w),y.setStart(x.endContainer,x.endOffset),y.extractContents()}static focus(m,x=!0){const E=document.createRange(),w=window.getSelection();E.selectNodeContents(m),E.collapse(x),w.removeAllRanges(),w.addRange(E)}static isAtStart(){const m=window.getSelection();if(m.focusOffset>0)return!1;const x=m.focusNode;return c.getHigherLevelSiblings(x,"left").every(E=>l(E))}static getHigherLevelSiblings(m,x="left"){let E=m;const w=[];for(;E.parentNode&&E.parentNode.contentEditable!=="true";)E=E.parentNode;const y=x==="left"?"previousSibling":"nextSibling";for(;E[y];)E=E[y],w.push(E);return w}}const d='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>';var u=i(379),h=i.n(u),p=i(384);h()(p.Z,{insert:"head",singleton:!1}),p.Z.locals;class f{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:d,title:"List"}}constructor({data:m,config:x,api:E,readOnly:w}){this.nodes={wrapper:null},this.api=E,this.readOnly=w,this.config=x,this.defaultListStyle=this.config.defaultStyle==="ordered"?"ordered":"unordered";const y={style:this.defaultListStyle,items:[]};this.data=m&&Object.keys(m).length?m:y,this.caret=new c}render(){return this.nodes.wrapper=this.makeListWrapper(this.data.style,[this.CSS.baseBlock]),this.data.items.length?this.appendItems(this.data.items,this.nodes.wrapper):this.appendItems([{content:"",items:[]}],this.nodes.wrapper),this.readOnly||this.nodes.wrapper.addEventListener("keydown",m=>{switch(m.key){case"Enter":this.enterPressed(m);break;case"Backspace":this.backspace(m);break;case"Tab":m.shiftKey?this.shiftTab(m):this.addTab(m)}},!1),this.nodes.wrapper}renderSettings(){return[{name:"unordered",label:this.api.i18n.t("Unordered"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>'},{name:"ordered",label:this.api.i18n.t("Ordered"),icon:d}].map(m=>({name:m.name,icon:m.icon,label:m.label,isActive:this.data.style===m.name,closeOnActivate:!0,onActivate:()=>{this.listStyle=m.name}}))}static get pasteConfig(){return{tags:["OL","UL","LI"]}}onPaste(m){const x=m.detail.data;this.data=this.pasteHandler(x);const E=this.nodes.wrapper;E&&E.parentNode.replaceChild(this.render(),E)}pasteHandler(m){const{tagName:x}=m;let E,w;switch(x){case"OL":E="ordered",w="ol";break;case"UL":case"LI":E="unordered",w="ul"}const y={style:E,items:[]},B=I=>Array.from(I.querySelectorAll(":scope > li")).map(O=>{var C;const v=O.querySelector(`:scope > ${w}`),b=v?B(v):[];return{content:((C=O==null?void 0:O.firstChild)==null?void 0:C.textContent)||"",items:b}});return y.items=B(m),y}appendItems(m,x){m.forEach(E=>{const w=this.createItem(E.content,E.items);x.appendChild(w)})}createItem(m,x=[]){const E=r("li",this.CSS.item),w=r("div",this.CSS.itemBody),y=r("div",this.CSS.itemContent,{innerHTML:m,contentEditable:!this.readOnly});return w.appendChild(y),E.appendChild(w),x&&x.length>0&&this.addChildrenList(E,x),E}save(){const m=x=>Array.from(x.querySelectorAll(`:scope > .${this.CSS.item}`)).map(E=>{const w=E.querySelector(`.${this.CSS.itemChildren}`);return{content:this.getItemContent(E),items:w?m(w):[]}});return{style:this.data.style,items:m(this.nodes.wrapper)}}addChildrenList(m,x){const E=m.querySelector(`.${this.CSS.itemBody}`),w=this.makeListWrapper(void 0,[this.CSS.itemChildren]);this.appendItems(x,w),E.appendChild(w)}makeListWrapper(m=this.listStyle,x=[]){const E=m==="ordered"?"ol":"ul",w=m==="ordered"?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered;return x.push(w),r(E,[this.CSS.wrapper,...x])}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-nested-list",wrapperOrdered:"cdx-nested-list--ordered",wrapperUnordered:"cdx-nested-list--unordered",item:"cdx-nested-list__item",itemBody:"cdx-nested-list__item-body",itemContent:"cdx-nested-list__item-content",itemChildren:"cdx-nested-list__item-children",settingsWrapper:"cdx-nested-list__settings",settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive}}get listStyle(){return this.data.style||this.defaultListStyle}set listStyle(m){const x=Array.from(this.nodes.wrapper.querySelectorAll(`.${this.CSS.wrapper}`));x.push(this.nodes.wrapper),x.forEach(E=>{E.classList.toggle(this.CSS.wrapperUnordered,m==="unordered"),E.classList.toggle(this.CSS.wrapperOrdered,m==="ordered")}),this.data.style=m}get currentItem(){let m=window.getSelection().anchorNode;return m.nodeType!==Node.ELEMENT_NODE&&(m=m.parentNode),m.closest(`.${this.CSS.item}`)}enterPressed(m){const x=this.currentItem;m.stopPropagation(),m.preventDefault();const E=this.getItemContent(x).trim().length===0,w=x.parentNode===this.nodes.wrapper,y=x.nextElementSibling===null;if(w&&y&&E)return void this.getOutOfList();if(y&&E)return void this.unshiftItem();const B=a(c.extractFragmentFromCaretPositionTillTheEnd()),I=x.querySelector(`.${this.CSS.itemChildren}`),O=this.createItem(B,void 0);I&&Array.from(I.querySelectorAll(`.${this.CSS.item}`)).length>0?I.prepend(O):x.after(O),this.focusItem(O)}unshiftItem(){const m=this.currentItem,x=m.parentNode.closest(`.${this.CSS.item}`);if(!x)return;this.caret.save(),x.after(m),this.caret.restore();const E=x.querySelector(`.${this.CSS.itemChildren}`);E.children.length===0&&E.remove()}getItemContent(m){const x=m.querySelector(`.${this.CSS.itemContent}`);return l(x)?"":x.innerHTML}focusItem(m,x=!0){const E=m.querySelector(`.${this.CSS.itemContent}`);c.focus(E,x)}getOutOfList(){this.currentItem.remove(),this.api.blocks.insert(),this.api.caret.setToBlock(this.api.blocks.getCurrentBlockIndex())}backspace(m){if(!c.isAtStart())return;m.preventDefault();const x=this.currentItem,E=x.previousSibling,w=x.parentNode.closest(`.${this.CSS.item}`);if(!E&&!w)return;let y;if(m.stopPropagation(),E){const v=E.querySelectorAll(`.${this.CSS.item}`);y=Array.from(v).pop()||E}else y=w;const B=a(c.extractFragmentFromCaretPositionTillTheEnd()),I=y.querySelector(`.${this.CSS.itemContent}`);c.focus(I,!1),this.caret.save(),I.insertAdjacentHTML("beforeend",B);let O=x.querySelectorAll(`.${this.CSS.itemChildren} > .${this.CSS.item}`);O=Array.from(O),O=O.filter(v=>v.parentNode.closest(`.${this.CSS.item}`)===x),O.reverse().forEach(v=>{E?y.after(v):x.after(v)}),x.remove(),this.caret.restore()}addTab(m){m.stopPropagation(),m.preventDefault();const x=this.currentItem,E=x.previousSibling;if(!E)return;const w=E.querySelector(`.${this.CSS.itemChildren}`);if(this.caret.save(),w)w.appendChild(x);else{const y=this.makeListWrapper(void 0,[this.CSS.itemChildren]),B=E.querySelector(`.${this.CSS.itemBody}`);y.appendChild(x),B.appendChild(y)}this.caret.restore()}shiftTab(m){m.stopPropagation(),m.preventDefault(),this.unshiftItem()}static joinRecursive(m){return m.items.map(x=>`${x.content} ${f.joinRecursive(x)}`).join("")}static get conversionConfig(){return{export:m=>f.joinRecursive(m),import:m=>({items:[{content:m,items:[]}],style:"unordered"})}}}})(),s.default})()})})(ul);var Hf=ul.exports;const jf=ai(Hf);var hl={exports:{}};(function(t,e){(function(o,n){t.exports=n()})(window,function(){return function(o){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return o[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=o,i.c=n,i.d=function(s,r,a){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:a})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var l in s)i.d(a,l,(function(c){return s[c]}).bind(null,l));return a},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="/",i(i.s=4)}([function(o,n,i){var s=i(1),r=i(2);typeof(r=r.__esModule?r.default:r)=="string"&&(r=[[o.i,r,""]]);var a={insert:"head",singleton:!1};s(r,a),o.exports=r.locals||{}},function(o,n,i){var s,r=function(){return s===void 0&&(s=!!(window&&document&&document.all&&!window.atob)),s},a=function(){var w={};return function(y){if(w[y]===void 0){var B=document.querySelector(y);if(window.HTMLIFrameElement&&B instanceof window.HTMLIFrameElement)try{B=B.contentDocument.head}catch{B=null}w[y]=B}return w[y]}}(),l=[];function c(w){for(var y=-1,B=0;B<l.length;B++)if(l[B].identifier===w){y=B;break}return y}function d(w,y){for(var B={},I=[],O=0;O<w.length;O++){var v=w[O],b=y.base?v[0]+y.base:v[0],C=B[b]||0,S="".concat(b," ").concat(C);B[b]=C+1;var L=c(S),A={css:v[1],media:v[2],sourceMap:v[3]};L!==-1?(l[L].references++,l[L].updater(A)):l.push({identifier:S,updater:E(A,y),references:1}),I.push(S)}return I}function u(w){var y=document.createElement("style"),B=w.attributes||{};if(B.nonce===void 0){var I=i.nc;I&&(B.nonce=I)}if(Object.keys(B).forEach(function(v){y.setAttribute(v,B[v])}),typeof w.insert=="function")w.insert(y);else{var O=a(w.insert||"head");if(!O)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");O.appendChild(y)}return y}var h,p=(h=[],function(w,y){return h[w]=y,h.filter(Boolean).join(`
`)});function f(w,y,B,I){var O=B?"":I.media?"@media ".concat(I.media," {").concat(I.css,"}"):I.css;if(w.styleSheet)w.styleSheet.cssText=p(y,O);else{var v=document.createTextNode(O),b=w.childNodes;b[y]&&w.removeChild(b[y]),b.length?w.insertBefore(v,b[y]):w.appendChild(v)}}function T(w,y,B){var I=B.css,O=B.media,v=B.sourceMap;if(O?w.setAttribute("media",O):w.removeAttribute("media"),v&&typeof btoa<"u"&&(I+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(v))))," */")),w.styleSheet)w.styleSheet.cssText=I;else{for(;w.firstChild;)w.removeChild(w.firstChild);w.appendChild(document.createTextNode(I))}}var m=null,x=0;function E(w,y){var B,I,O;if(y.singleton){var v=x++;B=m||(m=u(y)),I=f.bind(null,B,v,!1),O=f.bind(null,B,v,!0)}else B=u(y),I=T.bind(null,B,y),O=function(){(function(b){if(b.parentNode===null)return!1;b.parentNode.removeChild(b)})(B)};return I(w),function(b){if(b){if(b.css===w.css&&b.media===w.media&&b.sourceMap===w.sourceMap)return;I(w=b)}else O()}}o.exports=function(w,y){(y=y||{}).singleton||typeof y.singleton=="boolean"||(y.singleton=r());var B=d(w=w||[],y);return function(I){if(I=I||[],Object.prototype.toString.call(I)==="[object Array]"){for(var O=0;O<B.length;O++){var v=c(B[O]);l[v].references--}for(var b=d(I,y),C=0;C<B.length;C++){var S=c(B[C]);l[S].references===0&&(l[S].updater(),l.splice(S,1))}B=b}}}},function(o,n,i){(n=i(3)(!1)).push([o.i,`.cdx-underline {
    text-decoration: underline;
}
`,""]),o.exports=n},function(o,n,i){o.exports=function(s){var r=[];return r.toString=function(){return this.map(function(a){var l=function(c,d){var u=c[1]||"",h=c[3];if(!h)return u;if(d&&typeof btoa=="function"){var p=(T=h,m=btoa(unescape(encodeURIComponent(JSON.stringify(T)))),x="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(m),"/*# ".concat(x," */")),f=h.sources.map(function(E){return"/*# sourceURL=".concat(h.sourceRoot||"").concat(E," */")});return[u].concat(f).concat([p]).join(`
`)}var T,m,x;return[u].join(`
`)}(a,s);return a[2]?"@media ".concat(a[2]," {").concat(l,"}"):l}).join("")},r.i=function(a,l,c){typeof a=="string"&&(a=[[null,a,""]]);var d={};if(c)for(var u=0;u<this.length;u++){var h=this[u][0];h!=null&&(d[h]=!0)}for(var p=0;p<a.length;p++){var f=[].concat(a[p]);c&&d[f[0]]||(l&&(f[2]?f[2]="".concat(l," and ").concat(f[2]):f[2]=l),r.push(f))}},r}},function(o,n,i){i.r(n),i.d(n,"default",function(){return a}),i(0);function s(l){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function r(l,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,(h=u.key,p=void 0,p=function(f,T){if(s(f)!=="object"||f===null)return f;var m=f[Symbol.toPrimitive];if(m!==void 0){var x=m.call(f,T||"default");if(s(x)!=="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(f)}(h,"string"),s(p)==="symbol"?p:String(p)),u)}var h,p}var a=function(){function l(h){var p=h.api;(function(f,T){if(!(f instanceof T))throw new TypeError("Cannot call a class as a function")})(this,l),this.api=p,this.button=null,this.tag="U",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}var c,d,u;return c=l,u=[{key:"CSS",get:function(){return"cdx-underline"}},{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{u:{class:l.CSS}}}}],(d=[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}},{key:"surround",value:function(h){if(h){var p=this.api.selection.findParentTag(this.tag,l.CSS);p?this.unwrap(p):this.wrap(h)}}},{key:"wrap",value:function(h){var p=document.createElement(this.tag);p.classList.add(l.CSS),p.appendChild(h.extractContents()),h.insertNode(p),this.api.selection.expandToTag(p)}},{key:"unwrap",value:function(h){this.api.selection.expandToTag(h);var p=window.getSelection(),f=p.getRangeAt(0),T=f.extractContents();h.parentNode.removeChild(h),f.insertNode(T),p.removeAllRanges(),p.addRange(f)}},{key:"checkState",value:function(){var h=this.api.selection.findParentTag(this.tag,l.CSS);this.button.classList.toggle(this.iconClasses.active,!!h)}},{key:"toolboxIcon",get:function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7.5V11.5C9 12.2956 9.31607 13.0587 9.87868 13.6213C10.4413 14.1839 11.2044 14.5 12 14.5C12.7956 14.5 13.5587 14.1839 14.1213 13.6213C14.6839 13.0587 15 12.2956 15 11.5V7.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.71429 18H16.2857"/></svg>'}}])&&r(c.prototype,d),u&&r(c,u),Object.defineProperty(c,"prototype",{writable:!1}),l}()}]).default})})(hl);var $f=hl.exports;const Uf=ai($f);var fl={exports:{}};(function(t,e){(function(o,n){t.exports=n()})(window,function(){return function(o){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return o[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=o,i.c=n,i.d=function(s,r,a){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:a})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var l in s)i.d(a,l,(function(c){return s[c]}).bind(null,l));return a},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="/",i(i.s=4)}([function(o,n,i){var s=i(1),r=i(2);typeof(r=r.__esModule?r.default:r)=="string"&&(r=[[o.i,r,""]]);var a={insert:"head",singleton:!1};s(r,a),o.exports=r.locals||{}},function(o,n,i){var s,r=function(){return s===void 0&&(s=!!(window&&document&&document.all&&!window.atob)),s},a=function(){var w={};return function(y){if(w[y]===void 0){var B=document.querySelector(y);if(window.HTMLIFrameElement&&B instanceof window.HTMLIFrameElement)try{B=B.contentDocument.head}catch{B=null}w[y]=B}return w[y]}}(),l=[];function c(w){for(var y=-1,B=0;B<l.length;B++)if(l[B].identifier===w){y=B;break}return y}function d(w,y){for(var B={},I=[],O=0;O<w.length;O++){var v=w[O],b=y.base?v[0]+y.base:v[0],C=B[b]||0,S="".concat(b," ").concat(C);B[b]=C+1;var L=c(S),A={css:v[1],media:v[2],sourceMap:v[3]};L!==-1?(l[L].references++,l[L].updater(A)):l.push({identifier:S,updater:E(A,y),references:1}),I.push(S)}return I}function u(w){var y=document.createElement("style"),B=w.attributes||{};if(B.nonce===void 0){var I=i.nc;I&&(B.nonce=I)}if(Object.keys(B).forEach(function(v){y.setAttribute(v,B[v])}),typeof w.insert=="function")w.insert(y);else{var O=a(w.insert||"head");if(!O)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");O.appendChild(y)}return y}var h,p=(h=[],function(w,y){return h[w]=y,h.filter(Boolean).join(`
`)});function f(w,y,B,I){var O=B?"":I.media?"@media ".concat(I.media," {").concat(I.css,"}"):I.css;if(w.styleSheet)w.styleSheet.cssText=p(y,O);else{var v=document.createTextNode(O),b=w.childNodes;b[y]&&w.removeChild(b[y]),b.length?w.insertBefore(v,b[y]):w.appendChild(v)}}function T(w,y,B){var I=B.css,O=B.media,v=B.sourceMap;if(O?w.setAttribute("media",O):w.removeAttribute("media"),v&&btoa&&(I+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(v))))," */")),w.styleSheet)w.styleSheet.cssText=I;else{for(;w.firstChild;)w.removeChild(w.firstChild);w.appendChild(document.createTextNode(I))}}var m=null,x=0;function E(w,y){var B,I,O;if(y.singleton){var v=x++;B=m||(m=u(y)),I=f.bind(null,B,v,!1),O=f.bind(null,B,v,!0)}else B=u(y),I=T.bind(null,B,y),O=function(){(function(b){if(b.parentNode===null)return!1;b.parentNode.removeChild(b)})(B)};return I(w),function(b){if(b){if(b.css===w.css&&b.media===w.media&&b.sourceMap===w.sourceMap)return;I(w=b)}else O()}}o.exports=function(w,y){(y=y||{}).singleton||typeof y.singleton=="boolean"||(y.singleton=r());var B=d(w=w||[],y);return function(I){if(I=I||[],Object.prototype.toString.call(I)==="[object Array]"){for(var O=0;O<B.length;O++){var v=c(B[O]);l[v].references--}for(var b=d(I,y),C=0;C<B.length;C++){var S=c(B[C]);l[S].references===0&&(l[S].updater(),l.splice(S,1))}B=b}}}},function(o,n,i){(n=i(3)(!1)).push([o.i,`.cdx-strikethrough {
    text-decoration: line-through;
}
`,""]),o.exports=n},function(o,n,i){o.exports=function(s){var r=[];return r.toString=function(){return this.map(function(a){var l=function(c,d){var u=c[1]||"",h=c[3];if(!h)return u;if(d&&typeof btoa=="function"){var p=(T=h,m=btoa(unescape(encodeURIComponent(JSON.stringify(T)))),x="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(m),"/*# ".concat(x," */")),f=h.sources.map(function(E){return"/*# sourceURL=".concat(h.sourceRoot||"").concat(E," */")});return[u].concat(f).concat([p]).join(`
`)}var T,m,x;return[u].join(`
`)}(a,s);return a[2]?"@media ".concat(a[2]," {").concat(l,"}"):l}).join("")},r.i=function(a,l,c){typeof a=="string"&&(a=[[null,a,""]]);var d={};if(c)for(var u=0;u<this.length;u++){var h=this[u][0];h!=null&&(d[h]=!0)}for(var p=0;p<a.length;p++){var f=[].concat(a[p]);c&&d[f[0]]||(l&&(f[2]?f[2]="".concat(l," and ").concat(f[2]):f[2]=l),r.push(f))}},r}},function(o,n,i){i.r(n),i.d(n,"default",function(){return a}),i(0);function s(l,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}function r(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}var a=function(){function l(c){var d=c.api;(function(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")})(this,l),this.api=d,this.button=null,this.tag="S",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}return r(l,null,[{key:"CSS",get:function(){return"cdx-strikethrough"}}]),r(l,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}},{key:"surround",value:function(c){if(c){var d=this.api.selection.findParentTag(this.tag,l.CSS);d?this.unwrap(d):this.wrap(c)}}},{key:"wrap",value:function(c){var d=document.createElement(this.tag);d.classList.add(l.CSS),d.appendChild(c.extractContents()),c.insertNode(d),this.api.selection.expandToTag(d)}},{key:"unwrap",value:function(c){this.api.selection.expandToTag(c);var d=window.getSelection(),u=d.getRangeAt(0),h=u.extractContents();c.parentNode.removeChild(c),u.insertNode(h),d.removeAllRanges(),d.addRange(u)}},{key:"checkState",value:function(){var c=this.api.selection.findParentTag(this.tag,l.CSS);this.button.classList.toggle(this.iconClasses.active,!!c)}},{key:"toolboxIcon",get:function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 8.50001C13.5 7 10.935 6.66476 9.75315 7.79706C9.27092 8.25909 9 8.88574 9 9.53915C9 10.1926 9.27092 10.8192 9.75315 11.2812C10.9835 12.46 13.0165 11.5457 14.2468 12.7244C14.7291 13.1865 15 13.8131 15 14.4665C15 15.1199 14.7291 15.7466 14.2468 16.2086C12.8659 17.5317 10 17.5 9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12H18"/></svg>'}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{s:{class:l.CSS}}}}]),l}()}]).default})})(fl);var zf=fl.exports;const Wf=ai(zf);var pl={exports:{}};(function(t,e){(function(o,n){t.exports=n()})(window,function(){return function(o){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return o[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=o,i.c=n,i.d=function(s,r,a){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:a})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var l in s)i.d(a,l,(function(c){return s[c]}).bind(null,l));return a},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="/",i(i.s=5)}([function(o,n,i){var s=i(1);typeof s=="string"&&(s=[[o.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(3)(s,r),s.locals&&(o.exports=s.locals)},function(o,n,i){(o.exports=i(2)(!1)).push([o.i,`.change-case-action {
    z-index: 90;
    user-select: none;
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    -o-user-select: none;    
}

.change-case-tool {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    padding: 5px 10px;
    font-size: 14px;
    line-height: 20px;
    font-weight: 500;
    cursor: pointer;
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
}

.change-case-tool:hover {
    background: #eff2f5;
}

.change-case-toolbar__label {
    color: #707684;
    font-size: 11px;
    font-weight: 500;
    letter-spacing: .33px;
    padding: 10px 10px 5px;
    text-transform: uppercase;
    cursor: pointer;
}`,""])},function(o,n){o.exports=function(i){var s=[];return s.toString=function(){return this.map(function(r){var a=function(l,c){var d=l[1]||"",u=l[3];if(!u)return d;if(c&&typeof btoa=="function"){var h=(f=u,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(f))))+" */"),p=u.sources.map(function(T){return"/*# sourceURL="+u.sourceRoot+T+" */"});return[d].concat(p).concat([h]).join(`
`)}var f;return[d].join(`
`)}(r,i);return r[2]?"@media "+r[2]+"{"+a+"}":a}).join("")},s.i=function(r,a){typeof r=="string"&&(r=[[null,r,""]]);for(var l={},c=0;c<this.length;c++){var d=this[c][0];typeof d=="number"&&(l[d]=!0)}for(c=0;c<r.length;c++){var u=r[c];typeof u[0]=="number"&&l[u[0]]||(a&&!u[2]?u[2]=a:a&&(u[2]="("+u[2]+") and ("+a+")"),s.push(u))}},s}},function(o,n,i){var s,r,a={},l=(s=function(){return window&&document&&document.all&&!window.atob},function(){return r===void 0&&(r=s.apply(this,arguments)),r}),c=function(v){var b={};return function(C){if(typeof C=="function")return C();if(b[C]===void 0){var S=(function(L){return document.querySelector(L)}).call(this,C);if(window.HTMLIFrameElement&&S instanceof window.HTMLIFrameElement)try{S=S.contentDocument.head}catch{S=null}b[C]=S}return b[C]}}(),d=null,u=0,h=[],p=i(4);function f(v,b){for(var C=0;C<v.length;C++){var S=v[C],L=a[S.id];if(L){L.refs++;for(var A=0;A<L.parts.length;A++)L.parts[A](S.parts[A]);for(;A<S.parts.length;A++)L.parts.push(y(S.parts[A],b))}else{var $=[];for(A=0;A<S.parts.length;A++)$.push(y(S.parts[A],b));a[S.id]={id:S.id,refs:1,parts:$}}}}function T(v,b){for(var C=[],S={},L=0;L<v.length;L++){var A=v[L],$=b.base?A[0]+b.base:A[0],R={css:A[1],media:A[2],sourceMap:A[3]};S[$]?S[$].parts.push(R):C.push(S[$]={id:$,parts:[R]})}return C}function m(v,b){var C=c(v.insertInto);if(!C)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var S=h[h.length-1];if(v.insertAt==="top")S?S.nextSibling?C.insertBefore(b,S.nextSibling):C.appendChild(b):C.insertBefore(b,C.firstChild),h.push(b);else if(v.insertAt==="bottom")C.appendChild(b);else{if(typeof v.insertAt!="object"||!v.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var L=c(v.insertInto+" "+v.insertAt.before);C.insertBefore(b,L)}}function x(v){if(v.parentNode===null)return!1;v.parentNode.removeChild(v);var b=h.indexOf(v);b>=0&&h.splice(b,1)}function E(v){var b=document.createElement("style");return v.attrs.type===void 0&&(v.attrs.type="text/css"),w(b,v.attrs),m(v,b),b}function w(v,b){Object.keys(b).forEach(function(C){v.setAttribute(C,b[C])})}function y(v,b){var C,S,L,A;if(b.transform&&v.css){if(!(A=b.transform(v.css)))return function(){};v.css=A}if(b.singleton){var $=u++;C=d||(d=E(b)),S=O.bind(null,C,$,!1),L=O.bind(null,C,$,!0)}else v.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(C=function(R){var q=document.createElement("link");return R.attrs.type===void 0&&(R.attrs.type="text/css"),R.attrs.rel="stylesheet",w(q,R.attrs),m(R,q),q}(b),S=(function(R,q,ee){var G=ee.css,Ce=ee.sourceMap,$e=q.convertToAbsoluteUrls===void 0&&Ce;(q.convertToAbsoluteUrls||$e)&&(G=p(G)),Ce&&(G+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(Ce))))+" */");var Le=new Blob([G],{type:"text/css"}),Se=R.href;R.href=URL.createObjectURL(Le),Se&&URL.revokeObjectURL(Se)}).bind(null,C,b),L=function(){x(C),C.href&&URL.revokeObjectURL(C.href)}):(C=E(b),S=(function(R,q){var ee=q.css,G=q.media;if(G&&R.setAttribute("media",G),R.styleSheet)R.styleSheet.cssText=ee;else{for(;R.firstChild;)R.removeChild(R.firstChild);R.appendChild(document.createTextNode(ee))}}).bind(null,C),L=function(){x(C)});return S(v),function(R){if(R){if(R.css===v.css&&R.media===v.media&&R.sourceMap===v.sourceMap)return;S(v=R)}else L()}}o.exports=function(v,b){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(b=b||{}).attrs=typeof b.attrs=="object"?b.attrs:{},b.singleton||typeof b.singleton=="boolean"||(b.singleton=l()),b.insertInto||(b.insertInto="head"),b.insertAt||(b.insertAt="bottom");var C=T(v,b);return f(C,b),function(S){for(var L=[],A=0;A<C.length;A++){var $=C[A];(R=a[$.id]).refs--,L.push(R)}for(S&&f(T(S,b),b),A=0;A<L.length;A++){var R;if((R=L[A]).refs===0){for(var q=0;q<R.parts.length;q++)R.parts[q]();delete a[R.id]}}}};var B,I=(B=[],function(v,b){return B[v]=b,B.filter(Boolean).join(`
`)});function O(v,b,C,S){var L=C?"":S.css;if(v.styleSheet)v.styleSheet.cssText=I(b,L);else{var A=document.createTextNode(L),$=v.childNodes;$[b]&&v.removeChild($[b]),$.length?v.insertBefore(A,$[b]):v.appendChild(A)}}},function(o,n){o.exports=function(i){var s=typeof window<"u"&&window.location;if(!s)throw new Error("fixUrls requires window.location");if(!i||typeof i!="string")return i;var r=s.protocol+"//"+s.host,a=r+s.pathname.replace(/\/[^\/]*$/,"/");return i.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(l,c){var d,u=c.trim().replace(/^"(.*)"$/,function(h,p){return p}).replace(/^'(.*)'$/,function(h,p){return p});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(u)?l:(d=u.indexOf("//")===0?u:u.indexOf("/")===0?r+u:a+u.replace(/^\.\//,""),"url("+JSON.stringify(d)+")")})}},function(o,n,i){i.r(n),i(0);function s(l,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}function r(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}i.d(n,"default",function(){return a});var a=function(){function l(c){var d=c.config,u=c.api;(function(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")})(this,l),this.api=u,this.button=null,this.optionButtons=[],this._state=!0,this.selectedText=null,this.range=null,this._settings=d,this.CSS={actions:"change-case-action",toolbarLabel:"change-case-toolbar__label",tool:"change-case-tool",toolbarBtnActive:this.api.styles.settingsButtonActive,inlineButton:this.api.styles.inlineToolButton},this.caseOptions={titleCase:"Title Case",lowerCase:"lower case",upperCase:"UPPER CASE",localeLowerCase:"local lower cas",localeUpperCase:"LCALE UPPER CASE",sentenceCase:"Sentence case",toggleCase:"tOOGLE cASE"}}return r(l,[{key:"state",get:function(){return this._state}}],[{key:"isInline",get:function(){return!0}}]),r(l,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 100 100" stroke="currentColor">
            <path d="m46.099 74.271-3.6868-13.686h-18.523l-3.6868 13.686h-11.605l17.934-57.653h13.17l18.001 57.653zm-6.2632-23.813q-5.0972-18.612-5.7524-21.056c-0.42199-1.6168-0.73293-2.9077-0.91061-3.8477q-1.1105 5.0133-6.5741 24.828z" stroke-width="1.1797"/>
            <path d="m87.355 74.271-2.4938-8.4556h-12.529l-2.4938 8.4556h-7.8496l12.131-35.619h8.9087l12.176 35.619zm-4.2365-14.712q-3.4478-11.499-3.891-13.009c-0.28544-0.99887-0.49576-1.7964-0.61595-2.3772q-0.75116 3.0973-4.4469 15.339z" stroke-width=".76265"/>
            </svg>`,this.button.classList.add(this.CSS.inlineButton),this.button}},{key:"checkState",value:function(c){c.anchorNode}},{key:"convertCase",value:function(c,d){var u=this;if(c){var h=c.cloneContents();h&&(h.childNodes.forEach(function(p){if(p.nodeName==="#text")switch(d){case"titleCase":p.textContent=p.textContent.replace(/\w\S*/g,function(f){return f.charAt(0).toUpperCase()+f.slice(1,f.length).toLowerCase()});break;case"lowerCase":p.textContent=function(f){return f.toLowerCase()}(p.textContent);break;case"upperCase":p.textContent=function(f){return f.toUpperCase()}(p.textContent);break;case"localeLowerCase":p.textContent=function(f,T){return f.toLocaleLowerCase(T)}(p.textContent,u._settings.locale);break;case"localeUpperCase":p.textContent=function(f,T){return f.toLocaleUpperCase(T)}(p.textContent,u._settings.locale);break;case"sentenceCase":p.textContent=function(f){return f.charAt(0).toUpperCase()+f.slice(1,f.length).toLowerCase()}(p.textContent);break;case"toggleCase":p.textContent=function(f){return f.replace(/\w\S*/g,function(T){return T.charAt(0).toLowerCase()+T.slice(1,T.length).toUpperCase()})}(p.textContent)}}),c.extractContents(),c.insertNode(h),this.api.inlineToolbar.close())}}},{key:"surround",value:function(c){this.selectedText=c.cloneContents(),this.actions.hidden=!this.actions.hidden,this.range=this.actions.hidden?null:c,this.state=!this.actions.hidden}},{key:"renderActions",value:function(){var c=this;this.actions=document.createElement("div"),this.actions.classList.add(this.CSS.actions);var d=document.createElement("div");d.classList.add(this.CSS.toolbarLabel),d.innerHTML="Change Case",this.actions.appendChild(d),this.optionButtons=Object.keys(this.caseOptions).map(function(x){var E=document.createElement("div");return E.classList.add(c.CSS.tool),E.dataset.mode=x,E.innerHTML=c.caseOptions[x],E});var u=!0,h=!1,p=void 0;try{for(var f,T=function(){var x=f.value;c.actions.appendChild(x),c.api.listeners.on(x,"click",function(){c.convertCase(c.range,x.dataset.mode)})},m=this.optionButtons[Symbol.iterator]();!(u=(f=m.next()).done);u=!0)T()}catch(x){h=!0,p=x}finally{try{u||m.return==null||m.return()}finally{if(h)throw p}}return this.actions.hidden=!0,this.actions}},{key:"destroy",value:function(){var c=!0,d=!1,u=void 0;try{for(var h,p=this.optionButtons[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value;this.api.listeners.off(f,"click")}}catch(T){d=!0,u=T}finally{try{c||p.return==null||p.return()}finally{if(d)throw u}}}},{key:"state",set:function(c){this._state=c,this.button.classList.toggle(this.CSS.toolbarBtnActive,c)}},{key:"title",get:function(){return"Change Case"}}]),l}()}])})})(pl);var Kf=pl.exports;const qf=ai(Kf);function wr(t,e){return new Ff({holder:t,tools:{list:{class:jf,inlineToolbar:!0,config:{defaultStyle:"unordered"}},underline:Uf,strikethrough:Wf,changeCase:qf},inlineToolbar:["bold","italic","underline","strikethrough","changeCase"],autofocus:!0,data:e})}const zn=ue({height:0,width:0}),Fo=10,Sn=14,Tn=18,Yf=Ye({__name:"TheWorkspace",props:{slide:{}},setup(t){const o=Jn(t,"slide");Jt(o,()=>{p()});const n=ue([]),i=ue(),s=ue();let r,a,l,c,d=ue({active:!1,editorInstance:void 0,top:0,left:0}),u,h;gn(()=>{r=i.value.getContext("2d",{willReadFrequently:!0}),zn.value.height=i.value.height,zn.value.width=i.value.width,Ze.value.addImage=T,Ze.value.addRectangle=m,a=i.value.getBoundingClientRect(),p(),window.addEventListener("click",y),r.textBaseline="top"});const p=()=>{var C;h=new Xu(i.value,(C=o.value)==null?void 0:C.elements,n.value,f),f()},f=()=>{var C;if(!(i.value===null||!((C=o.value)!=null&&C.elements))){r.clearRect(0,0,i.value.width,i.value.height);for(const S of o.value.elements)if(S.type==="rectangle")r.fillStyle=S.color||"",r.fillRect(S.area.x,S.area.y,S.area.width,S.area.height);else if(S.type==="image"){const L=document.createElement("canvas"),A=L.getContext("2d");L.width=S.content.width,L.height=S.content.height,A==null||A.putImageData(S.content,0,0),r.drawImage(L,S.area.x,S.area.y,S.area.width,S.area.height)}else S.type==="text"&&Mn(S.content,S.area.x,S.area.y,r,Tn)}};function T(C){if(!C)return;const S=i.value.width,L=i.value.height,A=new Image;A.src=URL.createObjectURL(C),A.addEventListener("load",()=>{var $e;const $=A.width>S,R=A.height>L;if(l=A.width,c=A.height,$||R){const Le=Math.min(S/A.width,L/A.height);l=A.width*Le,c=A.height*Le}const q=(S-l)/2,ee=(L-c)/2;r==null||r.drawImage(A,q,ee,l,c);const Ce={type:"image",content:r==null?void 0:r.getImageData(q,ee,l,c),area:{x:q,y:ee,width:l,height:c}};($e=o.value)==null||$e.elements.push(Ce),dt.save(),E(Ce)})}const m=()=>{var S;const C={type:"rectangle",color:"blue",area:{x:0,y:0,width:100,height:100}};(S=o.value)==null||S.elements.push(C),f(),dt.save()};function x(C){if(!o.value||C.clientX<a.left||C.clientX>a.right||C.clientY<a.top||C.clientY>a.bottom)return;const S=C.clientX-a.left,L=C.clientY-a.top;for(let A=o.value.elements.length-1;A>=0;A--){const $=o.value.elements[A],{area:R}=$;if(R.x<=S&&S<=R.x+R.width&&R.y<=L&&L<=R.y+R.height)return f(),E($),y(),b(),$.type==="text"&&Ze.value.isTextEdit&&I($,R.x+a.left,R.y+a.top),$;d.value.active&&y(),b(),f()}y(),Ze.value.isTextEdit&&w(C.clientX,C.clientY)}function E(C){const{width:S,height:L}=C.area,{x:A,y:$}=C.type==="text"?{x:C.area.x-Fo,y:C.area.y-Sn}:C.area;r.fillStyle="#1a73e8",r.strokeStyle="#1a73e8",r.strokeRect(A,$,S,L),r.strokeStyle="#fff";const R=8,q=[{x:A-R/2,y:$-R/2,width:R,height:R},{x:A+S-R/2,y:$-R/2,width:R,height:R},{x:A+S-R/2,y:$+L-R/2,width:R,height:R},{x:A-R/2,y:$+L-R/2,width:R,height:R},{x:A+S/2-R/2,y:$-R/2,width:R,height:R},{x:A+S-R/2,y:$+L/2-R/2,width:R,height:R},{x:A+S/2-R/2,y:$+L-R/2,width:R,height:R},{x:A-R/2,y:$+L/2-R/2,width:R,height:R}];for(let ee=0;ee<q.length;ee++){const G=q[ee];r.fillRect(G.x,G.y,R,R),r.strokeRect(G.x,G.y,R,R),n.value[ee]=G}}function w(C,S){d.value={editorInstance:wr("editor"),top:S,left:C,active:!0}}function y(){d.value.active&&d.value.editing?O():d.value.active&&B()}function B(){const C=+getComputedStyle(s.value).width.slice(0,-2),S=+getComputedStyle(s.value).height.slice(0,-2);let L=d.value.left-a.left+Fo,A=d.value.top-a.top+Sn;d.value.editorInstance&&d.value.editorInstance.save().then($=>{var q;if($.blocks.length===0){b();return}const R={type:"text",content:$,area:{x:L,y:A,width:C,height:S}};(q=o.value)==null||q.elements.push(R),Mn($,L,A,r,Tn),d.value.width=v($),b(),dt.save()}).catch($=>{console.log("Saving failed: ",$)})}function I(C,S,L){if(!o.value)return;const{content:A}=C;u=o.value.elements.indexOf(C),o.value.elements[u].content=null,f(),Ze.value.isTextEdit=!0,d.value={editorInstance:wr("editor",A),top:L-Sn,left:S-Fo,editing:!0,active:!0}}function O(){var R;const C=(R=o.value)==null?void 0:R.elements[u],S=+getComputedStyle(s.value).width.slice(0,-2),L=+getComputedStyle(s.value).height.slice(0,-2);let A=d.value.left-a.left+Fo,$=d.value.top-a.top+Sn;d.value.editorInstance&&d.value.editorInstance.save().then(q=>{if(q.blocks.length===0){b();return}C.content=q,C.area.width=S,C.area.height=L,Mn(q,A,$,r,Tn),d.value.width=v(q),b(),dt.save()}).catch(q=>{console.log("Saving failed: ",q)})}function v(C){let S=0;return C.blocks.forEach(({type:L,data:A})=>{L==="paragraph"?S=Math.max(S,A.text):L==="list"&&(S=Math.max(S,...A.items))}),S}function b(){var C;typeof d.value.editorInstance>"u"||"destroy"in d.value.editorInstance&&(Ze.value.isTextEdit=!1,d.value.active=!1,(C=d.value.editorInstance)==null||C.destroy())}return(C,S)=>(Ne(),Ct(Ge,null,[Ie("div",{class:ge(C.$style.container)},[Ie("canvas",{ref_key:"canvas",ref:i,id:"workspace",onMousedown:S[0]||(S[0]=Ft((...L)=>{var A,$;return((A=xe(h))==null?void 0:A.drag)&&(($=xe(h))==null?void 0:$.drag(...L))},["prevent"])),onMouseup:S[1]||(S[1]=Ft((...L)=>{var A,$;return((A=xe(h))==null?void 0:A.drop)&&(($=xe(h))==null?void 0:$.drop(...L))},["prevent"])),onMouseout:S[2]||(S[2]=Ft((...L)=>{var A,$;return((A=xe(h))==null?void 0:A.drop)&&(($=xe(h))==null?void 0:$.drop(...L))},["prevent"])),onMousemove:S[3]||(S[3]=Ft((...L)=>{var A,$;return((A=xe(h))==null?void 0:A.move)&&(($=xe(h))==null?void 0:$.move(...L))},["prevent"])),class:ge(C.$style.canvas),width:864,height:486,onClick:S[4]||(S[4]=Ft(L=>x(L),["prevent","stop"]))},null,34)],2),Ie("div",{ref_key:"editor",ref:s,id:"editor",class:ge([C.$style.editor,xe(d).active?C.$style.editor_active:""]),style:Xn({top:xe(d).top+"px",left:xe(d).left+"px",width:xe(d).width+"px","font-size":Tn+"px","padding-left":Fo+"px"}),onClick:S[5]||(S[5]=Ft(()=>{},["stop"]))},null,6)],64))}}),Vf="_container_i225c_2",Xf="_canvas_i225c_7",Zf="_editor_i225c_18",Gf="_editor_active_i225c_28",Jf={container:Vf,canvas:Xf,"image-input":"_image-input_i225c_13",editor:Zf,editor_active:Gf},Qf={$style:Jf},ep=Rt(Yf,[["__cssModules",Qf]]),tp=Ye({__name:"ToolsButton",props:{action:{type:Function},disabled:{type:Boolean},highlighted:{type:Boolean},iconName:{}},setup(t){const e=t;return(o,n)=>(Ne(),oo(jn,{class:ge(o.$style.button),variant:"light",action:e.action,"icon-name":e.iconName,disabled:e.disabled,highlighted:e.highlighted},null,8,["class","action","icon-name","disabled","highlighted"]))}}),op="_button_1yqg0_2",np={button:op},ip={$style:np},Ho=Rt(tp,[["__cssModules",ip]]),sp=Ye({__name:"ToolsPanel",setup(t){const e=ue(null),o=()=>{var a;e.value!=null&&((a=e.value)==null||a.addEventListener("change",n),e.value.click(),r())},n=()=>{if(e.value==null)return;const a=e.value.files[0];Ze.value.addImage&&Ze.value.addImage(a),e.value&&e.value.removeEventListener("change",n)},i=()=>{Ze.value.addRectangle&&Ze.value.addRectangle(),r()},s=()=>{Ze.value.isTextEdit=!0},r=()=>{Ze.value.isTextEdit=!1};return(a,l)=>(Ne(),Ct("div",{class:ge(a.$style.toolsPanel)},[le(Ho,{"icon-name":"arrow-left",action:()=>xe(dt).undo()},null,8,["action"]),le(Ho,{"icon-name":"arrow-right",action:()=>xe(dt).redo()},null,8,["action"]),Ie("div",{class:ge(a.$style.delimiter)},null,2),le(Ho,{"icon-name":"font",highlighted:xe(Ze).isTextEdit,action:s},null,8,["highlighted"]),le(Ho,{"icon-name":"image-tool",action:o}),le(Ho,{"icon-name":"copy",action:i}),Ie("input",{ref_key:"uploadInput",ref:e,type:"file",hidden:""},null,512)],2))}}),rp="_toolsPanel_hktfv_2",ap="_delimiter_hktfv_11",lp={toolsPanel:rp,delimiter:ap},cp={$style:lp},dp=Rt(sp,[["__cssModules",cp]]),up=Ye({__name:"FullscreenView",props:{slide:{}},emits:["back","next"],setup(t,{emit:e}){const n=Jn(t,"slide"),i=ue(0),s=ue(0);Jt(n,()=>{$n(a.value,l,n.value,i.value,s.value)});const r=c=>{c.key==="ArrowLeft"?e("back"):c.key==="ArrowRight"&&e("next")};gn(()=>{i.value=screen.width/zn.value.width,s.value=Da*i.value,a.value.width=screen.width,a.value.height=i.value*zn.value.height,l=a.value.getContext("2d",{willReadFrequently:!0}),$n(a.value,l,n.value,i.value,s.value),document.addEventListener("keydown",r)}),cs(()=>{document.removeEventListener("keydown",r)});const a=ue();let l;return(c,d)=>(Ne(),Ct("canvas",{ref_key:"canvas",ref:a},null,512))}});class hp{get(e){return localStorage.getItem(e)}set(e,o){return localStorage.setItem(e,o)}remove(e){return localStorage.removeItem(e)}onConfigured(){return Promise.resolve("success")}}var jt,xo,Yi,pp;class fp{constructor(e,o){be(this,Yi);vn(this,"namespace");be(this,jt,void 0);be(this,xo,null);this.namespace=e,ye(this,jt,(o==null?void 0:o.engine)??new hp),j(this,jt).onConfigured().then(()=>{j(this,xo)&&j(this,xo).call(this)})}async get(e){return j(this,jt).get(e)}async set(e,o){await j(this,jt).set(e,o)}async remove(e){await j(this,jt).remove(e)}async onConfigured(){return new Promise(e=>{ye(this,xo,e)})}}jt=new WeakMap,xo=new WeakMap,Yi=new WeakSet,pp=function(e){return`[[${this.namespace}]]-${e}`};var yt,Qe;class gp{constructor(e,o,n){be(this,yt,void 0);be(this,Qe,void 0);vn(this,"resolver");ye(this,Qe,o);const i=indexedDB.open(e);i.onupgradeneeded=s=>{ye(this,yt,s.target.result),j(this,yt).objectStoreNames.contains(j(this,Qe))||j(this,yt).createObjectStore(j(this,Qe),{...n})},i.onsuccess=s=>{ye(this,yt,s.target.result),this.resolver("success")}}get(e){const i=j(this,yt).transaction(j(this,Qe)).objectStore(j(this,Qe)).get(e);return new Promise((s,r)=>{i.onsuccess=()=>{s(i.result)},i.onerror=()=>{console.error(`An error occurred while getting data by key "${e}". Error: ${i.error}`),r(i.error)}})}set(e,o){const i=j(this,yt).transaction(j(this,Qe),"readwrite").objectStore(j(this,Qe)),s={...o,id:e},r=i.put(s);return new Promise((a,l)=>{r.onsuccess=()=>{a()},r.onerror=()=>{console.error(`An error occurred while setting data by key "${e}". Error: ${r.error}`),l(r.error)}})}remove(e){const i=j(this,yt).transaction(j(this,Qe)).objectStore(j(this,Qe)).delete(e);return new Promise((s,r)=>{i.onsuccess=()=>{s()},i.onerror=()=>{console.error(`An error occurred while removing data by key "${e}". Error: ${i.error}`),r(i.error)}})}onConfigured(){return new Promise(e=>{this.resolver=e})}}yt=new WeakMap,Qe=new WeakMap;function mp(t,e){return new fp(t,e)}const bp="pt-key",vp="PT-DB",kp="slides",Zo=mp(bp,{engine:new gp(vp,kp,{keyPath:"id"})}),yp=Ye({__name:"App",setup(t){const e=ue(Tu),o=ue(null),n=ue(-1);gn(()=>{Zo.get("slides").then(l=>{l.data&&(e.value=l.data),dt.init(e)}),n.value=0,e.value[n.value]&&(o.value=e.value[n.value].id)});const i=l=>{o.value=l,n.value=e.value.findIndex(c=>c.id===l)},s=l=>{const c=e.value.findIndex(d=>d.id===l);e.value.splice(c,1),n.value=0,o.value=e.value[n.value].id,dt.save()},r=()=>{n.value!==0&&n.value--},a=()=>{n.value<e.value.length&&n.value++};return(l,c)=>xe(Pa)?(Ne(),oo(up,{key:0,onBack:r,onNext:a,slide:e.value[n.value]},null,8,["slide"])):(Ne(),Ct("div",{key:1,class:ge(l.$style.container)},[le(Su),Ie("div",{class:ge(l.$style.row)},[le(qu,{slides:e.value,currentSlideId:o.value,onSelectSlide:i,onRemoveSlide:s},null,8,["slides","currentSlideId"]),Ie("div",{class:ge(l.$style.column)},[le(dp),le(ep,{slide:e.value[n.value]},null,8,["slide"])],2)],2)],2))}}),wp="_container_f3q1k_2",xp="_row_f3q1k_8",Ep="_column_f3q1k_15",Cp={container:wp,row:xp,column:Ep},Sp={$style:Cp},gl=Rt(yp,[["__cssModules",Sp]]);/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const uo=typeof window<"u";function Tp(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const fe=Object.assign;function yi(t,e){const o={};for(const n in e){const i=e[n];o[n]=pt(i)?i.map(t):t(i)}return o}const Go=()=>{},pt=Array.isArray,Bp=/\/$/,_p=t=>t.replace(Bp,"");function wi(t,e,o="/"){let n,i={},s="",r="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(n=n||e.slice(0,a),r=e.slice(a,e.length)),n=Op(n??e,o),{fullPath:n+(s&&"?")+s+r,path:n,query:i,hash:r}}function Ip(t,e){const o=e.query?t(e.query):"";return e.path+(o&&"?")+o+(e.hash||"")}function xr(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Mp(t,e,o){const n=e.matched.length-1,i=o.matched.length-1;return n>-1&&n===i&&Mo(e.matched[n],o.matched[i])&&ml(e.params,o.params)&&t(e.query)===t(o.query)&&e.hash===o.hash}function Mo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function ml(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const o in t)if(!Ap(t[o],e[o]))return!1;return!0}function Ap(t,e){return pt(t)?Er(t,e):pt(e)?Er(e,t):t===e}function Er(t,e){return pt(e)?t.length===e.length&&t.every((o,n)=>o===e[n]):t.length===1&&t[0]===e}function Op(t,e){if(t.startsWith("/"))return t;if(!t)return e;const o=e.split("/"),n=t.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let s=o.length-1,r,a;for(r=0;r<n.length;r++)if(a=n[r],a!==".")if(a==="..")s>1&&s--;else break;return o.slice(0,s).join("/")+"/"+n.slice(r-(r===n.length?1:0)).join("/")}var rn;(function(t){t.pop="pop",t.push="push"})(rn||(rn={}));var Jo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Jo||(Jo={}));function Lp(t){if(!t)if(uo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),_p(t)}const Rp=/^[^#]+#/;function Np(t,e){return t.replace(Rp,"#")+e}function Pp(t,e){const o=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-o.left-(e.left||0),top:n.top-o.top-(e.top||0)}}const li=()=>({left:window.pageXOffset,top:window.pageYOffset});function Dp(t){let e;if("el"in t){const o=t.el,n=typeof o=="string"&&o.startsWith("#"),i=typeof o=="string"?n?document.getElementById(o.slice(1)):document.querySelector(o):o;if(!i)return;e=Pp(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Cr(t,e){return(history.state?history.state.position-e:-1)+t}const Wi=new Map;function Fp(t,e){Wi.set(t,e)}function Hp(t){const e=Wi.get(t);return Wi.delete(t),e}let jp=()=>location.protocol+"//"+location.host;function bl(t,e){const{pathname:o,search:n,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),xr(l,"")}return xr(o,t)+n+i}function $p(t,e,o,n){let i=[],s=[],r=null;const a=({state:h})=>{const p=bl(t,location),f=o.value,T=e.value;let m=0;if(h){if(o.value=p,e.value=h,r&&r===f){r=null;return}m=T?h.position-T.position:0}else n(p);i.forEach(x=>{x(o.value,f,{delta:m,type:rn.pop,direction:m?m>0?Jo.forward:Jo.back:Jo.unknown})})};function l(){r=o.value}function c(h){i.push(h);const p=()=>{const f=i.indexOf(h);f>-1&&i.splice(f,1)};return s.push(p),p}function d(){const{history:h}=window;h.state&&h.replaceState(fe({},h.state,{scroll:li()}),"")}function u(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:u}}function Sr(t,e,o,n=!1,i=!1){return{back:t,current:e,forward:o,replaced:n,position:window.history.length,scroll:i?li():null}}function Up(t){const{history:e,location:o}=window,n={value:bl(t,o)},i={value:e.state};i.value||s(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,d){const u=t.indexOf("#"),h=u>-1?(o.host&&document.querySelector("base")?t:t.slice(u))+l:jp()+t+l;try{e[d?"replaceState":"pushState"](c,"",h),i.value=c}catch(p){console.error(p),o[d?"replace":"assign"](h)}}function r(l,c){const d=fe({},e.state,Sr(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,d,!0),n.value=l}function a(l,c){const d=fe({},i.value,e.state,{forward:l,scroll:li()});s(d.current,d,!0);const u=fe({},Sr(n.value,l,null),{position:d.position+1},c);s(l,u,!1),n.value=l}return{location:n,state:i,push:a,replace:r}}function zp(t){t=Lp(t);const e=Up(t),o=$p(t,e.state,e.location,e.replace);function n(s,r=!0){r||o.pauseListeners(),history.go(s)}const i=fe({location:"",base:t,go:n,createHref:Np.bind(null,t)},e,o);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function Wp(t){return typeof t=="string"||t&&typeof t=="object"}function vl(t){return typeof t=="string"||typeof t=="symbol"}const Pt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},kl=Symbol("");var Tr;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Tr||(Tr={}));function Ao(t,e){return fe(new Error,{type:t,[kl]:!0},e)}function St(t,e){return t instanceof Error&&kl in t&&(e==null||!!(t.type&e))}const Br="[^/]+?",Kp={sensitive:!1,strict:!1,start:!0,end:!0},qp=/[.+*?^${}()[\]/\\]/g;function Yp(t,e){const o=fe({},Kp,e),n=[];let i=o.start?"^":"";const s=[];for(const c of t){const d=c.length?[]:[90];o.strict&&!c.length&&(i+="/");for(let u=0;u<c.length;u++){const h=c[u];let p=40+(o.sensitive?.25:0);if(h.type===0)u||(i+="/"),i+=h.value.replace(qp,"\\$&"),p+=40;else if(h.type===1){const{value:f,repeatable:T,optional:m,regexp:x}=h;s.push({name:f,repeatable:T,optional:m});const E=x||Br;if(E!==Br){p+=10;try{new RegExp(`(${E})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${f}" (${E}): `+y.message)}}let w=T?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;u||(w=m&&c.length<2?`(?:/${w})`:"/"+w),m&&(w+="?"),i+=w,p+=20,m&&(p+=-8),T&&(p+=-20),E===".*"&&(p+=-50)}d.push(p)}n.push(d)}if(o.strict&&o.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}o.strict||(i+="/?"),o.end?i+="$":o.strict&&(i+="(?:/|$)");const r=new RegExp(i,o.sensitive?"":"i");function a(c){const d=c.match(r),u={};if(!d)return null;for(let h=1;h<d.length;h++){const p=d[h]||"",f=s[h-1];u[f.name]=p&&f.repeatable?p.split("/"):p}return u}function l(c){let d="",u=!1;for(const h of t){(!u||!d.endsWith("/"))&&(d+="/"),u=!1;for(const p of h)if(p.type===0)d+=p.value;else if(p.type===1){const{value:f,repeatable:T,optional:m}=p,x=f in c?c[f]:"";if(pt(x)&&!T)throw new Error(`Provided param "${f}" is an array but it is not repeatable (* or + modifiers)`);const E=pt(x)?x.join("/"):x;if(!E)if(m)h.length<2&&(d.endsWith("/")?d=d.slice(0,-1):u=!0);else throw new Error(`Missing required param "${f}"`);d+=E}}return d||"/"}return{re:r,score:n,keys:s,parse:a,stringify:l}}function Vp(t,e){let o=0;for(;o<t.length&&o<e.length;){const n=e[o]-t[o];if(n)return n;o++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Xp(t,e){let o=0;const n=t.score,i=e.score;for(;o<n.length&&o<i.length;){const s=Vp(n[o],i[o]);if(s)return s;o++}if(Math.abs(i.length-n.length)===1){if(_r(n))return 1;if(_r(i))return-1}return i.length-n.length}function _r(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Zp={type:0,value:""},Gp=/[a-zA-Z0-9_]/;function Jp(t){if(!t)return[[]];if(t==="/")return[[Zp]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${o})/"${c}": ${p}`)}let o=0,n=o;const i=[];let s;function r(){s&&i.push(s),s=[]}let a=0,l,c="",d="";function u(){c&&(o===0?s.push({type:0,value:c}):o===1||o===2||o===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&o!==2){n=o,o=4;continue}switch(o){case 0:l==="/"?(c&&u(),r()):l===":"?(u(),o=1):h();break;case 4:h(),o=n;break;case 1:l==="("?o=2:Gp.test(l)?h():(u(),o=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:o=3:d+=l;break;case 3:u(),o=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return o===2&&e(`Unfinished custom RegExp for param "${c}"`),u(),r(),i}function Qp(t,e,o){const n=Yp(Jp(t.path),o),i=fe(n,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function eg(t,e){const o=[],n=new Map;e=Ar({strict:!1,end:!0,sensitive:!1},e);function i(d){return n.get(d)}function s(d,u,h){const p=!h,f=tg(d);f.aliasOf=h&&h.record;const T=Ar(e,d),m=[f];if("alias"in d){const w=typeof d.alias=="string"?[d.alias]:d.alias;for(const y of w)m.push(fe({},f,{components:h?h.record.components:f.components,path:y,aliasOf:h?h.record:f}))}let x,E;for(const w of m){const{path:y}=w;if(u&&y[0]!=="/"){const B=u.record.path,I=B[B.length-1]==="/"?"":"/";w.path=u.record.path+(y&&I+y)}if(x=Qp(w,u,T),h?h.alias.push(x):(E=E||x,E!==x&&E.alias.push(x),p&&d.name&&!Mr(x)&&r(d.name)),f.children){const B=f.children;for(let I=0;I<B.length;I++)s(B[I],x,h&&h.children[I])}h=h||x,(x.record.components&&Object.keys(x.record.components).length||x.record.name||x.record.redirect)&&l(x)}return E?()=>{r(E)}:Go}function r(d){if(vl(d)){const u=n.get(d);u&&(n.delete(d),o.splice(o.indexOf(u),1),u.children.forEach(r),u.alias.forEach(r))}else{const u=o.indexOf(d);u>-1&&(o.splice(u,1),d.record.name&&n.delete(d.record.name),d.children.forEach(r),d.alias.forEach(r))}}function a(){return o}function l(d){let u=0;for(;u<o.length&&Xp(d,o[u])>=0&&(d.record.path!==o[u].record.path||!yl(d,o[u]));)u++;o.splice(u,0,d),d.record.name&&!Mr(d)&&n.set(d.record.name,d)}function c(d,u){let h,p={},f,T;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw Ao(1,{location:d});T=h.record.name,p=fe(Ir(u.params,h.keys.filter(E=>!E.optional).map(E=>E.name)),d.params&&Ir(d.params,h.keys.map(E=>E.name))),f=h.stringify(p)}else if("path"in d)f=d.path,h=o.find(E=>E.re.test(f)),h&&(p=h.parse(f),T=h.record.name);else{if(h=u.name?n.get(u.name):o.find(E=>E.re.test(u.path)),!h)throw Ao(1,{location:d,currentLocation:u});T=h.record.name,p=fe({},u.params,d.params),f=h.stringify(p)}const m=[];let x=h;for(;x;)m.unshift(x.record),x=x.parent;return{name:T,path:f,params:p,matched:m,meta:ng(m)}}return t.forEach(d=>s(d)),{addRoute:s,resolve:c,removeRoute:r,getRoutes:a,getRecordMatcher:i}}function Ir(t,e){const o={};for(const n of e)n in t&&(o[n]=t[n]);return o}function tg(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:og(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function og(t){const e={},o=t.props||!1;if("component"in t)e.default=o;else for(const n in t.components)e[n]=typeof o=="object"?o[n]:o;return e}function Mr(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ng(t){return t.reduce((e,o)=>fe(e,o.meta),{})}function Ar(t,e){const o={};for(const n in t)o[n]=n in e?e[n]:t[n];return o}function yl(t,e){return e.children.some(o=>o===t||yl(t,o))}const wl=/#/g,ig=/&/g,sg=/\//g,rg=/=/g,ag=/\?/g,xl=/\+/g,lg=/%5B/g,cg=/%5D/g,El=/%5E/g,dg=/%60/g,Cl=/%7B/g,ug=/%7C/g,Sl=/%7D/g,hg=/%20/g;function Ms(t){return encodeURI(""+t).replace(ug,"|").replace(lg,"[").replace(cg,"]")}function fg(t){return Ms(t).replace(Cl,"{").replace(Sl,"}").replace(El,"^")}function Ki(t){return Ms(t).replace(xl,"%2B").replace(hg,"+").replace(wl,"%23").replace(ig,"%26").replace(dg,"`").replace(Cl,"{").replace(Sl,"}").replace(El,"^")}function pg(t){return Ki(t).replace(rg,"%3D")}function gg(t){return Ms(t).replace(wl,"%23").replace(ag,"%3F")}function mg(t){return t==null?"":gg(t).replace(sg,"%2F")}function Wn(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function bg(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const s=n[i].replace(xl," "),r=s.indexOf("="),a=Wn(r<0?s:s.slice(0,r)),l=r<0?null:Wn(s.slice(r+1));if(a in e){let c=e[a];pt(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Or(t){let e="";for(let o in t){const n=t[o];if(o=pg(o),n==null){n!==void 0&&(e+=(e.length?"&":"")+o);continue}(pt(n)?n.map(s=>s&&Ki(s)):[n&&Ki(n)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+o,s!=null&&(e+="="+s))})}return e}function vg(t){const e={};for(const o in t){const n=t[o];n!==void 0&&(e[o]=pt(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const kg=Symbol(""),Lr=Symbol(""),As=Symbol(""),Tl=Symbol(""),qi=Symbol("");function jo(){let t=[];function e(n){return t.push(n),()=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)}}function o(){t=[]}return{add:e,list:()=>t.slice(),reset:o}}function Ht(t,e,o,n,i){const s=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((r,a)=>{const l=u=>{u===!1?a(Ao(4,{from:o,to:e})):u instanceof Error?a(u):Wp(u)?a(Ao(2,{from:e,to:u})):(s&&n.enterCallbacks[i]===s&&typeof u=="function"&&s.push(u),r())},c=t.call(n&&n.instances[i],e,o,l);let d=Promise.resolve(c);t.length<3&&(d=d.then(l)),d.catch(u=>a(u))})}function xi(t,e,o,n){const i=[];for(const s of t)for(const r in s.components){let a=s.components[r];if(!(e!=="beforeRouteEnter"&&!s.instances[r]))if(yg(a)){const c=(a.__vccOpts||a)[e];c&&i.push(Ht(c,o,n,s,r))}else{let l=a();i.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${r}" at "${s.path}"`));const d=Tp(c)?c.default:c;s.components[r]=d;const h=(d.__vccOpts||d)[e];return h&&Ht(h,o,n,s,r)()}))}}return i}function yg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Rr(t){const e=Mt(As),o=Mt(Tl),n=rt(()=>e.resolve(xe(t.to))),i=rt(()=>{const{matched:l}=n.value,{length:c}=l,d=l[c-1],u=o.matched;if(!d||!u.length)return-1;const h=u.findIndex(Mo.bind(null,d));if(h>-1)return h;const p=Nr(l[c-2]);return c>1&&Nr(d)===p&&u[u.length-1].path!==p?u.findIndex(Mo.bind(null,l[c-2])):h}),s=rt(()=>i.value>-1&&Cg(o.params,n.value.params)),r=rt(()=>i.value>-1&&i.value===o.matched.length-1&&ml(o.params,n.value.params));function a(l={}){return Eg(l)?e[xe(t.replace)?"replace":"push"](xe(t.to)).catch(Go):Promise.resolve()}return{route:n,href:rt(()=>n.value.href),isActive:s,isExactActive:r,navigate:a}}const wg=Ye({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Rr,setup(t,{slots:e}){const o=Gn(Rr(t)),{options:n}=Mt(As),i=rt(()=>({[Pr(t.activeClass,n.linkActiveClass,"router-link-active")]:o.isActive,[Pr(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:o.isExactActive}));return()=>{const s=e.default&&e.default(o);return t.custom?s:Na("a",{"aria-current":o.isExactActive?t.ariaCurrentValue:null,href:o.href,onClick:o.navigate,class:i.value},s)}}}),xg=wg;function Eg(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Cg(t,e){for(const o in e){const n=e[o],i=t[o];if(typeof n=="string"){if(n!==i)return!1}else if(!pt(i)||i.length!==n.length||n.some((s,r)=>s!==i[r]))return!1}return!0}function Nr(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Pr=(t,e,o)=>t??e??o,Sg=Ye({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:o}){const n=Mt(qi),i=rt(()=>t.route||n.value),s=Mt(Lr,0),r=rt(()=>{let c=xe(s);const{matched:d}=i.value;let u;for(;(u=d[c])&&!u.components;)c++;return c}),a=rt(()=>i.value.matched[r.value]);_n(Lr,rt(()=>r.value+1)),_n(kg,a),_n(qi,i);const l=ue();return Jt(()=>[l.value,a.value,t.name],([c,d,u],[h,p,f])=>{d&&(d.instances[u]=c,p&&p!==d&&c&&c===h&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),c&&d&&(!p||!Mo(d,p)||!h)&&(d.enterCallbacks[u]||[]).forEach(T=>T(c))},{flush:"post"}),()=>{const c=i.value,d=t.name,u=a.value,h=u&&u.components[d];if(!h)return Dr(o.default,{Component:h,route:c});const p=u.props[d],f=p?p===!0?c.params:typeof p=="function"?p(c):p:null,m=Na(h,fe({},f,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(u.instances[d]=null)},ref:l}));return Dr(o.default,{Component:m,route:c})||m}}});function Dr(t,e){if(!t)return null;const o=t(e);return o.length===1?o[0]:o}const Tg=Sg;function Bg(t){const e=eg(t.routes,t),o=t.parseQuery||bg,n=t.stringifyQuery||Or,i=t.history,s=jo(),r=jo(),a=jo(),l=kc(Pt);let c=Pt;uo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=yi.bind(null,P=>""+P),u=yi.bind(null,mg),h=yi.bind(null,Wn);function p(P,Y){let W,Z;return vl(P)?(W=e.getRecordMatcher(P),Z=Y):Z=P,e.addRoute(Z,W)}function f(P){const Y=e.getRecordMatcher(P);Y&&e.removeRoute(Y)}function T(){return e.getRoutes().map(P=>P.record)}function m(P){return!!e.getRecordMatcher(P)}function x(P,Y){if(Y=fe({},Y||l.value),typeof P=="string"){const _=wi(o,P,Y.path),N=e.resolve({path:_.path},Y),D=i.createHref(_.fullPath);return fe(_,N,{params:h(N.params),hash:Wn(_.hash),redirectedFrom:void 0,href:D})}let W;if("path"in P)W=fe({},P,{path:wi(o,P.path,Y.path).path});else{const _=fe({},P.params);for(const N in _)_[N]==null&&delete _[N];W=fe({},P,{params:u(_)}),Y.params=u(Y.params)}const Z=e.resolve(W,Y),he=P.hash||"";Z.params=d(h(Z.params));const g=Ip(n,fe({},P,{hash:fg(he),path:Z.path})),k=i.createHref(g);return fe({fullPath:g,hash:he,query:n===Or?vg(P.query):P.query||{}},Z,{redirectedFrom:void 0,href:k})}function E(P){return typeof P=="string"?wi(o,P,l.value.path):fe({},P)}function w(P,Y){if(c!==P)return Ao(8,{from:Y,to:P})}function y(P){return O(P)}function B(P){return y(fe(E(P),{replace:!0}))}function I(P){const Y=P.matched[P.matched.length-1];if(Y&&Y.redirect){const{redirect:W}=Y;let Z=typeof W=="function"?W(P):W;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=E(Z):{path:Z},Z.params={}),fe({query:P.query,hash:P.hash,params:"path"in Z?{}:P.params},Z)}}function O(P,Y){const W=c=x(P),Z=l.value,he=P.state,g=P.force,k=P.replace===!0,_=I(W);if(_)return O(fe(E(_),{state:typeof _=="object"?fe({},he,_.state):he,force:g,replace:k}),Y||W);const N=W;N.redirectedFrom=Y;let D;return!g&&Mp(n,Z,W)&&(D=Ao(16,{to:N,from:Z}),Le(Z,Z,!0,!1)),(D?Promise.resolve(D):C(N,Z)).catch(F=>St(F)?St(F,2)?F:$e(F):G(F,N,Z)).then(F=>{if(F){if(St(F,2))return O(fe({replace:k},E(F.to),{state:typeof F.to=="object"?fe({},he,F.to.state):he,force:g}),Y||N)}else F=L(N,Z,!0,k,he);return S(N,Z,F),F})}function v(P,Y){const W=w(P,Y);return W?Promise.reject(W):Promise.resolve()}function b(P){const Y=io.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(P):P()}function C(P,Y){let W;const[Z,he,g]=_g(P,Y);W=xi(Z.reverse(),"beforeRouteLeave",P,Y);for(const _ of Z)_.leaveGuards.forEach(N=>{W.push(Ht(N,P,Y))});const k=v.bind(null,P,Y);return W.push(k),De(W).then(()=>{W=[];for(const _ of s.list())W.push(Ht(_,P,Y));return W.push(k),De(W)}).then(()=>{W=xi(he,"beforeRouteUpdate",P,Y);for(const _ of he)_.updateGuards.forEach(N=>{W.push(Ht(N,P,Y))});return W.push(k),De(W)}).then(()=>{W=[];for(const _ of g)if(_.beforeEnter)if(pt(_.beforeEnter))for(const N of _.beforeEnter)W.push(Ht(N,P,Y));else W.push(Ht(_.beforeEnter,P,Y));return W.push(k),De(W)}).then(()=>(P.matched.forEach(_=>_.enterCallbacks={}),W=xi(g,"beforeRouteEnter",P,Y),W.push(k),De(W))).then(()=>{W=[];for(const _ of r.list())W.push(Ht(_,P,Y));return W.push(k),De(W)}).catch(_=>St(_,8)?_:Promise.reject(_))}function S(P,Y,W){a.list().forEach(Z=>b(()=>Z(P,Y,W)))}function L(P,Y,W,Z,he){const g=w(P,Y);if(g)return g;const k=Y===Pt,_=uo?history.state:{};W&&(Z||k?i.replace(P.fullPath,fe({scroll:k&&_&&_.scroll},he)):i.push(P.fullPath,he)),l.value=P,Le(P,Y,W,k),$e()}let A;function $(){A||(A=i.listen((P,Y,W)=>{if(!bn.listening)return;const Z=x(P),he=I(Z);if(he){O(fe(he,{replace:!0}),Z).catch(Go);return}c=Z;const g=l.value;uo&&Fp(Cr(g.fullPath,W.delta),li()),C(Z,g).catch(k=>St(k,12)?k:St(k,2)?(O(k.to,Z).then(_=>{St(_,20)&&!W.delta&&W.type===rn.pop&&i.go(-1,!1)}).catch(Go),Promise.reject()):(W.delta&&i.go(-W.delta,!1),G(k,Z,g))).then(k=>{k=k||L(Z,g,!1),k&&(W.delta&&!St(k,8)?i.go(-W.delta,!1):W.type===rn.pop&&St(k,20)&&i.go(-1,!1)),S(Z,g,k)}).catch(Go)}))}let R=jo(),q=jo(),ee;function G(P,Y,W){$e(P);const Z=q.list();return Z.length?Z.forEach(he=>he(P,Y,W)):console.error(P),Promise.reject(P)}function Ce(){return ee&&l.value!==Pt?Promise.resolve():new Promise((P,Y)=>{R.add([P,Y])})}function $e(P){return ee||(ee=!P,$(),R.list().forEach(([Y,W])=>P?W(P):Y()),R.reset()),P}function Le(P,Y,W,Z){const{scrollBehavior:he}=t;if(!uo||!he)return Promise.resolve();const g=!W&&Hp(Cr(P.fullPath,0))||(Z||!W)&&history.state&&history.state.scroll||null;return ua().then(()=>he(P,Y,g)).then(k=>k&&Dp(k)).catch(k=>G(k,P,Y))}const Se=P=>i.go(P);let no;const io=new Set,bn={currentRoute:l,listening:!0,addRoute:p,removeRoute:f,hasRoute:m,getRoutes:T,resolve:x,options:t,push:y,replace:B,go:Se,back:()=>Se(-1),forward:()=>Se(1),beforeEach:s.add,beforeResolve:r.add,afterEach:a.add,onError:q.add,isReady:Ce,install(P){const Y=this;P.component("RouterLink",xg),P.component("RouterView",Tg),P.config.globalProperties.$router=Y,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>xe(l)}),uo&&!no&&l.value===Pt&&(no=!0,y(i.location).catch(he=>{}));const W={};for(const he in Pt)Object.defineProperty(W,he,{get:()=>l.value[he],enumerable:!0});P.provide(As,Y),P.provide(Tl,oa(W)),P.provide(qi,l);const Z=P.unmount;io.add(P),P.unmount=function(){io.delete(P),io.size<1&&(c=Pt,A&&A(),A=null,l.value=Pt,no=!1,ee=!1),Z()}}};function De(P){return P.reduce((Y,W)=>Y.then(()=>b(W)),Promise.resolve())}return bn}function _g(t,e){const o=[],n=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let r=0;r<s;r++){const a=e.matched[r];a&&(t.matched.find(c=>Mo(c,a))?n.push(a):o.push(a));const l=t.matched[r];l&&(e.matched.find(c=>Mo(c,l))||i.push(l))}return[o,n,i]}const Ig=Bg({history:zp("/"),routes:[{path:"/",name:"app",component:gl}]});function tt(t){if(typeof t!="object"||t===null)return t;let e;if(t instanceof Date)e=new Date,e.setTime(t.getTime());else if(t instanceof RegExp)e=new RegExp(t);else if(t instanceof Map)e=new Map,t.forEach((o,n)=>{e.set(n,tt(o))});else if(t instanceof Set)e=new Set,t.forEach(o=>{e.add(tt(o))});else if(t instanceof ImageData){const{width:o,height:n,data:i}=t,s=new Uint8ClampedArray(i.length);s.set(i),e=new ImageData(s,o,n)}else if(Array.isArray(t)){e=[];for(let o=0;o<t.length;o++)e[o]=tt(t[o])}else e={},Object.keys(t).forEach(o=>{e[o]=tt(t[o])});return e}let Fr;const Mg=5;var Fe,_t,et,fn;class Ag{constructor(e){be(this,Fe,void 0);be(this,_t,void 0);be(this,et,void 0);be(this,fn,void 0);if(Fr)throw new Error("Only one HistoryManger allowed");Fr=this,ye(this,Fe,[]),ye(this,fn,(e==null?void 0:e.limit)||Mg),ye(this,et,-1)}init(e){ye(this,_t,e),this.save()}save(){const e=ue(tt(j(this,_t).value));if(this.canRedo){const o=j(this,Fe).length-1-j(this,et);ye(this,Fe,tt(j(this,Fe).splice(-o,o)))}j(this,Fe).length>=j(this,fn)&&j(this,Fe).shift(),j(this,Fe).push(tt(e.value)),ye(this,et,j(this,Fe).length-1),Zo.set("slides",{id:"slides",data:tt(e.value)})}undo(){this.canUndo&&(ci(this,et)._--,j(this,_t).value=tt(j(this,Fe)[j(this,et)]),Zo.set("slides",{id:"slides",data:tt(j(this,_t).value)}))}redo(){this.canRedo&&(ci(this,et)._++,j(this,_t).value=tt(j(this,Fe)[j(this,et)]),Zo.set("slides",{id:"slides",data:tt(j(this,_t).value)}))}get canUndo(){return j(this,Fe).length!==0&&j(this,et)>0}get canRedo(){return j(this,Fe).length!==0&&j(this,et)<j(this,Fe).length-1}}Fe=new WeakMap,_t=new WeakMap,et=new WeakMap,fn=new WeakMap;const Hr=nu(gl),dt=new Ag({limit:20});Zo.onConfigured().then(()=>{Hr.use(Ig),Hr.mount("#app")});export{Ie as a,Ct as c,Ne as o};
