var El=Object.defineProperty;var Sl=(o,e,t)=>e in o?El(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var Jo=(o,e,t)=>(Sl(o,typeof e!="symbol"?e+"":e,t),t),as=(o,e,t)=>{if(!e.has(o))throw TypeError("Cannot "+t)};var F=(o,e,t)=>(as(o,e,"read from private field"),t?t.call(o):e.get(o)),ue=(o,e,t)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,t)},pe=(o,e,t,n)=>(as(o,e,"write to private field"),n?n.call(o,t):e.set(o,t),t);var $n=(o,e,t,n)=>({set _(i){pe(o,e,i,t)},get _(){return F(o,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function yi(o,e){const t=Object.create(null),n=o.split(",");for(let i=0;i<n.length;i++)t[n[i]]=!0;return e?i=>!!t[i.toLowerCase()]:i=>!!t[i]}const fe={},Jt=[],nt=()=>{},Tl=()=>!1,Bl=/^on[^a-z]/,Cn=o=>Bl.test(o),wi=o=>o.startsWith("onUpdate:"),Se=Object.assign,xi=(o,e)=>{const t=o.indexOf(e);t>-1&&o.splice(t,1)},_l=Object.prototype.hasOwnProperty,ne=(o,e)=>_l.call(o,e),G=Array.isArray,Gt=o=>En(o)==="[object Map]",Zs=o=>En(o)==="[object Set]",ee=o=>typeof o=="function",ve=o=>typeof o=="string",Ci=o=>typeof o=="symbol",ge=o=>o!==null&&typeof o=="object",Js=o=>ge(o)&&ee(o.then)&&ee(o.catch),Gs=Object.prototype.toString,En=o=>Gs.call(o),Il=o=>En(o).slice(8,-1),Qs=o=>En(o)==="[object Object]",Ei=o=>ve(o)&&o!=="NaN"&&o[0]!=="-"&&""+parseInt(o,10)===o,ln=yi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sn=o=>{const e=Object.create(null);return t=>e[t]||(e[t]=o(t))},Ml=/-(\w)/g,ft=Sn(o=>o.replace(Ml,(e,t)=>t?t.toUpperCase():"")),Ol=/\B([A-Z])/g,mo=Sn(o=>o.replace(Ol,"-$1").toLowerCase()),Tn=Sn(o=>o.charAt(0).toUpperCase()+o.slice(1)),Un=Sn(o=>o?`on${Tn(o)}`:""),No=(o,e)=>!Object.is(o,e),zn=(o,e)=>{for(let t=0;t<o.length;t++)o[t](e)},pn=(o,e,t)=>{Object.defineProperty(o,e,{configurable:!0,enumerable:!1,value:t})},Al=o=>{const e=parseFloat(o);return isNaN(e)?o:e};let cs;const Gn=()=>cs||(cs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bn(o){if(G(o)){const e={};for(let t=0;t<o.length;t++){const n=o[t],i=ve(n)?Pl(n):Bn(n);if(i)for(const s in i)e[s]=i[s]}return e}else{if(ve(o))return o;if(ge(o))return o}}const Ll=/;(?![^(]*\))/g,Nl=/:([^]+)/,Rl=/\/\*[^]*?\*\//g;function Pl(o){const e={};return o.replace(Rl,"").split(Ll).forEach(t=>{if(t){const n=t.split(Nl);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function ce(o){let e="";if(ve(o))e=o;else if(G(o))for(let t=0;t<o.length;t++){const n=ce(o[t]);n&&(e+=n+" ")}else if(ge(o))for(const t in o)o[t]&&(e+=t+" ");return e.trim()}const Dl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Fl=yi(Dl);function er(o){return!!o||o===""}const Hl=o=>ve(o)?o:o==null?"":G(o)||ge(o)&&(o.toString===Gs||!ee(o.toString))?JSON.stringify(o,tr,2):String(o),tr=(o,e)=>e&&e.__v_isRef?tr(o,e.value):Gt(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i])=>(t[`${n} =>`]=i,t),{})}:Zs(e)?{[`Set(${e.size})`]:[...e.values()]}:ge(e)&&!G(e)&&!Qs(e)?String(e):e;let Ze;class jl{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ze,!e&&Ze&&(this.index=(Ze.scopes||(Ze.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=Ze;try{return Ze=this,e()}finally{Ze=t}}}on(){Ze=this}off(){Ze=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function $l(o,e=Ze){e&&e.active&&e.effects.push(o)}function Ul(){return Ze}const Si=o=>{const e=new Set(o);return e.w=0,e.n=0,e},or=o=>(o.w&Ot)>0,nr=o=>(o.n&Ot)>0,zl=({deps:o})=>{if(o.length)for(let e=0;e<o.length;e++)o[e].w|=Ot},Wl=o=>{const{deps:e}=o;if(e.length){let t=0;for(let n=0;n<e.length;n++){const i=e[n];or(i)&&!nr(i)?i.delete(o):e[t++]=i,i.w&=~Ot,i.n&=~Ot}e.length=t}},fn=new WeakMap;let Eo=0,Ot=1;const Qn=30;let Ge;const Ht=Symbol(""),ei=Symbol("");class Ti{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,$l(this,n)}run(){if(!this.active)return this.fn();let e=Ge,t=It;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Ge,Ge=this,It=!0,Ot=1<<++Eo,Eo<=Qn?zl(this):ds(this),this.fn()}finally{Eo<=Qn&&Wl(this),Ot=1<<--Eo,Ge=this.parent,It=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ge===this?this.deferStop=!0:this.active&&(ds(this),this.onStop&&this.onStop(),this.active=!1)}}function ds(o){const{deps:e}=o;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(o);e.length=0}}let It=!0;const ir=[];function bo(){ir.push(It),It=!1}function vo(){const o=ir.pop();It=o===void 0?!0:o}function Fe(o,e,t){if(It&&Ge){let n=fn.get(o);n||fn.set(o,n=new Map);let i=n.get(t);i||n.set(t,i=Si()),sr(i)}}function sr(o,e){let t=!1;Eo<=Qn?nr(o)||(o.n|=Ot,t=!or(o)):t=!o.has(Ge),t&&(o.add(Ge),Ge.deps.push(o))}function wt(o,e,t,n,i,s){const r=fn.get(o);if(!r)return;let l=[];if(e==="clear")l=[...r.values()];else if(t==="length"&&G(o)){const a=Number(n);r.forEach((c,d)=>{(d==="length"||d>=a)&&l.push(c)})}else switch(t!==void 0&&l.push(r.get(t)),e){case"add":G(o)?Ei(t)&&l.push(r.get("length")):(l.push(r.get(Ht)),Gt(o)&&l.push(r.get(ei)));break;case"delete":G(o)||(l.push(r.get(Ht)),Gt(o)&&l.push(r.get(ei)));break;case"set":Gt(o)&&l.push(r.get(Ht));break}if(l.length===1)l[0]&&ti(l[0]);else{const a=[];for(const c of l)c&&a.push(...c);ti(Si(a))}}function ti(o,e){const t=G(o)?o:[...o];for(const n of t)n.computed&&us(n);for(const n of t)n.computed||us(n)}function us(o,e){(o!==Ge||o.allowRecurse)&&(o.scheduler?o.scheduler():o.run())}function Kl(o,e){var t;return(t=fn.get(o))==null?void 0:t.get(e)}const ql=yi("__proto__,__v_isRef,__isVue"),rr=new Set(Object.getOwnPropertyNames(Symbol).filter(o=>o!=="arguments"&&o!=="caller").map(o=>Symbol[o]).filter(Ci)),Yl=Bi(),Xl=Bi(!1,!0),Vl=Bi(!0),hs=Zl();function Zl(){const o={};return["includes","indexOf","lastIndexOf"].forEach(e=>{o[e]=function(...t){const n=ie(this);for(let s=0,r=this.length;s<r;s++)Fe(n,"get",s+"");const i=n[e](...t);return i===-1||i===!1?n[e](...t.map(ie)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{o[e]=function(...t){bo();const n=ie(this)[e].apply(this,t);return vo(),n}}),o}function Jl(o){const e=ie(this);return Fe(e,"has",o),e.hasOwnProperty(o)}function Bi(o=!1,e=!1){return function(n,i,s){if(i==="__v_isReactive")return!o;if(i==="__v_isReadonly")return o;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(o?e?pa:ur:e?dr:cr).get(n))return n;const r=G(n);if(!o){if(r&&ne(hs,i))return Reflect.get(hs,i,s);if(i==="hasOwnProperty")return Jl}const l=Reflect.get(n,i,s);return(Ci(i)?rr.has(i):ql(i))||(o||Fe(n,"get",i),e)?l:Ee(l)?r&&Ei(i)?l:l.value:ge(l)?o?hr(l):Mi(l):l}}const Gl=lr(),Ql=lr(!0);function lr(o=!1){return function(t,n,i,s){let r=t[n];if(ao(r)&&Ee(r)&&!Ee(i))return!1;if(!o&&(!gn(i)&&!ao(i)&&(r=ie(r),i=ie(i)),!G(t)&&Ee(r)&&!Ee(i)))return r.value=i,!0;const l=G(t)&&Ei(n)?Number(n)<t.length:ne(t,n),a=Reflect.set(t,n,i,s);return t===ie(s)&&(l?No(i,r)&&wt(t,"set",n,i):wt(t,"add",n,i)),a}}function ea(o,e){const t=ne(o,e);o[e];const n=Reflect.deleteProperty(o,e);return n&&t&&wt(o,"delete",e,void 0),n}function ta(o,e){const t=Reflect.has(o,e);return(!Ci(e)||!rr.has(e))&&Fe(o,"has",e),t}function oa(o){return Fe(o,"iterate",G(o)?"length":Ht),Reflect.ownKeys(o)}const ar={get:Yl,set:Gl,deleteProperty:ea,has:ta,ownKeys:oa},na={get:Vl,set(o,e){return!0},deleteProperty(o,e){return!0}},ia=Se({},ar,{get:Xl,set:Ql}),_i=o=>o,_n=o=>Reflect.getPrototypeOf(o);function Go(o,e,t=!1,n=!1){o=o.__v_raw;const i=ie(o),s=ie(e);t||(e!==s&&Fe(i,"get",e),Fe(i,"get",s));const{has:r}=_n(i),l=n?_i:t?Ai:Ro;if(r.call(i,e))return l(o.get(e));if(r.call(i,s))return l(o.get(s));o!==i&&o.get(e)}function Qo(o,e=!1){const t=this.__v_raw,n=ie(t),i=ie(o);return e||(o!==i&&Fe(n,"has",o),Fe(n,"has",i)),o===i?t.has(o):t.has(o)||t.has(i)}function en(o,e=!1){return o=o.__v_raw,!e&&Fe(ie(o),"iterate",Ht),Reflect.get(o,"size",o)}function ps(o){o=ie(o);const e=ie(this);return _n(e).has.call(e,o)||(e.add(o),wt(e,"add",o,o)),this}function fs(o,e){e=ie(e);const t=ie(this),{has:n,get:i}=_n(t);let s=n.call(t,o);s||(o=ie(o),s=n.call(t,o));const r=i.call(t,o);return t.set(o,e),s?No(e,r)&&wt(t,"set",o,e):wt(t,"add",o,e),this}function gs(o){const e=ie(this),{has:t,get:n}=_n(e);let i=t.call(e,o);i||(o=ie(o),i=t.call(e,o)),n&&n.call(e,o);const s=e.delete(o);return i&&wt(e,"delete",o,void 0),s}function ms(){const o=ie(this),e=o.size!==0,t=o.clear();return e&&wt(o,"clear",void 0,void 0),t}function tn(o,e){return function(n,i){const s=this,r=s.__v_raw,l=ie(r),a=e?_i:o?Ai:Ro;return!o&&Fe(l,"iterate",Ht),r.forEach((c,d)=>n.call(i,a(c),a(d),s))}}function on(o,e,t){return function(...n){const i=this.__v_raw,s=ie(i),r=Gt(s),l=o==="entries"||o===Symbol.iterator&&r,a=o==="keys"&&r,c=i[o](...n),d=t?_i:e?Ai:Ro;return!e&&Fe(s,"iterate",a?ei:Ht),{next(){const{value:u,done:p}=c.next();return p?{value:u,done:p}:{value:l?[d(u[0]),d(u[1])]:d(u),done:p}},[Symbol.iterator](){return this}}}}function St(o){return function(...e){return o==="delete"?!1:this}}function sa(){const o={get(s){return Go(this,s)},get size(){return en(this)},has:Qo,add:ps,set:fs,delete:gs,clear:ms,forEach:tn(!1,!1)},e={get(s){return Go(this,s,!1,!0)},get size(){return en(this)},has:Qo,add:ps,set:fs,delete:gs,clear:ms,forEach:tn(!1,!0)},t={get(s){return Go(this,s,!0)},get size(){return en(this,!0)},has(s){return Qo.call(this,s,!0)},add:St("add"),set:St("set"),delete:St("delete"),clear:St("clear"),forEach:tn(!0,!1)},n={get(s){return Go(this,s,!0,!0)},get size(){return en(this,!0)},has(s){return Qo.call(this,s,!0)},add:St("add"),set:St("set"),delete:St("delete"),clear:St("clear"),forEach:tn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{o[s]=on(s,!1,!1),t[s]=on(s,!0,!1),e[s]=on(s,!1,!0),n[s]=on(s,!0,!0)}),[o,t,e,n]}const[ra,la,aa,ca]=sa();function Ii(o,e){const t=e?o?ca:aa:o?la:ra;return(n,i,s)=>i==="__v_isReactive"?!o:i==="__v_isReadonly"?o:i==="__v_raw"?n:Reflect.get(ne(t,i)&&i in n?t:n,i,s)}const da={get:Ii(!1,!1)},ua={get:Ii(!1,!0)},ha={get:Ii(!0,!1)},cr=new WeakMap,dr=new WeakMap,ur=new WeakMap,pa=new WeakMap;function fa(o){switch(o){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ga(o){return o.__v_skip||!Object.isExtensible(o)?0:fa(Il(o))}function Mi(o){return ao(o)?o:Oi(o,!1,ar,da,cr)}function ma(o){return Oi(o,!1,ia,ua,dr)}function hr(o){return Oi(o,!0,na,ha,ur)}function Oi(o,e,t,n,i){if(!ge(o)||o.__v_raw&&!(e&&o.__v_isReactive))return o;const s=i.get(o);if(s)return s;const r=ga(o);if(r===0)return o;const l=new Proxy(o,r===2?n:t);return i.set(o,l),l}function Qt(o){return ao(o)?Qt(o.__v_raw):!!(o&&o.__v_isReactive)}function ao(o){return!!(o&&o.__v_isReadonly)}function gn(o){return!!(o&&o.__v_isShallow)}function pr(o){return Qt(o)||ao(o)}function ie(o){const e=o&&o.__v_raw;return e?ie(e):o}function fr(o){return pn(o,"__v_skip",!0),o}const Ro=o=>ge(o)?Mi(o):o,Ai=o=>ge(o)?hr(o):o;function gr(o){It&&Ge&&(o=ie(o),sr(o.dep||(o.dep=Si())))}function mr(o,e){o=ie(o);const t=o.dep;t&&ti(t)}function Ee(o){return!!(o&&o.__v_isRef===!0)}function re(o){return ba(o,!1)}function ba(o,e){return Ee(o)?o:new va(o,e)}class va{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ie(e),this._value=t?e:Ro(e)}get value(){return gr(this),this._value}set value(e){const t=this.__v_isShallow||gn(e)||ao(e);e=t?e:ie(e),No(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Ro(e),mr(this))}}function we(o){return Ee(o)?o.value:o}const ka={get:(o,e,t)=>we(Reflect.get(o,e,t)),set:(o,e,t,n)=>{const i=o[e];return Ee(i)&&!Ee(t)?(i.value=t,!0):Reflect.set(o,e,t,n)}};function br(o){return Qt(o)?o:new Proxy(o,ka)}class ya{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Kl(ie(this._object),this._key)}}class wa{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function In(o,e,t){return Ee(o)?o:ee(o)?new wa(o):ge(o)&&arguments.length>1?xa(o,e,t):re(o)}function xa(o,e,t){const n=o[e];return Ee(n)?n:new ya(o,e,t)}class Ca{constructor(e,t,n,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Ti(e,()=>{this._dirty||(this._dirty=!0,mr(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=ie(this);return gr(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Ea(o,e,t=!1){let n,i;const s=ee(o);return s?(n=o,i=nt):(n=o.get,i=o.set),new Ca(n,i,s||!i,t)}function Mt(o,e,t,n){let i;try{i=n?o(...n):o()}catch(s){Yo(s,e,t)}return i}function it(o,e,t,n){if(ee(o)){const s=Mt(o,e,t,n);return s&&Js(s)&&s.catch(r=>{Yo(r,e,t)}),s}const i=[];for(let s=0;s<o.length;s++)i.push(it(o[s],e,t,n));return i}function Yo(o,e,t,n=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const r=e.proxy,l=t;for(;s;){const c=s.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](o,r,l)===!1)return}s=s.parent}const a=e.appContext.config.errorHandler;if(a){Mt(a,null,10,[o,r,l]);return}}Sa(o,t,i,n)}function Sa(o,e,t,n=!0){console.error(o)}let Po=!1,oi=!1;const Ae=[];let pt=0;const eo=[];let bt=null,Pt=0;const vr=Promise.resolve();let Li=null;function Ta(o){const e=Li||vr;return o?e.then(this?o.bind(this):o):e}function Ba(o){let e=pt+1,t=Ae.length;for(;e<t;){const n=e+t>>>1;Do(Ae[n])<o?e=n+1:t=n}return e}function Mn(o){(!Ae.length||!Ae.includes(o,Po&&o.allowRecurse?pt+1:pt))&&(o.id==null?Ae.push(o):Ae.splice(Ba(o.id),0,o),kr())}function kr(){!Po&&!oi&&(oi=!0,Li=vr.then(wr))}function _a(o){const e=Ae.indexOf(o);e>pt&&Ae.splice(e,1)}function Ia(o){G(o)?eo.push(...o):(!bt||!bt.includes(o,o.allowRecurse?Pt+1:Pt))&&eo.push(o),kr()}function bs(o,e=Po?pt+1:0){for(;e<Ae.length;e++){const t=Ae[e];t&&t.pre&&(Ae.splice(e,1),e--,t())}}function yr(o){if(eo.length){const e=[...new Set(eo)];if(eo.length=0,bt){bt.push(...e);return}for(bt=e,bt.sort((t,n)=>Do(t)-Do(n)),Pt=0;Pt<bt.length;Pt++)bt[Pt]();bt=null,Pt=0}}const Do=o=>o.id==null?1/0:o.id,Ma=(o,e)=>{const t=Do(o)-Do(e);if(t===0){if(o.pre&&!e.pre)return-1;if(e.pre&&!o.pre)return 1}return t};function wr(o){oi=!1,Po=!0,Ae.sort(Ma);const e=nt;try{for(pt=0;pt<Ae.length;pt++){const t=Ae[pt];t&&t.active!==!1&&Mt(t,null,14)}}finally{pt=0,Ae.length=0,yr(),Po=!1,Li=null,(Ae.length||eo.length)&&wr()}}function Oa(o,e,...t){if(o.isUnmounted)return;const n=o.vnode.props||fe;let i=t;const s=e.startsWith("update:"),r=s&&e.slice(7);if(r&&r in n){const d=`${r==="modelValue"?"model":r}Modifiers`,{number:u,trim:p}=n[d]||fe;p&&(i=t.map(k=>ve(k)?k.trim():k)),u&&(i=t.map(Al))}let l,a=n[l=Un(e)]||n[l=Un(ft(e))];!a&&s&&(a=n[l=Un(mo(e))]),a&&it(a,o,6,i);const c=n[l+"Once"];if(c){if(!o.emitted)o.emitted={};else if(o.emitted[l])return;o.emitted[l]=!0,it(c,o,6,i)}}function xr(o,e,t=!1){const n=e.emitsCache,i=n.get(o);if(i!==void 0)return i;const s=o.emits;let r={},l=!1;if(!ee(o)){const a=c=>{const d=xr(c,e,!0);d&&(l=!0,Se(r,d))};!t&&e.mixins.length&&e.mixins.forEach(a),o.extends&&a(o.extends),o.mixins&&o.mixins.forEach(a)}return!s&&!l?(ge(o)&&n.set(o,null),null):(G(s)?s.forEach(a=>r[a]=null):Se(r,s),ge(o)&&n.set(o,r),r)}function On(o,e){return!o||!Cn(e)?!1:(e=e.slice(2).replace(/Once$/,""),ne(o,e[0].toLowerCase()+e.slice(1))||ne(o,mo(e))||ne(o,e))}let Ne=null,Cr=null;function mn(o){const e=Ne;return Ne=o,Cr=o&&o.type.__scopeId||null,e}function Ni(o,e=Ne,t){if(!e||o._n)return o;const n=(...i)=>{n._d&&_s(-1);const s=mn(e);let r;try{r=o(...i)}finally{mn(s),n._d&&_s(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Wn(o){const{type:e,vnode:t,proxy:n,withProxy:i,props:s,propsOptions:[r],slots:l,attrs:a,emit:c,render:d,renderCache:u,data:p,setupState:k,ctx:h,inheritAttrs:S}=o;let b,E;const T=mn(o);try{if(t.shapeFlag&4){const v=i||n;b=ht(d.call(v,v,u,s,k,p,h)),E=a}else{const v=e;b=ht(v.length>1?v(s,{attrs:a,slots:l,emit:c}):v(s,null)),E=e.props?a:Aa(a)}}catch(v){Mo.length=0,Yo(v,o,1),b=le(At)}let y=b;if(E&&S!==!1){const v=Object.keys(E),{shapeFlag:B}=y;v.length&&B&7&&(r&&v.some(wi)&&(E=La(E,r)),y=co(y,E))}return t.dirs&&(y=co(y),y.dirs=y.dirs?y.dirs.concat(t.dirs):t.dirs),t.transition&&(y.transition=t.transition),b=y,mn(T),b}const Aa=o=>{let e;for(const t in o)(t==="class"||t==="style"||Cn(t))&&((e||(e={}))[t]=o[t]);return e},La=(o,e)=>{const t={};for(const n in o)(!wi(n)||!(n.slice(9)in e))&&(t[n]=o[n]);return t};function Na(o,e,t){const{props:n,children:i,component:s}=o,{props:r,children:l,patchFlag:a}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&a>=0){if(a&1024)return!0;if(a&16)return n?vs(n,r,c):!!r;if(a&8){const d=e.dynamicProps;for(let u=0;u<d.length;u++){const p=d[u];if(r[p]!==n[p]&&!On(c,p))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:n===r?!1:n?r?vs(n,r,c):!0:!!r;return!1}function vs(o,e,t){const n=Object.keys(e);if(n.length!==Object.keys(o).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(e[s]!==o[s]&&!On(t,s))return!0}return!1}function Ra({vnode:o,parent:e},t){for(;e&&e.subTree===o;)(o=e.vnode).el=t,e=e.parent}const Pa=o=>o.__isSuspense;function Da(o,e){e&&e.pendingBranch?G(o)?e.effects.push(...o):e.effects.push(o):Ia(o)}const nn={};function to(o,e,t){return Er(o,e,t)}function Er(o,e,{immediate:t,deep:n,flush:i,onTrack:s,onTrigger:r}=fe){var l;const a=Ul()===((l=Ce)==null?void 0:l.scope)?Ce:null;let c,d=!1,u=!1;if(Ee(o)?(c=()=>o.value,d=gn(o)):Qt(o)?(c=()=>o,n=!0):G(o)?(u=!0,d=o.some(v=>Qt(v)||gn(v)),c=()=>o.map(v=>{if(Ee(v))return v.value;if(Qt(v))return Zt(v);if(ee(v))return Mt(v,a,2)})):ee(o)?e?c=()=>Mt(o,a,2):c=()=>{if(!(a&&a.isUnmounted))return p&&p(),it(o,a,3,[k])}:c=nt,e&&n){const v=c;c=()=>Zt(v())}let p,k=v=>{p=T.onStop=()=>{Mt(v,a,4)}},h;if(ho)if(k=nt,e?t&&it(e,a,3,[c(),u?[]:void 0,k]):c(),i==="sync"){const v=Rc();h=v.__watcherHandles||(v.__watcherHandles=[])}else return nt;let S=u?new Array(o.length).fill(nn):nn;const b=()=>{if(T.active)if(e){const v=T.run();(n||d||(u?v.some((B,I)=>No(B,S[I])):No(v,S)))&&(p&&p(),it(e,a,3,[v,S===nn?void 0:u&&S[0]===nn?[]:S,k]),S=v)}else T.run()};b.allowRecurse=!!e;let E;i==="sync"?E=b:i==="post"?E=()=>Pe(b,a&&a.suspense):(b.pre=!0,a&&(b.id=a.uid),E=()=>Mn(b));const T=new Ti(c,E);e?t?b():S=T.run():i==="post"?Pe(T.run.bind(T),a&&a.suspense):T.run();const y=()=>{T.stop(),a&&a.scope&&xi(a.scope.effects,T)};return h&&h.push(y),y}function Fa(o,e,t){const n=this.proxy,i=ve(o)?o.includes(".")?Sr(n,o):()=>n[o]:o.bind(n,n);let s;ee(e)?s=e:(s=e.handler,t=e);const r=Ce;uo(this);const l=Er(i,s.bind(n),t);return r?uo(r):jt(),l}function Sr(o,e){const t=e.split(".");return()=>{let n=o;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}function Zt(o,e){if(!ge(o)||o.__v_skip||(e=e||new Set,e.has(o)))return o;if(e.add(o),Ee(o))Zt(o.value,e);else if(G(o))for(let t=0;t<o.length;t++)Zt(o[t],e);else if(Zs(o)||Gt(o))o.forEach(t=>{Zt(t,e)});else if(Qs(o))for(const t in o)Zt(o[t],e);return o}function Nt(o,e,t,n){const i=o.dirs,s=e&&e.dirs;for(let r=0;r<i.length;r++){const l=i[r];s&&(l.oldValue=s[r].value);let a=l.dir[n];a&&(bo(),it(a,t,8,[o.el,l,o,e]),vo())}}function Ye(o,e){return ee(o)?(()=>Se({name:o.name},e,{setup:o}))():o}const _o=o=>!!o.type.__asyncLoader;function Ha(o){ee(o)&&(o={loader:o});const{loader:e,loadingComponent:t,errorComponent:n,delay:i=200,timeout:s,suspensible:r=!0,onError:l}=o;let a=null,c,d=0;const u=()=>(d++,a=null,p()),p=()=>{let k;return a||(k=a=e().catch(h=>{if(h=h instanceof Error?h:new Error(String(h)),l)return new Promise((S,b)=>{l(h,()=>S(u()),()=>b(h),d+1)});throw h}).then(h=>k!==a&&a?a:(h&&(h.__esModule||h[Symbol.toStringTag]==="Module")&&(h=h.default),c=h,h)))};return Ye({name:"AsyncComponentWrapper",__asyncLoader:p,get __asyncResolved(){return c},setup(){const k=Ce;if(c)return()=>Kn(c,k);const h=T=>{a=null,Yo(T,k,13,!n)};if(r&&k.suspense||ho)return p().then(T=>()=>Kn(T,k)).catch(T=>(h(T),()=>n?le(n,{error:T}):null));const S=re(!1),b=re(),E=re(!!i);return i&&setTimeout(()=>{E.value=!1},i),s!=null&&setTimeout(()=>{if(!S.value&&!b.value){const T=new Error(`Async component timed out after ${s}ms.`);h(T),b.value=T}},s),p().then(()=>{S.value=!0,k.parent&&Ri(k.parent.vnode)&&Mn(k.parent.update)}).catch(T=>{h(T),b.value=T}),()=>{if(S.value&&c)return Kn(c,k);if(b.value&&n)return le(n,{error:b.value});if(t&&!E.value)return le(t)}}})}function Kn(o,e){const{ref:t,props:n,children:i,ce:s}=e.vnode,r=le(o,n,i);return r.ref=t,r.ce=s,delete e.vnode.ce,r}const Ri=o=>o.type.__isKeepAlive;function ja(o,e){Tr(o,"a",e)}function $a(o,e){Tr(o,"da",e)}function Tr(o,e,t=Ce){const n=o.__wdc||(o.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return o()});if(An(e,n,t),t){let i=t.parent;for(;i&&i.parent;)Ri(i.parent.vnode)&&Ua(n,e,t,i),i=i.parent}}function Ua(o,e,t,n){const i=An(e,o,n,!0);Pi(()=>{xi(n[e],i)},t)}function An(o,e,t=Ce,n=!1){if(t){const i=t[o]||(t[o]=[]),s=e.__weh||(e.__weh=(...r)=>{if(t.isUnmounted)return;bo(),uo(t);const l=it(e,t,o,r);return jt(),vo(),l});return n?i.unshift(s):i.push(s),s}}const Ct=o=>(e,t=Ce)=>(!ho||o==="sp")&&An(o,(...n)=>e(...n),t),za=Ct("bm"),Xo=Ct("m"),Wa=Ct("bu"),Ka=Ct("u"),qa=Ct("bum"),Pi=Ct("um"),Ya=Ct("sp"),Xa=Ct("rtg"),Va=Ct("rtc");function Za(o,e=Ce){An("ec",o,e)}const Br="components",_r=Symbol.for("v-ndc");function Ja(o){return ve(o)?Ga(Br,o,!1)||o:o||_r}function Ga(o,e,t=!0,n=!1){const i=Ne||Ce;if(i){const s=i.type;if(o===Br){const l=Oc(s,!1);if(l&&(l===e||l===ft(e)||l===Tn(ft(e))))return s}const r=ks(i[o]||s[o],e)||ks(i.appContext[o],e);return!r&&n?s:r}}function ks(o,e){return o&&(o[e]||o[ft(e)]||o[Tn(ft(e))])}function Qa(o,e,t,n){let i;const s=t&&t[n];if(G(o)||ve(o)){i=new Array(o.length);for(let r=0,l=o.length;r<l;r++)i[r]=e(o[r],r,void 0,s&&s[r])}else if(typeof o=="number"){i=new Array(o);for(let r=0;r<o;r++)i[r]=e(r+1,r,void 0,s&&s[r])}else if(ge(o))if(o[Symbol.iterator])i=Array.from(o,(r,l)=>e(r,l,void 0,s&&s[l]));else{const r=Object.keys(o);i=new Array(r.length);for(let l=0,a=r.length;l<a;l++){const c=r[l];i[l]=e(o[c],c,l,s&&s[l])}}else i=[];return t&&(t[n]=i),i}function ec(o,e,t={},n,i){if(Ne.isCE||Ne.parent&&_o(Ne.parent)&&Ne.parent.isCE)return e!=="default"&&(t.name=e),le("slot",t,n&&n());let s=o[e];s&&s._c&&(s._d=!1),Be();const r=s&&Ir(s(t)),l=zt(Ue,{key:t.key||r&&r.key||`_${e}`},r||(n?n():[]),r&&o._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function Ir(o){return o.some(e=>Hr(e)?!(e.type===At||e.type===Ue&&!Ir(e.children)):!0)?o:null}const ni=o=>o?$r(o)?Ui(o)||o.proxy:ni(o.parent):null,Io=Se(Object.create(null),{$:o=>o,$el:o=>o.vnode.el,$data:o=>o.data,$props:o=>o.props,$attrs:o=>o.attrs,$slots:o=>o.slots,$refs:o=>o.refs,$parent:o=>ni(o.parent),$root:o=>ni(o.root),$emit:o=>o.emit,$options:o=>Di(o),$forceUpdate:o=>o.f||(o.f=()=>Mn(o.update)),$nextTick:o=>o.n||(o.n=Ta.bind(o.proxy)),$watch:o=>Fa.bind(o)}),qn=(o,e)=>o!==fe&&!o.__isScriptSetup&&ne(o,e),tc={get({_:o},e){const{ctx:t,setupState:n,data:i,props:s,accessCache:r,type:l,appContext:a}=o;let c;if(e[0]!=="$"){const k=r[e];if(k!==void 0)switch(k){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(qn(n,e))return r[e]=1,n[e];if(i!==fe&&ne(i,e))return r[e]=2,i[e];if((c=o.propsOptions[0])&&ne(c,e))return r[e]=3,s[e];if(t!==fe&&ne(t,e))return r[e]=4,t[e];ii&&(r[e]=0)}}const d=Io[e];let u,p;if(d)return e==="$attrs"&&Fe(o,"get",e),d(o);if((u=l.__cssModules)&&(u=u[e]))return u;if(t!==fe&&ne(t,e))return r[e]=4,t[e];if(p=a.config.globalProperties,ne(p,e))return p[e]},set({_:o},e,t){const{data:n,setupState:i,ctx:s}=o;return qn(i,e)?(i[e]=t,!0):n!==fe&&ne(n,e)?(n[e]=t,!0):ne(o.props,e)||e[0]==="$"&&e.slice(1)in o?!1:(s[e]=t,!0)},has({_:{data:o,setupState:e,accessCache:t,ctx:n,appContext:i,propsOptions:s}},r){let l;return!!t[r]||o!==fe&&ne(o,r)||qn(e,r)||(l=s[0])&&ne(l,r)||ne(n,r)||ne(Io,r)||ne(i.config.globalProperties,r)},defineProperty(o,e,t){return t.get!=null?o._.accessCache[e]=0:ne(t,"value")&&this.set(o,e,t.value,null),Reflect.defineProperty(o,e,t)}};function ys(o){return G(o)?o.reduce((e,t)=>(e[t]=null,e),{}):o}let ii=!0;function oc(o){const e=Di(o),t=o.proxy,n=o.ctx;ii=!1,e.beforeCreate&&ws(e.beforeCreate,o,"bc");const{data:i,computed:s,methods:r,watch:l,provide:a,inject:c,created:d,beforeMount:u,mounted:p,beforeUpdate:k,updated:h,activated:S,deactivated:b,beforeDestroy:E,beforeUnmount:T,destroyed:y,unmounted:v,render:B,renderTracked:I,renderTriggered:O,errorCaptured:m,serverPrefetch:f,expose:w,inheritAttrs:x,components:A,directives:M,filters:H}=e;if(c&&nc(c,n,null),r)for(const Q in r){const V=r[Q];ee(V)&&(n[Q]=V.bind(t))}if(i){const Q=i.call(t,t);ge(Q)&&(o.data=Mi(Q))}if(ii=!0,s)for(const Q in s){const V=s[Q],ye=ee(V)?V.bind(t,t):ee(V.get)?V.get.bind(t,t):nt,Xe=!ee(V)&&ee(V.set)?V.set.bind(t):nt,Re=Lc({get:ye,set:Xe});Object.defineProperty(n,Q,{enumerable:!0,configurable:!0,get:()=>Re.value,set:Ie=>Re.value=Ie})}if(l)for(const Q in l)Mr(l[Q],n,t,Q);if(a){const Q=ee(a)?a.call(t):a;Reflect.ownKeys(Q).forEach(V=>{cc(V,Q[V])})}d&&ws(d,o,"c");function W(Q,V){G(V)?V.forEach(ye=>Q(ye.bind(t))):V&&Q(V.bind(t))}if(W(za,u),W(Xo,p),W(Wa,k),W(Ka,h),W(ja,S),W($a,b),W(Za,m),W(Va,I),W(Xa,O),W(qa,T),W(Pi,v),W(Ya,f),G(w))if(w.length){const Q=o.exposed||(o.exposed={});w.forEach(V=>{Object.defineProperty(Q,V,{get:()=>t[V],set:ye=>t[V]=ye})})}else o.exposed||(o.exposed={});B&&o.render===nt&&(o.render=B),x!=null&&(o.inheritAttrs=x),A&&(o.components=A),M&&(o.directives=M)}function nc(o,e,t=nt){G(o)&&(o=si(o));for(const n in o){const i=o[n];let s;ge(i)?"default"in i?s=an(i.from||n,i.default,!0):s=an(i.from||n):s=an(i),Ee(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:r=>s.value=r}):e[n]=s}}function ws(o,e,t){it(G(o)?o.map(n=>n.bind(e.proxy)):o.bind(e.proxy),e,t)}function Mr(o,e,t,n){const i=n.includes(".")?Sr(t,n):()=>t[n];if(ve(o)){const s=e[o];ee(s)&&to(i,s)}else if(ee(o))to(i,o.bind(t));else if(ge(o))if(G(o))o.forEach(s=>Mr(s,e,t,n));else{const s=ee(o.handler)?o.handler.bind(t):e[o.handler];ee(s)&&to(i,s,o)}}function Di(o){const e=o.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:r}}=o.appContext,l=s.get(e);let a;return l?a=l:!i.length&&!t&&!n?a=e:(a={},i.length&&i.forEach(c=>bn(a,c,r,!0)),bn(a,e,r)),ge(e)&&s.set(e,a),a}function bn(o,e,t,n=!1){const{mixins:i,extends:s}=e;s&&bn(o,s,t,!0),i&&i.forEach(r=>bn(o,r,t,!0));for(const r in e)if(!(n&&r==="expose")){const l=ic[r]||t&&t[r];o[r]=l?l(o[r],e[r]):e[r]}return o}const ic={data:xs,props:Cs,emits:Cs,methods:So,computed:So,beforeCreate:Le,created:Le,beforeMount:Le,mounted:Le,beforeUpdate:Le,updated:Le,beforeDestroy:Le,beforeUnmount:Le,destroyed:Le,unmounted:Le,activated:Le,deactivated:Le,errorCaptured:Le,serverPrefetch:Le,components:So,directives:So,watch:rc,provide:xs,inject:sc};function xs(o,e){return e?o?function(){return Se(ee(o)?o.call(this,this):o,ee(e)?e.call(this,this):e)}:e:o}function sc(o,e){return So(si(o),si(e))}function si(o){if(G(o)){const e={};for(let t=0;t<o.length;t++)e[o[t]]=o[t];return e}return o}function Le(o,e){return o?[...new Set([].concat(o,e))]:e}function So(o,e){return o?Se(Object.create(null),o,e):e}function Cs(o,e){return o?G(o)&&G(e)?[...new Set([...o,...e])]:Se(Object.create(null),ys(o),ys(e??{})):e}function rc(o,e){if(!o)return e;if(!e)return o;const t=Se(Object.create(null),o);for(const n in e)t[n]=Le(o[n],e[n]);return t}function Or(){return{app:null,config:{isNativeTag:Tl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lc=0;function ac(o,e){return function(n,i=null){ee(n)||(n=Se({},n)),i!=null&&!ge(i)&&(i=null);const s=Or(),r=new Set;let l=!1;const a=s.app={_uid:lc++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:Pc,get config(){return s.config},set config(c){},use(c,...d){return r.has(c)||(c&&ee(c.install)?(r.add(c),c.install(a,...d)):ee(c)&&(r.add(c),c(a,...d))),a},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),a},component(c,d){return d?(s.components[c]=d,a):s.components[c]},directive(c,d){return d?(s.directives[c]=d,a):s.directives[c]},mount(c,d,u){if(!l){const p=le(n,i);return p.appContext=s,d&&e?e(p,c):o(p,c,u),l=!0,a._container=c,c.__vue_app__=a,Ui(p.component)||p.component.proxy}},unmount(){l&&(o(null,a._container),delete a._container.__vue_app__)},provide(c,d){return s.provides[c]=d,a},runWithContext(c){vn=a;try{return c()}finally{vn=null}}};return a}}let vn=null;function cc(o,e){if(Ce){let t=Ce.provides;const n=Ce.parent&&Ce.parent.provides;n===t&&(t=Ce.provides=Object.create(n)),t[o]=e}}function an(o,e,t=!1){const n=Ce||Ne;if(n||vn){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:vn._context.provides;if(i&&o in i)return i[o];if(arguments.length>1)return t&&ee(e)?e.call(n&&n.proxy):e}}function dc(o,e,t,n=!1){const i={},s={};pn(s,Nn,1),o.propsDefaults=Object.create(null),Ar(o,e,i,s);for(const r in o.propsOptions[0])r in i||(i[r]=void 0);t?o.props=n?i:ma(i):o.type.props?o.props=i:o.props=s,o.attrs=s}function uc(o,e,t,n){const{props:i,attrs:s,vnode:{patchFlag:r}}=o,l=ie(i),[a]=o.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const d=o.vnode.dynamicProps;for(let u=0;u<d.length;u++){let p=d[u];if(On(o.emitsOptions,p))continue;const k=e[p];if(a)if(ne(s,p))k!==s[p]&&(s[p]=k,c=!0);else{const h=ft(p);i[h]=ri(a,l,h,k,o,!1)}else k!==s[p]&&(s[p]=k,c=!0)}}}else{Ar(o,e,i,s)&&(c=!0);let d;for(const u in l)(!e||!ne(e,u)&&((d=mo(u))===u||!ne(e,d)))&&(a?t&&(t[u]!==void 0||t[d]!==void 0)&&(i[u]=ri(a,l,u,void 0,o,!0)):delete i[u]);if(s!==l)for(const u in s)(!e||!ne(e,u))&&(delete s[u],c=!0)}c&&wt(o,"set","$attrs")}function Ar(o,e,t,n){const[i,s]=o.propsOptions;let r=!1,l;if(e)for(let a in e){if(ln(a))continue;const c=e[a];let d;i&&ne(i,d=ft(a))?!s||!s.includes(d)?t[d]=c:(l||(l={}))[d]=c:On(o.emitsOptions,a)||(!(a in n)||c!==n[a])&&(n[a]=c,r=!0)}if(s){const a=ie(t),c=l||fe;for(let d=0;d<s.length;d++){const u=s[d];t[u]=ri(i,a,u,c[u],o,!ne(c,u))}}return r}function ri(o,e,t,n,i,s){const r=o[t];if(r!=null){const l=ne(r,"default");if(l&&n===void 0){const a=r.default;if(r.type!==Function&&!r.skipFactory&&ee(a)){const{propsDefaults:c}=i;t in c?n=c[t]:(uo(i),n=c[t]=a.call(null,e),jt())}else n=a}r[0]&&(s&&!l?n=!1:r[1]&&(n===""||n===mo(t))&&(n=!0))}return n}function Lr(o,e,t=!1){const n=e.propsCache,i=n.get(o);if(i)return i;const s=o.props,r={},l=[];let a=!1;if(!ee(o)){const d=u=>{a=!0;const[p,k]=Lr(u,e,!0);Se(r,p),k&&l.push(...k)};!t&&e.mixins.length&&e.mixins.forEach(d),o.extends&&d(o.extends),o.mixins&&o.mixins.forEach(d)}if(!s&&!a)return ge(o)&&n.set(o,Jt),Jt;if(G(s))for(let d=0;d<s.length;d++){const u=ft(s[d]);Es(u)&&(r[u]=fe)}else if(s)for(const d in s){const u=ft(d);if(Es(u)){const p=s[d],k=r[u]=G(p)||ee(p)?{type:p}:Se({},p);if(k){const h=Bs(Boolean,k.type),S=Bs(String,k.type);k[0]=h>-1,k[1]=S<0||h<S,(h>-1||ne(k,"default"))&&l.push(u)}}}const c=[r,l];return ge(o)&&n.set(o,c),c}function Es(o){return o[0]!=="$"}function Ss(o){const e=o&&o.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:o===null?"null":""}function Ts(o,e){return Ss(o)===Ss(e)}function Bs(o,e){return G(e)?e.findIndex(t=>Ts(t,o)):ee(e)&&Ts(e,o)?0:-1}const Nr=o=>o[0]==="_"||o==="$stable",Fi=o=>G(o)?o.map(ht):[ht(o)],hc=(o,e,t)=>{if(e._n)return e;const n=Ni((...i)=>Fi(e(...i)),t);return n._c=!1,n},Rr=(o,e,t)=>{const n=o._ctx;for(const i in o){if(Nr(i))continue;const s=o[i];if(ee(s))e[i]=hc(i,s,n);else if(s!=null){const r=Fi(s);e[i]=()=>r}}},Pr=(o,e)=>{const t=Fi(e);o.slots.default=()=>t},pc=(o,e)=>{if(o.vnode.shapeFlag&32){const t=e._;t?(o.slots=ie(e),pn(e,"_",t)):Rr(e,o.slots={})}else o.slots={},e&&Pr(o,e);pn(o.slots,Nn,1)},fc=(o,e,t)=>{const{vnode:n,slots:i}=o;let s=!0,r=fe;if(n.shapeFlag&32){const l=e._;l?t&&l===1?s=!1:(Se(i,e),!t&&l===1&&delete i._):(s=!e.$stable,Rr(e,i)),r=e}else e&&(Pr(o,e),r={default:1});if(s)for(const l in i)!Nr(l)&&!(l in r)&&delete i[l]};function li(o,e,t,n,i=!1){if(G(o)){o.forEach((p,k)=>li(p,e&&(G(e)?e[k]:e),t,n,i));return}if(_o(n)&&!i)return;const s=n.shapeFlag&4?Ui(n.component)||n.component.proxy:n.el,r=i?null:s,{i:l,r:a}=o,c=e&&e.r,d=l.refs===fe?l.refs={}:l.refs,u=l.setupState;if(c!=null&&c!==a&&(ve(c)?(d[c]=null,ne(u,c)&&(u[c]=null)):Ee(c)&&(c.value=null)),ee(a))Mt(a,l,12,[r,d]);else{const p=ve(a),k=Ee(a);if(p||k){const h=()=>{if(o.f){const S=p?ne(u,a)?u[a]:d[a]:a.value;i?G(S)&&xi(S,s):G(S)?S.includes(s)||S.push(s):p?(d[a]=[s],ne(u,a)&&(u[a]=d[a])):(a.value=[s],o.k&&(d[o.k]=a.value))}else p?(d[a]=r,ne(u,a)&&(u[a]=r)):k&&(a.value=r,o.k&&(d[o.k]=r))};r?(h.id=-1,Pe(h,t)):h()}}}const Pe=Da;function gc(o){return mc(o)}function mc(o,e){const t=Gn();t.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:r,createText:l,createComment:a,setText:c,setElementText:d,parentNode:u,nextSibling:p,setScopeId:k=nt,insertStaticContent:h}=o,S=(g,C,N,P=null,R=null,$=null,z=!1,j=null,U=!!C.dynamicChildren)=>{if(g===C)return;g&&!wo(g,C)&&(P=Zo(g),Ie(g,R,$,!0),g=null),C.patchFlag===-2&&(U=!1,C.dynamicChildren=null);const{type:D,ref:Y,shapeFlag:K}=C;switch(D){case Ln:b(g,C,N,P);break;case At:E(g,C,N,P);break;case Yn:g==null&&T(C,N,P,z);break;case Ue:A(g,C,N,P,R,$,z,j,U);break;default:K&1?B(g,C,N,P,R,$,z,j,U):K&6?M(g,C,N,P,R,$,z,j,U):(K&64||K&128)&&D.process(g,C,N,P,R,$,z,j,U,Wt)}Y!=null&&R&&li(Y,g&&g.ref,$,C||g,!C)},b=(g,C,N,P)=>{if(g==null)n(C.el=l(C.children),N,P);else{const R=C.el=g.el;C.children!==g.children&&c(R,C.children)}},E=(g,C,N,P)=>{g==null?n(C.el=a(C.children||""),N,P):C.el=g.el},T=(g,C,N,P)=>{[g.el,g.anchor]=h(g.children,C,N,P,g.el,g.anchor)},y=({el:g,anchor:C},N,P)=>{let R;for(;g&&g!==C;)R=p(g),n(g,N,P),g=R;n(C,N,P)},v=({el:g,anchor:C})=>{let N;for(;g&&g!==C;)N=p(g),i(g),g=N;i(C)},B=(g,C,N,P,R,$,z,j,U)=>{z=z||C.type==="svg",g==null?I(C,N,P,R,$,z,j,U):f(g,C,R,$,z,j,U)},I=(g,C,N,P,R,$,z,j)=>{let U,D;const{type:Y,props:K,shapeFlag:X,transition:J,dirs:te}=g;if(U=g.el=r(g.type,$,K&&K.is,K),X&8?d(U,g.children):X&16&&m(g.children,U,null,P,R,$&&Y!=="foreignObject",z,j),te&&Nt(g,null,P,"created"),O(U,g,g.scopeId,z,P),K){for(const ae in K)ae!=="value"&&!ln(ae)&&s(U,ae,null,K[ae],$,g.children,P,R,mt);"value"in K&&s(U,"value",null,K.value),(D=K.onVnodeBeforeMount)&&lt(D,P,g)}te&&Nt(g,null,P,"beforeMount");const de=(!R||R&&!R.pendingBranch)&&J&&!J.persisted;de&&J.beforeEnter(U),n(U,C,N),((D=K&&K.onVnodeMounted)||de||te)&&Pe(()=>{D&&lt(D,P,g),de&&J.enter(U),te&&Nt(g,null,P,"mounted")},R)},O=(g,C,N,P,R)=>{if(N&&k(g,N),P)for(let $=0;$<P.length;$++)k(g,P[$]);if(R){let $=R.subTree;if(C===$){const z=R.vnode;O(g,z,z.scopeId,z.slotScopeIds,R.parent)}}},m=(g,C,N,P,R,$,z,j,U=0)=>{for(let D=U;D<g.length;D++){const Y=g[D]=j?Tt(g[D]):ht(g[D]);S(null,Y,C,N,P,R,$,z,j)}},f=(g,C,N,P,R,$,z)=>{const j=C.el=g.el;let{patchFlag:U,dynamicChildren:D,dirs:Y}=C;U|=g.patchFlag&16;const K=g.props||fe,X=C.props||fe;let J;N&&Rt(N,!1),(J=X.onVnodeBeforeUpdate)&&lt(J,N,C,g),Y&&Nt(C,g,N,"beforeUpdate"),N&&Rt(N,!0);const te=R&&C.type!=="foreignObject";if(D?w(g.dynamicChildren,D,j,N,P,te,$):z||V(g,C,j,null,N,P,te,$,!1),U>0){if(U&16)x(j,C,K,X,N,P,R);else if(U&2&&K.class!==X.class&&s(j,"class",null,X.class,R),U&4&&s(j,"style",K.style,X.style,R),U&8){const de=C.dynamicProps;for(let ae=0;ae<de.length;ae++){const be=de[ae],Ve=K[be],Kt=X[be];(Kt!==Ve||be==="value")&&s(j,be,Ve,Kt,R,g.children,N,P,mt)}}U&1&&g.children!==C.children&&d(j,C.children)}else!z&&D==null&&x(j,C,K,X,N,P,R);((J=X.onVnodeUpdated)||Y)&&Pe(()=>{J&&lt(J,N,C,g),Y&&Nt(C,g,N,"updated")},P)},w=(g,C,N,P,R,$,z)=>{for(let j=0;j<C.length;j++){const U=g[j],D=C[j],Y=U.el&&(U.type===Ue||!wo(U,D)||U.shapeFlag&70)?u(U.el):N;S(U,D,Y,null,P,R,$,z,!0)}},x=(g,C,N,P,R,$,z)=>{if(N!==P){if(N!==fe)for(const j in N)!ln(j)&&!(j in P)&&s(g,j,N[j],null,z,C.children,R,$,mt);for(const j in P){if(ln(j))continue;const U=P[j],D=N[j];U!==D&&j!=="value"&&s(g,j,D,U,z,C.children,R,$,mt)}"value"in P&&s(g,"value",N.value,P.value)}},A=(g,C,N,P,R,$,z,j,U)=>{const D=C.el=g?g.el:l(""),Y=C.anchor=g?g.anchor:l("");let{patchFlag:K,dynamicChildren:X,slotScopeIds:J}=C;J&&(j=j?j.concat(J):J),g==null?(n(D,N,P),n(Y,N,P),m(C.children,N,Y,R,$,z,j,U)):K>0&&K&64&&X&&g.dynamicChildren?(w(g.dynamicChildren,X,N,R,$,z,j),(C.key!=null||R&&C===R.subTree)&&Dr(g,C,!0)):V(g,C,N,Y,R,$,z,j,U)},M=(g,C,N,P,R,$,z,j,U)=>{C.slotScopeIds=j,g==null?C.shapeFlag&512?R.ctx.activate(C,N,P,z,U):H(C,N,P,R,$,z,U):L(g,C,U)},H=(g,C,N,P,R,$,z)=>{const j=g.component=Tc(g,P,R);if(Ri(g)&&(j.ctx.renderer=Wt),Bc(j),j.asyncDep){if(R&&R.registerDep(j,W),!g.el){const U=j.subTree=le(At);E(null,U,C,N)}return}W(j,g,C,N,R,$,z)},L=(g,C,N)=>{const P=C.component=g.component;if(Na(g,C,N))if(P.asyncDep&&!P.asyncResolved){Q(P,C,N);return}else P.next=C,_a(P.update),P.update();else C.el=g.el,P.vnode=C},W=(g,C,N,P,R,$,z)=>{const j=()=>{if(g.isMounted){let{next:Y,bu:K,u:X,parent:J,vnode:te}=g,de=Y,ae;Rt(g,!1),Y?(Y.el=te.el,Q(g,Y,z)):Y=te,K&&zn(K),(ae=Y.props&&Y.props.onVnodeBeforeUpdate)&&lt(ae,J,Y,te),Rt(g,!0);const be=Wn(g),Ve=g.subTree;g.subTree=be,S(Ve,be,u(Ve.el),Zo(Ve),g,R,$),Y.el=be.el,de===null&&Ra(g,be.el),X&&Pe(X,R),(ae=Y.props&&Y.props.onVnodeUpdated)&&Pe(()=>lt(ae,J,Y,te),R)}else{let Y;const{el:K,props:X}=C,{bm:J,m:te,parent:de}=g,ae=_o(C);if(Rt(g,!1),J&&zn(J),!ae&&(Y=X&&X.onVnodeBeforeMount)&&lt(Y,de,C),Rt(g,!0),K&&jn){const be=()=>{g.subTree=Wn(g),jn(K,g.subTree,g,R,null)};ae?C.type.__asyncLoader().then(()=>!g.isUnmounted&&be()):be()}else{const be=g.subTree=Wn(g);S(null,be,N,P,g,R,$),C.el=be.el}if(te&&Pe(te,R),!ae&&(Y=X&&X.onVnodeMounted)){const be=C;Pe(()=>lt(Y,de,be),R)}(C.shapeFlag&256||de&&_o(de.vnode)&&de.vnode.shapeFlag&256)&&g.a&&Pe(g.a,R),g.isMounted=!0,C=N=P=null}},U=g.effect=new Ti(j,()=>Mn(D),g.scope),D=g.update=()=>U.run();D.id=g.uid,Rt(g,!0),D()},Q=(g,C,N)=>{C.component=g;const P=g.vnode.props;g.vnode=C,g.next=null,uc(g,C.props,P,N),fc(g,C.children,N),bo(),bs(),vo()},V=(g,C,N,P,R,$,z,j,U=!1)=>{const D=g&&g.children,Y=g?g.shapeFlag:0,K=C.children,{patchFlag:X,shapeFlag:J}=C;if(X>0){if(X&128){Xe(D,K,N,P,R,$,z,j,U);return}else if(X&256){ye(D,K,N,P,R,$,z,j,U);return}}J&8?(Y&16&&mt(D,R,$),K!==D&&d(N,K)):Y&16?J&16?Xe(D,K,N,P,R,$,z,j,U):mt(D,R,$,!0):(Y&8&&d(N,""),J&16&&m(K,N,P,R,$,z,j,U))},ye=(g,C,N,P,R,$,z,j,U)=>{g=g||Jt,C=C||Jt;const D=g.length,Y=C.length,K=Math.min(D,Y);let X;for(X=0;X<K;X++){const J=C[X]=U?Tt(C[X]):ht(C[X]);S(g[X],J,N,null,R,$,z,j,U)}D>Y?mt(g,R,$,!0,!1,K):m(C,N,P,R,$,z,j,U,K)},Xe=(g,C,N,P,R,$,z,j,U)=>{let D=0;const Y=C.length;let K=g.length-1,X=Y-1;for(;D<=K&&D<=X;){const J=g[D],te=C[D]=U?Tt(C[D]):ht(C[D]);if(wo(J,te))S(J,te,N,null,R,$,z,j,U);else break;D++}for(;D<=K&&D<=X;){const J=g[K],te=C[X]=U?Tt(C[X]):ht(C[X]);if(wo(J,te))S(J,te,N,null,R,$,z,j,U);else break;K--,X--}if(D>K){if(D<=X){const J=X+1,te=J<Y?C[J].el:P;for(;D<=X;)S(null,C[D]=U?Tt(C[D]):ht(C[D]),N,te,R,$,z,j,U),D++}}else if(D>X)for(;D<=K;)Ie(g[D],R,$,!0),D++;else{const J=D,te=D,de=new Map;for(D=te;D<=X;D++){const He=C[D]=U?Tt(C[D]):ht(C[D]);He.key!=null&&de.set(He.key,D)}let ae,be=0;const Ve=X-te+1;let Kt=!1,ss=0;const yo=new Array(Ve);for(D=0;D<Ve;D++)yo[D]=0;for(D=J;D<=K;D++){const He=g[D];if(be>=Ve){Ie(He,R,$,!0);continue}let rt;if(He.key!=null)rt=de.get(He.key);else for(ae=te;ae<=X;ae++)if(yo[ae-te]===0&&wo(He,C[ae])){rt=ae;break}rt===void 0?Ie(He,R,$,!0):(yo[rt-te]=D+1,rt>=ss?ss=rt:Kt=!0,S(He,C[rt],N,null,R,$,z,j,U),be++)}const rs=Kt?bc(yo):Jt;for(ae=rs.length-1,D=Ve-1;D>=0;D--){const He=te+D,rt=C[He],ls=He+1<Y?C[He+1].el:P;yo[D]===0?S(null,rt,N,ls,R,$,z,j,U):Kt&&(ae<0||D!==rs[ae]?Re(rt,N,ls,2):ae--)}}},Re=(g,C,N,P,R=null)=>{const{el:$,type:z,transition:j,children:U,shapeFlag:D}=g;if(D&6){Re(g.component.subTree,C,N,P);return}if(D&128){g.suspense.move(C,N,P);return}if(D&64){z.move(g,C,N,Wt);return}if(z===Ue){n($,C,N);for(let K=0;K<U.length;K++)Re(U[K],C,N,P);n(g.anchor,C,N);return}if(z===Yn){y(g,C,N);return}if(P!==2&&D&1&&j)if(P===0)j.beforeEnter($),n($,C,N),Pe(()=>j.enter($),R);else{const{leave:K,delayLeave:X,afterLeave:J}=j,te=()=>n($,C,N),de=()=>{K($,()=>{te(),J&&J()})};X?X($,te,de):de()}else n($,C,N)},Ie=(g,C,N,P=!1,R=!1)=>{const{type:$,props:z,ref:j,children:U,dynamicChildren:D,shapeFlag:Y,patchFlag:K,dirs:X}=g;if(j!=null&&li(j,null,N,g,!0),Y&256){C.ctx.deactivate(g);return}const J=Y&1&&X,te=!_o(g);let de;if(te&&(de=z&&z.onVnodeBeforeUnmount)&&lt(de,C,g),Y&6)Cl(g.component,N,P);else{if(Y&128){g.suspense.unmount(N,P);return}J&&Nt(g,null,C,"beforeUnmount"),Y&64?g.type.remove(g,C,N,R,Wt,P):D&&($!==Ue||K>0&&K&64)?mt(D,C,N,!1,!0):($===Ue&&K&384||!R&&Y&16)&&mt(U,C,N),P&&ns(g)}(te&&(de=z&&z.onVnodeUnmounted)||J)&&Pe(()=>{de&&lt(de,C,g),J&&Nt(g,null,C,"unmounted")},N)},ns=g=>{const{type:C,el:N,anchor:P,transition:R}=g;if(C===Ue){xl(N,P);return}if(C===Yn){v(g);return}const $=()=>{i(N),R&&!R.persisted&&R.afterLeave&&R.afterLeave()};if(g.shapeFlag&1&&R&&!R.persisted){const{leave:z,delayLeave:j}=R,U=()=>z(N,$);j?j(g.el,$,U):U()}else $()},xl=(g,C)=>{let N;for(;g!==C;)N=p(g),i(g),g=N;i(C)},Cl=(g,C,N)=>{const{bum:P,scope:R,update:$,subTree:z,um:j}=g;P&&zn(P),R.stop(),$&&($.active=!1,Ie(z,g,C,N)),j&&Pe(j,C),Pe(()=>{g.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},mt=(g,C,N,P=!1,R=!1,$=0)=>{for(let z=$;z<g.length;z++)Ie(g[z],C,N,P,R)},Zo=g=>g.shapeFlag&6?Zo(g.component.subTree):g.shapeFlag&128?g.suspense.next():p(g.anchor||g.el),is=(g,C,N)=>{g==null?C._vnode&&Ie(C._vnode,null,null,!0):S(C._vnode||null,g,C,null,null,null,N),bs(),yr(),C._vnode=g},Wt={p:S,um:Ie,m:Re,r:ns,mt:H,mc:m,pc:V,pbc:w,n:Zo,o};let Hn,jn;return e&&([Hn,jn]=e(Wt)),{render:is,hydrate:Hn,createApp:ac(is,Hn)}}function Rt({effect:o,update:e},t){o.allowRecurse=e.allowRecurse=t}function Dr(o,e,t=!1){const n=o.children,i=e.children;if(G(n)&&G(i))for(let s=0;s<n.length;s++){const r=n[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=Tt(i[s]),l.el=r.el),t||Dr(r,l)),l.type===Ln&&(l.el=r.el)}}function bc(o){const e=o.slice(),t=[0];let n,i,s,r,l;const a=o.length;for(n=0;n<a;n++){const c=o[n];if(c!==0){if(i=t[t.length-1],o[i]<c){e[n]=i,t.push(n);continue}for(s=0,r=t.length-1;s<r;)l=s+r>>1,o[t[l]]<c?s=l+1:r=l;c<o[t[s]]&&(s>0&&(e[n]=t[s-1]),t[s]=n)}}for(s=t.length,r=t[s-1];s-- >0;)t[s]=r,r=e[r];return t}const vc=o=>o.__isTeleport,Ue=Symbol.for("v-fgt"),Ln=Symbol.for("v-txt"),At=Symbol.for("v-cmt"),Yn=Symbol.for("v-stc"),Mo=[];let Qe=null;function Be(o=!1){Mo.push(Qe=o?null:[])}function kc(){Mo.pop(),Qe=Mo[Mo.length-1]||null}let Fo=1;function _s(o){Fo+=o}function Fr(o){return o.dynamicChildren=Fo>0?Qe||Jt:null,kc(),Fo>0&&Qe&&Qe.push(o),o}function gt(o,e,t,n,i,s){return Fr(xe(o,e,t,n,i,s,!0))}function zt(o,e,t,n,i){return Fr(le(o,e,t,n,i,!0))}function Hr(o){return o?o.__v_isVNode===!0:!1}function wo(o,e){return o.type===e.type&&o.key===e.key}const Nn="__vInternal",jr=({key:o})=>o??null,cn=({ref:o,ref_key:e,ref_for:t})=>(typeof o=="number"&&(o=""+o),o!=null?ve(o)||Ee(o)||ee(o)?{i:Ne,r:o,k:e,f:!!t}:o:null);function xe(o,e=null,t=null,n=0,i=null,s=o===Ue?0:1,r=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:o,props:e,key:e&&jr(e),ref:e&&cn(e),scopeId:Cr,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ne};return l?(ji(a,t),s&128&&o.normalize(a)):t&&(a.shapeFlag|=ve(t)?8:16),Fo>0&&!r&&Qe&&(a.patchFlag>0||s&6)&&a.patchFlag!==32&&Qe.push(a),a}const le=yc;function yc(o,e=null,t=null,n=0,i=null,s=!1){if((!o||o===_r)&&(o=At),Hr(o)){const l=co(o,e,!0);return t&&ji(l,t),Fo>0&&!s&&Qe&&(l.shapeFlag&6?Qe[Qe.indexOf(o)]=l:Qe.push(l)),l.patchFlag|=-2,l}if(Ac(o)&&(o=o.__vccOpts),e){e=wc(e);let{class:l,style:a}=e;l&&!ve(l)&&(e.class=ce(l)),ge(a)&&(pr(a)&&!G(a)&&(a=Se({},a)),e.style=Bn(a))}const r=ve(o)?1:Pa(o)?128:vc(o)?64:ge(o)?4:ee(o)?2:0;return xe(o,e,t,n,i,r,s,!0)}function wc(o){return o?pr(o)||Nn in o?Se({},o):o:null}function co(o,e,t=!1){const{props:n,ref:i,patchFlag:s,children:r}=o,l=e?Cc(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:o.type,props:l,key:l&&jr(l),ref:e&&e.ref?t&&i?G(i)?i.concat(cn(e)):[i,cn(e)]:cn(e):i,scopeId:o.scopeId,slotScopeIds:o.slotScopeIds,children:r,target:o.target,targetAnchor:o.targetAnchor,staticCount:o.staticCount,shapeFlag:o.shapeFlag,patchFlag:e&&o.type!==Ue?s===-1?16:s|16:s,dynamicProps:o.dynamicProps,dynamicChildren:o.dynamicChildren,appContext:o.appContext,dirs:o.dirs,transition:o.transition,component:o.component,suspense:o.suspense,ssContent:o.ssContent&&co(o.ssContent),ssFallback:o.ssFallback&&co(o.ssFallback),el:o.el,anchor:o.anchor,ctx:o.ctx,ce:o.ce}}function Hi(o=" ",e=0){return le(Ln,null,o,e)}function xc(o="",e=!1){return e?(Be(),zt(At,null,o)):le(At,null,o)}function ht(o){return o==null||typeof o=="boolean"?le(At):G(o)?le(Ue,null,o.slice()):typeof o=="object"?Tt(o):le(Ln,null,String(o))}function Tt(o){return o.el===null&&o.patchFlag!==-1||o.memo?o:co(o)}function ji(o,e){let t=0;const{shapeFlag:n}=o;if(e==null)e=null;else if(G(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),ji(o,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!(Nn in e)?e._ctx=Ne:i===3&&Ne&&(Ne.slots._===1?e._=1:(e._=2,o.patchFlag|=1024))}else ee(e)?(e={default:e,_ctx:Ne},t=32):(e=String(e),n&64?(t=16,e=[Hi(e)]):t=8);o.children=e,o.shapeFlag|=t}function Cc(...o){const e={};for(let t=0;t<o.length;t++){const n=o[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=ce([e.class,n.class]));else if(i==="style")e.style=Bn([e.style,n.style]);else if(Cn(i)){const s=e[i],r=n[i];r&&s!==r&&!(G(s)&&s.includes(r))&&(e[i]=s?[].concat(s,r):r)}else i!==""&&(e[i]=n[i])}return e}function lt(o,e,t,n=null){it(o,e,7,[t,n])}const Ec=Or();let Sc=0;function Tc(o,e,t){const n=o.type,i=(e?e.appContext:o.appContext)||Ec,s={uid:Sc++,vnode:o,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new jl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lr(n,i),emitsOptions:xr(n,i),emit:null,emitted:null,propsDefaults:fe,inheritAttrs:n.inheritAttrs,ctx:fe,data:fe,props:fe,attrs:fe,slots:fe,refs:fe,setupState:fe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Oa.bind(null,s),o.ce&&o.ce(s),s}let Ce=null,$i,qt,Is="__VUE_INSTANCE_SETTERS__";(qt=Gn()[Is])||(qt=Gn()[Is]=[]),qt.push(o=>Ce=o),$i=o=>{qt.length>1?qt.forEach(e=>e(o)):qt[0](o)};const uo=o=>{$i(o),o.scope.on()},jt=()=>{Ce&&Ce.scope.off(),$i(null)};function $r(o){return o.vnode.shapeFlag&4}let ho=!1;function Bc(o,e=!1){ho=e;const{props:t,children:n}=o.vnode,i=$r(o);dc(o,t,i,e),pc(o,n);const s=i?_c(o,e):void 0;return ho=!1,s}function _c(o,e){const t=o.type;o.accessCache=Object.create(null),o.proxy=fr(new Proxy(o.ctx,tc));const{setup:n}=t;if(n){const i=o.setupContext=n.length>1?Mc(o):null;uo(o),bo();const s=Mt(n,o,0,[o.props,i]);if(vo(),jt(),Js(s)){if(s.then(jt,jt),e)return s.then(r=>{Ms(o,r,e)}).catch(r=>{Yo(r,o,0)});o.asyncDep=s}else Ms(o,s,e)}else Ur(o,e)}function Ms(o,e,t){ee(e)?o.type.__ssrInlineRender?o.ssrRender=e:o.render=e:ge(e)&&(o.setupState=br(e)),Ur(o,t)}let Os;function Ur(o,e,t){const n=o.type;if(!o.render){if(!e&&Os&&!n.render){const i=n.template||Di(o).template;if(i){const{isCustomElement:s,compilerOptions:r}=o.appContext.config,{delimiters:l,compilerOptions:a}=n,c=Se(Se({isCustomElement:s,delimiters:l},r),a);n.render=Os(i,c)}}o.render=n.render||nt}uo(o),bo(),oc(o),vo(),jt()}function Ic(o){return o.attrsProxy||(o.attrsProxy=new Proxy(o.attrs,{get(e,t){return Fe(o,"get","$attrs"),e[t]}}))}function Mc(o){const e=t=>{o.exposed=t||{}};return{get attrs(){return Ic(o)},slots:o.slots,emit:o.emit,expose:e}}function Ui(o){if(o.exposed)return o.exposeProxy||(o.exposeProxy=new Proxy(br(fr(o.exposed)),{get(e,t){if(t in e)return e[t];if(t in Io)return Io[t](o)},has(e,t){return t in e||t in Io}}))}function Oc(o,e=!0){return ee(o)?o.displayName||o.name:o.name||e&&o.__name}function Ac(o){return ee(o)&&"__vccOpts"in o}const Lc=(o,e)=>Ea(o,e,ho),Nc=Symbol.for("v-scx"),Rc=()=>an(Nc),Pc="3.3.4",Dc="http://www.w3.org/2000/svg",Dt=typeof document<"u"?document:null,As=Dt&&Dt.createElement("template"),Fc={insert:(o,e,t)=>{e.insertBefore(o,t||null)},remove:o=>{const e=o.parentNode;e&&e.removeChild(o)},createElement:(o,e,t,n)=>{const i=e?Dt.createElementNS(Dc,o):Dt.createElement(o,t?{is:t}:void 0);return o==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:o=>Dt.createTextNode(o),createComment:o=>Dt.createComment(o),setText:(o,e)=>{o.nodeValue=e},setElementText:(o,e)=>{o.textContent=e},parentNode:o=>o.parentNode,nextSibling:o=>o.nextSibling,querySelector:o=>Dt.querySelector(o),setScopeId(o,e){o.setAttribute(e,"")},insertStaticContent(o,e,t,n,i,s){const r=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{As.innerHTML=n?`<svg>${o}</svg>`:o;const l=As.content;if(n){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,t)}return[r?r.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function Hc(o,e,t){const n=o._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?o.removeAttribute("class"):t?o.setAttribute("class",e):o.className=e}function jc(o,e,t){const n=o.style,i=ve(t);if(t&&!i){if(e&&!ve(e))for(const s in e)t[s]==null&&ai(n,s,"");for(const s in t)ai(n,s,t[s])}else{const s=n.display;i?e!==t&&(n.cssText=t):e&&o.removeAttribute("style"),"_vod"in o&&(n.display=s)}}const Ls=/\s*!important$/;function ai(o,e,t){if(G(t))t.forEach(n=>ai(o,e,n));else if(t==null&&(t=""),e.startsWith("--"))o.setProperty(e,t);else{const n=$c(o,e);Ls.test(t)?o.setProperty(mo(n),t.replace(Ls,""),"important"):o[n]=t}}const Ns=["Webkit","Moz","ms"],Xn={};function $c(o,e){const t=Xn[e];if(t)return t;let n=ft(e);if(n!=="filter"&&n in o)return Xn[e]=n;n=Tn(n);for(let i=0;i<Ns.length;i++){const s=Ns[i]+n;if(s in o)return Xn[e]=s}return e}const Rs="http://www.w3.org/1999/xlink";function Uc(o,e,t,n,i){if(n&&e.startsWith("xlink:"))t==null?o.removeAttributeNS(Rs,e.slice(6,e.length)):o.setAttributeNS(Rs,e,t);else{const s=Fl(e);t==null||s&&!er(t)?o.removeAttribute(e):o.setAttribute(e,s?"":t)}}function zc(o,e,t,n,i,s,r){if(e==="innerHTML"||e==="textContent"){n&&r(n,i,s),o[e]=t??"";return}const l=o.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){o._value=t;const c=l==="OPTION"?o.getAttribute("value"):o.value,d=t??"";c!==d&&(o.value=d),t==null&&o.removeAttribute(e);return}let a=!1;if(t===""||t==null){const c=typeof o[e];c==="boolean"?t=er(t):t==null&&c==="string"?(t="",a=!0):c==="number"&&(t=0,a=!0)}try{o[e]=t}catch{}a&&o.removeAttribute(e)}function Wc(o,e,t,n){o.addEventListener(e,t,n)}function Kc(o,e,t,n){o.removeEventListener(e,t,n)}function qc(o,e,t,n,i=null){const s=o._vei||(o._vei={}),r=s[e];if(n&&r)r.value=n;else{const[l,a]=Yc(e);if(n){const c=s[e]=Zc(n,i);Wc(o,l,c,a)}else r&&(Kc(o,l,r,a),s[e]=void 0)}}const Ps=/(?:Once|Passive|Capture)$/;function Yc(o){let e;if(Ps.test(o)){e={};let n;for(;n=o.match(Ps);)o=o.slice(0,o.length-n[0].length),e[n[0].toLowerCase()]=!0}return[o[2]===":"?o.slice(3):mo(o.slice(2)),e]}let Vn=0;const Xc=Promise.resolve(),Vc=()=>Vn||(Xc.then(()=>Vn=0),Vn=Date.now());function Zc(o,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;it(Jc(n,t.value),e,5,[n])};return t.value=o,t.attached=Vc(),t}function Jc(o,e){if(G(e)){const t=o.stopImmediatePropagation;return o.stopImmediatePropagation=()=>{t.call(o),o._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const Ds=/^on[a-z]/,Gc=(o,e,t,n,i=!1,s,r,l,a)=>{e==="class"?Hc(o,n,i):e==="style"?jc(o,t,n):Cn(e)?wi(e)||qc(o,e,t,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Qc(o,e,n,i))?zc(o,e,n,s,r,l,a):(e==="true-value"?o._trueValue=n:e==="false-value"&&(o._falseValue=n),Uc(o,e,n,i))};function Qc(o,e,t,n){return n?!!(e==="innerHTML"||e==="textContent"||e in o&&Ds.test(e)&&ee(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&o.tagName==="INPUT"||e==="type"&&o.tagName==="TEXTAREA"||Ds.test(e)&&ve(t)?!1:e in o}const ed=["ctrl","shift","alt","meta"],td={stop:o=>o.stopPropagation(),prevent:o=>o.preventDefault(),self:o=>o.target!==o.currentTarget,ctrl:o=>!o.ctrlKey,shift:o=>!o.shiftKey,alt:o=>!o.altKey,meta:o=>!o.metaKey,left:o=>"button"in o&&o.button!==0,middle:o=>"button"in o&&o.button!==1,right:o=>"button"in o&&o.button!==2,exact:(o,e)=>ed.some(t=>o[`${t}Key`]&&!e.includes(t))},Bt=(o,e)=>(t,...n)=>{for(let i=0;i<e.length;i++){const s=td[e[i]];if(s&&s(t,e))return}return o(t,...n)},od=Se({patchProp:Gc},Fc);let Fs;function nd(){return Fs||(Fs=gc(od))}const id=(...o)=>{const e=nd().createApp(...o),{mount:t}=e;return e.mount=n=>{const i=sd(n);if(!i)return;const s=e._component;!ee(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const r=t(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},e};function sd(o){return ve(o)?document.querySelector(o):o}const rd=["disabled","placeholder","value","type"],ld=Ye({__name:"BaseInput",props:{onChange:{type:Function},disabled:{type:Boolean},placeholder:{},type:{},value:{},variant:{}},setup(o){return(e,t)=>(Be(),gt("input",{class:ce([e.$style.input,e.$style[`input_${e.variant}`]]),disabled:e.disabled,placeholder:e.placeholder||"",value:e.value,type:e.type||"text",onClick:t[0]||(t[0]=(...n)=>e.onChange&&e.onChange(...n))},null,10,rd))}}),ad="_input_4mb6r_2",cd="_input_border_4mb6r_10",dd="_input_flat_4mb6r_14",ud={input:ad,input_border:cd,input_flat:dd},Et=(o,e)=>{const t=o.__vccOpts||o;for(const[n,i]of e)t[n]=i;return t},hd={$style:ud},pd=Et(ld,[["__cssModules",hd]]),fd="modulepreload",gd=function(o){return"/"+o},Hs={},at=function(e,t,n){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=gd(s),s in Hs)return;Hs[s]=!0;const r=s.endsWith(".css"),l=r?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const u=i[d];if(u.href===s&&(!r||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":fd,r||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),r)return new Promise((d,u)=>{c.addEventListener("load",d),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s})},md=(o,e)=>{const t=o[e];return t?typeof t=="function"?t():Promise.resolve(t):new Promise((n,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e)))})},zi=Ye({__name:"BaseIcon",props:{name:{},width:{},height:{}},setup(o){const e=o,t=Ha(()=>md(Object.assign({"../assets/svg/arrow-left.svg":()=>at(()=>import("./arrow-left-683037f9.js"),[]),"../assets/svg/arrow-right.svg":()=>at(()=>import("./arrow-right-c4e6ae90.js"),[]),"../assets/svg/copy.svg":()=>at(()=>import("./copy-7e7f75f3.js"),[]),"../assets/svg/export.svg":()=>at(()=>import("./export-49442e1b.js"),[]),"../assets/svg/font.svg":()=>at(()=>import("./font-726ca809.js"),[]),"../assets/svg/image-tool.svg":()=>at(()=>import("./image-tool-53457992.js"),[]),"../assets/svg/image.svg":()=>at(()=>import("./image-81ad8295.js"),[]),"../assets/svg/logo.svg":()=>at(()=>import("./logo-b1342127.js"),[]),"../assets/svg/plus.svg":()=>at(()=>import("./plus-826ee4f3.js"),[]),"../assets/svg/remove.svg":()=>at(()=>import("./remove-2c572873.js"),[])}),`../assets/svg/${e.name}.svg`));return(n,i)=>(Be(),zt(Ja(we(t)),{style:{width:"width",height:"height"}}))}}),bd=["disabled"],vd=Ye({__name:"BaseButton",props:{action:{type:Function},variant:{},disabled:{type:Boolean},highlighted:{type:Boolean},iconName:{}},setup(o){return(e,t)=>(Be(),gt("button",{class:ce([e.$style["base-button"],e.$style[`base-button_${e.variant}`],e.highlighted?e.$style["base-button_highlighted"]:""]),disabled:e.disabled,onClick:t[0]||(t[0]=(...n)=>e.action&&e.action(...n))},[xe("span",{class:ce(e.$style["base-button-container"])},[e.iconName?(Be(),zt(zi,{key:0,name:e.iconName},null,8,["name"])):xc("",!0),ec(e.$slots,"default")],2)],10,bd))}}),kd={"base-button":"_base-button_1dm2z_2","base-button-container":"_base-button-container_1dm2z_15","base-button_light":"_base-button_light_1dm2z_22","base-button_highlighted":"_base-button_highlighted_1dm2z_28","base-button_colored":"_base-button_colored_1dm2z_38"},yd={$style:kd},kn=Et(vd,[["__cssModules",yd]]),zr=re(!1),wd=Ye({__name:"BaseHeader",setup(o){const e=re("");function t(s){e.value=s.trim()}function n(s){console.log("[ handleDownloadClick ] e: ",s)}function i(){document.addEventListener("fullscreenchange",()=>{zr.value=!!document.fullscreenElement}),document.documentElement.requestFullscreen()}return(s,r)=>(Be(),gt("header",{class:ce(s.$style.header)},[xe("div",{class:ce(s.$style.wrapper)},[le(zi,{name:"logo"}),le(pd,{placeholder:" ",value:e.value,variant:"flat",onChange:t},null,8,["value"])],2),xe("div",{class:ce(s.$style.wrapper)},[le(kn,{"icon-name":"export",action:n,variant:"light"}),le(kn,{"icon-name":"image",action:i,variant:"colored"},{default:Ni(()=>[Hi("   ")]),_:1})],2)],2))}}),xd="_header_4h65d_2",Cd="_wrapper_4h65d_9",Ed={header:xd,wrapper:Cd},Sd={$style:Ed},Td=Et(wd,[["__cssModules",Sd]]),Wr=18,ci=o=>`${o}px 'Manrope', system-ui, 'SF Pro Display', Roboto, Oxygen, Arial, sans-serif`,Bd=[{id:"1",elements:[]}],yn=(o,e,t,n=1,i)=>{if(!(o===null||!t)){e.clearRect(0,0,o.width,o.height);for(const s of t.elements)if(s.type==="rectangle")e.fillStyle=s.color||"",e.fillRect(s.area.x*n,s.area.y*n,s.area.width*n,s.area.height*n);else if(s.type==="image"){const r=document.createElement("canvas"),l=r.getContext("2d");r.width=s.content.width,r.height=s.content.height,l==null||l.putImageData(s.content,0,0),e.drawImage(r,s.area.x*n,s.area.y*n,s.area.width*n,s.area.height*n)}else s.type==="text"&&dn(s.content,s.area.x*n,s.area.y*n,e,i)}};function dn(o,e,t,n,i){if(!o)return;let s=t;n.fillStyle="#383838",n.font=`normal ${ci(i)}`,o.blocks.forEach(({type:r,data:l})=>{r==="paragraph"?(_d(l.text,e,s,n,i),s=s+43):r==="list"&&l.items.forEach(a=>{n.fillText(a.content,e,s),s=s+38})})}function _d(o,e,t,n,i){let s=e;const r=t;let l=!1,a=!1,c=1;const d=new Array(o.length);for(let u=0;u<o.length;u+=c){if(c=1,l){o[u]==="/"?(d.pop(),l=!1):(d.push(o[u]),l=!1,a=!0),c=o.substring(u).indexOf(">");continue}if(a){const p=d[d.length-1],k=["bold","italic"].find(T=>T.match(p));k&&(n.font=`${k} ${ci(i)}`);const h=o.slice(u).indexOf("<"),S=o.slice(u).slice(1,h);n.fillText(S,s,r);const{width:b,fontBoundingBoxDescent:E}=n.measureText(S);if(!k)switch(p){case"u":n.fillRect(s,r+E-i/6,b,1);break;case"s":n.fillRect(s,r+i/2-1,b,1);break}s+=n.measureText(S).width,c=S.length+5,n.font=`normal ${ci(i)}`,a=!1;continue}o[u]==="<"?l=!0:(n.fillText(o[u],s,r),s+=n.measureText(o[u]).width)}return!1}const Id=Ye({__name:"SlideFrame",props:{slideNumber:{},slideIndex:{},selected:{type:Boolean},slide:{}},emits:["remove"],setup(o,{emit:e}){const t=o,n=In(t,"slide"),i=re(),s=re(0),r=re(0);let l;Xo(()=>{l=i.value.getContext("2d",{willReadFrequently:!0});const c=document.querySelector("#workspace"),d=+getComputedStyle(c).width.slice(0,-2);s.value=i.value.width/d,r.value=Wr*s.value,yn(i.value,l,n.value,s.value,r.value)});const a=()=>{e("remove",t.slideIndex)};return to(n,()=>{yn(i.value,l,n.value,s.value,r.value)},{deep:!0}),(c,d)=>(Be(),gt("div",{class:ce([c.$style.containerSlide])},[xe("div",{class:ce([c.$style.wrapper])},[xe("div",{class:ce([c.$style.slideNumber])},Hl(c.slideNumber),3),xe("button",{class:ce([c.$style.btnRemove]),onClick:a},[le(zi,{name:"remove"})],2)],2),xe("div",{class:ce([c.$style.miniature,c.selected?c.$style.selected:""])},[xe("canvas",{ref_key:"canvas",ref:i,width:157,height:92,class:ce(c.$style.miniCanvas)},null,2)],2)],2))}}),Md="_btnRemove_515bg_2",Od="_containerSlide_515bg_8",Ad="_slideNumber_515bg_20",Ld="_miniature_515bg_26",Nd="_selected_515bg_49",Rd="_miniCanvas_515bg_58",Pd={btnRemove:Md,containerSlide:Od,slideNumber:Ad,miniature:Ld,selected:Nd,miniCanvas:Rd},Dd={$style:Pd},Fd=Et(Id,[["__cssModules",Dd],["__scopeId","data-v-ffcc949d"]]);function Hd(){const o=Math.floor(Math.random()*1e9);return String(o)}const jd=Ye({__name:"SlidesContainer",props:{slides:{},currentSlideId:{}},emits:["selectSlide","removeSlide"],setup(o,{emit:e}){const n=In(o,"slides");function i(h){e("selectSlide",h)}function s(){n.value.push({id:Hd(),elements:[]}),ot.save()}const r=h=>{e("removeSlide",h)},l=re(-1),a=(h,S)=>{S.dataTransfer.setData("Text",h.toString()),S.dataTransfer.dropEffect="move",l.value=h},c=(h,S)=>{const E=S.target.className.includes("miniature");l.value!==h&&E&&(S.target.style.backgroundColor="#e3e3e3")},d=(h,S)=>{S.target.style.backgroundColor="white"},u=()=>{l.value=-1},p=(h,S)=>{S!==-1&&(n.value.splice(S,0,n.value.splice(h,1)[0]),ot.save())},k=(h,S)=>{p(l.value,h),S.target.style.backgroundColor="white"};return(h,S)=>(Be(),gt("div",{class:ce(h.$style.container)},[le(kn,{"icon-name":"plus",action:s,variant:"light",class:ce([h.$style.button])},{default:Ni(()=>[Hi("  ")]),_:1},8,["class"]),xe("div",{class:ce(h.$style.slidesContainer)},[(Be(!0),gt(Ue,null,Qa(n.value,(b,E)=>(Be(),zt(Fd,{class:ce(h.$style.slideItem),key:b.id,"slide-index":b.id,slideNumber:E+1,selected:h.currentSlideId===b.id,slide:b,onMousedown:T=>i(b.id),draggable:"true",onDragstart:T=>a(E,T),onDragenter:[T=>c(E,T),S[1]||(S[1]=Bt(()=>{},["prevent"]))],onDragleave:T=>d(E,T),onDragend:u,onDrop:T=>k(E,T),onDragover:S[0]||(S[0]=Bt(()=>{},["prevent"])),onRemove:r},null,8,["class","slide-index","slideNumber","selected","slide","onMousedown","onDragstart","onDragenter","onDragleave","onDrop"]))),128))],2)],2))}}),$d="_container_tuere_2",Ud="_button_tuere_10",zd="_slidesContainer_tuere_15",Wd="_slideItem_tuere_20",Kd={container:$d,button:Ud,slidesContainer:zd,slideItem:Wd},qd={$style:Kd},Yd=Et(jd,[["__cssModules",qd]]);class Kr{constructor(){Jo(this,"isMouseInShape",(e,t,n)=>{const{x:i,y:s,height:r,width:l}=n,a=i,c=s,d=i+l,u=s+r;return e>a&&e<d&&t>c&&t<u})}}var jo,$o,oo,Uo;class Xd{constructor(e){ue(this,jo,re(null));ue(this,$o,[]);ue(this,oo,re(!1));ue(this,Uo,void 0);pe(this,$o,e),pe(this,Uo,new Kr)}drag(e,t){let n=0;for(const i of F(this,$o)){if(F(this,Uo).isMouseInShape(e,t,i)){this.currentPointIndex=n,F(this,oo).value=!0;return}n++}}move(e,t,n){this.currentPointIndex===0&&(e.area.x+=t,e.area.y+=n,e.area.width-=t,e.area.height-=n),this.currentPointIndex===1&&(e.area.width+=t,e.area.y+=n,e.area.height-=n),this.currentPointIndex===2&&(e.area.width+=t,e.area.height+=n),this.currentPointIndex===3&&(e.area.x+=t,e.area.width-=t,e.area.height+=n),this.currentPointIndex===4&&(e.area.y+=n,e.area.height-=n),this.currentPointIndex===5&&(e.area.width+=t),this.currentPointIndex===6&&(e.area.height+=n),this.currentPointIndex===7&&(e.area.x+=t,e.area.width-=t)}drop(){this.isResizing&&(this.isResizing=!1),this.currentPointIndex=null}get currentPointIndex(){return F(this,jo).value}set currentPointIndex(e){F(this,jo).value=e}get isResizing(){return F(this,oo).value}set isResizing(e){F(this,oo).value=e}}jo=new WeakMap,$o=new WeakMap,oo=new WeakMap,Uo=new WeakMap;var no,zo,Wo,io;class Vd{constructor(e){ue(this,no,re(!1));ue(this,zo,re(null));ue(this,Wo,void 0);ue(this,io,void 0);pe(this,Wo,new Kr),pe(this,io,e)}drag(e,t){if(!F(this,io))return;let n=0;for(const i of F(this,io))F(this,Wo).isMouseInShape(e,t,i.area)&&(this.currentElementIndex=n,F(this,no).value=!0),n++}move(e,t,n){e.area.x+=t,e.area.y+=n}drop(){this.isDragging&&(this.isDragging=!1)}get currentElementIndex(){return F(this,zo).value}set currentElementIndex(e){F(this,zo).value=e}get isDragging(){return F(this,no).value}set isDragging(e){F(this,no).value=e}}no=new WeakMap,zo=new WeakMap,Wo=new WeakMap,io=new WeakMap;var so,ro,ct,dt,Ko,Je,ze;class Zd{constructor(e,t,n,i){ue(this,so,void 0);ue(this,ro,void 0);ue(this,ct,void 0);ue(this,dt,void 0);ue(this,Ko,void 0);ue(this,Je,void 0);ue(this,ze,void 0);pe(this,so,e),pe(this,ro,t),pe(this,ct,re()),pe(this,dt,re()),pe(this,Ko,i),pe(this,ze,new Vd(t)),pe(this,Je,new Xd(n))}drag(e){const t=F(this,so).getBoundingClientRect();F(this,ct).value=e.clientX-t.left,F(this,dt).value=e.clientY-t.top,F(this,Je).drag(F(this,ct).value,F(this,dt).value),!F(this,Je).isResizing&&F(this,ze).drag(F(this,ct).value,F(this,dt).value)}drop(){(F(this,ze).isDragging||F(this,Je).isResizing)&&ot.save(),F(this,ze).drop(),F(this,Je).drop()}move(e){if(!F(this,ze).isDragging&&!F(this,Je).isResizing||!F(this,ro)||!F(this,ct).value||!F(this,dt).value||F(this,ze).currentElementIndex===null)return;const t=F(this,so).getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top,s=n-F(this,ct).value,r=i-F(this,dt).value,l=F(this,ro)[F(this,ze).currentElementIndex];F(this,Je).isResizing&&F(this,Je).move(l,s,r),F(this,ze).isDragging&&F(this,ze).move(l,s,r),F(this,Ko).call(this),F(this,ct).value=n,F(this,dt).value=i}}so=new WeakMap,ro=new WeakMap,ct=new WeakMap,dt=new WeakMap,Ko=new WeakMap,Je=new WeakMap,ze=new WeakMap;const $e=re({addImage:void 0,addRectangle:void 0,isTextEdit:!1,fullScreenToggle:void 0});var Jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rn(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Zn(){}Object.assign(Zn,{default:Zn,register:Zn,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(o){const e=(this.document||this.ownerDocument).querySelectorAll(o);let t=e.length;for(;--t>=0&&e.item(t)!==this;);return t>-1});Element.prototype.closest||(Element.prototype.closest=function(o){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(o))return e;e=e.parentElement||e.parentNode}while(e!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(o){const e=document.createDocumentFragment();Array.isArray(o)||(o=[o]),o.forEach(t=>{const n=t instanceof Node;e.appendChild(n?t:document.createTextNode(t))}),this.insertBefore(e,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(o){o=arguments.length===0?!0:!!o;const e=this.parentNode,t=window.getComputedStyle(e,null),n=parseInt(t.getPropertyValue("border-top-width")),i=parseInt(t.getPropertyValue("border-left-width")),s=this.offsetTop-e.offsetTop<e.scrollTop,r=this.offsetTop-e.offsetTop+this.clientHeight-n>e.scrollTop+e.clientHeight,l=this.offsetLeft-e.offsetLeft<e.scrollLeft,a=this.offsetLeft-e.offsetLeft+this.clientWidth-i>e.scrollLeft+e.clientWidth,c=s&&!r;(s||r)&&o&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-n+this.clientHeight/2),(l||a)&&o&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-i+this.clientWidth/2),(s||r||l||a)&&!o&&this.scrollIntoView(c)});window.requestIdleCallback=window.requestIdleCallback||function(o){const e=Date.now();return setTimeout(function(){o({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(o){clearTimeout(o)};let Gd=(o=21)=>crypto.getRandomValues(new Uint8Array(o)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var qr=(o=>(o.VERBOSE="VERBOSE",o.INFO="INFO",o.WARN="WARN",o.ERROR="ERROR",o))(qr||{});const Z={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91},Qd={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};function Vo(o,e,t="log",n,i="color: inherit"){if(!("console"in window)||!window.console[t])return;const s=["info","log","warn","error"].includes(t),r=[];switch(Vo.logLevel){case"ERROR":if(t!=="error")return;break;case"WARN":if(!["error","warn"].includes(t))return;break;case"INFO":if(!s||o)return;break}n&&r.push(n);const l="Editor.js 2.28.2",a=`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`;o&&(s?(r.unshift(a,i),e=`%c${l}%c ${e}`):e=`( ${l} )${e}`);try{s?n?console[t](`${e} %o`,...r):console[t](e,...r):console[t](e)}catch{}}Vo.logLevel="VERBOSE";function eu(o){Vo.logLevel=o}const se=Vo.bind(window,!1),et=Vo.bind(window,!0);function Ut(o){return Object.prototype.toString.call(o).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function he(o){return Ut(o)==="function"||Ut(o)==="asyncfunction"}function _e(o){return Ut(o)==="object"}function Lt(o){return Ut(o)==="string"}function tu(o){return Ut(o)==="boolean"}function js(o){return Ut(o)==="number"}function $s(o){return Ut(o)==="undefined"}function st(o){return o?Object.keys(o).length===0&&o.constructor===Object:!0}function Yr(o){return o>47&&o<58||o===32||o===13||o===229||o>64&&o<91||o>95&&o<112||o>185&&o<193||o>218&&o<223}async function ou(o,e=()=>{},t=()=>{}){async function n(i,s,r){try{await i.function(i.data),await s($s(i.data)?{}:i.data)}catch{r($s(i.data)?{}:i.data)}}return o.reduce(async(i,s)=>(await i,n(s,e,t)),Promise.resolve())}function Xr(o){return Array.prototype.slice.call(o)}function po(o,e){return function(){const t=this,n=arguments;window.setTimeout(()=>o.apply(t,n),e)}}function nu(o){return o.name.split(".").pop()}function iu(o){return/^[-\w]+\/([-+\w]+|\*)$/.test(o)}function su(o,e,t){let n;return(...i)=>{const s=this,r=()=>{n=null,t||o.apply(s,i)},l=t&&!n;window.clearTimeout(n),n=window.setTimeout(r,e),l&&o.apply(s,i)}}function di(o,e,t=void 0){let n,i,s,r=null,l=0;t||(t={});const a=function(){l=t.leading===!1?0:Date.now(),r=null,s=o.apply(n,i),r||(n=i=null)};return function(){const c=Date.now();!l&&t.leading===!1&&(l=c);const d=e-(c-l);return n=this,i=arguments,d<=0||d>e?(r&&(clearTimeout(r),r=null),l=c,s=o.apply(n,i),r||(n=i=null)):!r&&t.trailing!==!1&&(r=setTimeout(a,d)),s}}function ru(){const o={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(o).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e&&(o[e]=!0),o}function fo(o){return o[0].toUpperCase()+o.slice(1)}function ui(o,...e){if(!e.length)return o;const t=e.shift();if(_e(o)&&_e(t))for(const n in t)_e(t[n])?(o[n]||Object.assign(o,{[n]:{}}),ui(o[n],t[n])):Object.assign(o,{[n]:t[n]});return ui(o,...e)}function Wi(o){const e=ru();return o=o.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi," + "),e.mac?o=o.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):o=o.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),o}function lu(o){try{return new URL(o).href}catch{}return o.substring(0,2)==="//"?window.location.protocol+o:window.location.origin+o}function au(){return Gd(10)}function cu(o){window.open(o,"_blank")}function du(o=""){return`${o}${Math.floor(Math.random()*1e8).toString(16)}`}function hi(o,e,t){const n=`${e} is deprecated and will be removed in the next major release. Please use the ${t} instead.`;o&&et(n,"warn")}function ko(o,e,t){const n=t.value?"value":"get",i=t[n],s=`#${e}Cache`;if(t[n]=function(...r){return this[s]===void 0&&(this[s]=i.apply(this,...r)),this[s]},n==="get"&&t.set){const r=t.set;t.set=function(l){delete o[s],r.apply(this,l)}}return t}const Vr=650;function $t(){return window.matchMedia(`(max-width: ${Vr}px)`).matches}const Us=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function uu(o,e){const t=Array.isArray(o)||_e(o),n=Array.isArray(e)||_e(e);return t||n?JSON.stringify(o)===JSON.stringify(e):o===e}class _{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,t=null,n={}){const i=document.createElement(e);Array.isArray(t)?i.classList.add(...t):t&&i.classList.add(t);for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s]);return i}static text(e){return document.createTextNode(e)}static append(e,t){Array.isArray(t)?t.forEach(n=>e.appendChild(n)):e.appendChild(t)}static prepend(e,t){Array.isArray(t)?(t=t.reverse(),t.forEach(n=>e.prepend(n))):e.prepend(t)}static swap(e,t){const n=document.createElement("div"),i=e.parentNode;i.insertBefore(n,e),i.insertBefore(e,t),i.insertBefore(t,n),i.removeChild(n)}static find(e=document,t){return e.querySelector(t)}static get(e){return document.getElementById(e)}static findAll(e=document,t){return e.querySelectorAll(t)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(e=>`input[type="${e}"]`).join(", ")}static findAllInputs(e){return Xr(e.querySelectorAll(_.allInputsSelector)).reduce((t,n)=>_.isNativeInput(n)||_.containsOnlyInlineElements(n)?[...t,n]:[...t,..._.getDeepestBlockElements(n)],[])}static getDeepestNode(e,t=!1){const n=t?"lastChild":"firstChild",i=t?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[n]){let s=e[n];if(_.isSingleTag(s)&&!_.isNativeInput(s)&&!_.isLineBreakTag(s))if(s[i])s=s[i];else if(s.parentNode[i])s=s.parentNode[i];else return s.parentNode;return this.getDeepestNode(s,t)}return e}static isElement(e){return js(e)?!1:e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return js(e)?!1:e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return e.contentEditable==="true"}static isNativeInput(e){const t=["INPUT","TEXTAREA"];return e&&e.tagName?t.includes(e.tagName):!1}static canSetCaret(e){let t=!0;if(_.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1;break}else t=_.isContentEditable(e);return t}static isNodeEmpty(e){let t;return this.isSingleTag(e)&&!this.isLineBreakTag(e)?!1:(this.isElement(e)&&this.isNativeInput(e)?t=e.value:t=e.textContent.replace("",""),t.trim().length===0)}static isLeaf(e){return e?e.childNodes.length===0:!1}static isEmpty(e){e.normalize();const t=[e];for(;t.length>0;)if(e=t.shift(),!!e){if(this.isLeaf(e)&&!this.isNodeEmpty(e))return!1;e.childNodes&&t.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const t=_.make("div");return t.innerHTML=e,t.childElementCount>0}static getContentLength(e){return _.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let t;Lt(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;const n=i=>!_.blockElements.includes(i.tagName.toLowerCase())&&Array.from(i.children).every(n);return Array.from(t.children).every(n)}static getDeepestBlockElements(e){return _.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((t,n)=>[...t,..._.getDeepestBlockElements(n)],[])}static getHolder(e){return Lt(e)?document.getElementById(e):e}static isAnchor(e){return e.tagName.toLowerCase()==="a"}static offset(e){const t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop,s=t.top+i,r=t.left+n;return{top:s,left:r,bottom:s+t.height,right:r+t.width}}}const hu={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":""}},pu={Text:"",Link:"",Bold:"",Italic:""},fu={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},gu={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},Zr={ui:hu,toolNames:pu,tools:fu,blockTunes:gu},Yt=class{static ui(o,e){return Yt._t(o,e)}static t(o,e){return Yt._t(o,e)}static setDictionary(o){Yt.currentDictionary=o}static _t(o,e){const t=Yt.getNamespace(o);return!t||!t[e]?e:t[e]}static getNamespace(o){return o.split(".").reduce((e,t)=>!e||!Object.keys(e).length?{}:e[t],Yt.currentDictionary)}};let De=Yt;De.currentDictionary=Zr;class Jr extends Error{}class Pn{constructor(){this.subscribers={}}on(e,t){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(t)}once(e,t){e in this.subscribers||(this.subscribers[e]=[]);const n=i=>{const s=t(i),r=this.subscribers[e].indexOf(n);return r!==-1&&this.subscribers[e].splice(r,1),s};this.subscribers[e].push(n)}emit(e,t){st(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((n,i)=>{const s=i(n);return s!==void 0?s:n},t)}off(e,t){if(this.subscribers[e]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let n=0;n<this.subscribers[e].length;n++)if(this.subscribers[e][n]===t){delete this.subscribers[e][n];break}}destroy(){this.subscribers={}}}function Ft(o){Object.setPrototypeOf(this,{get id(){return o.id},get name(){return o.name},get config(){return o.config},get holder(){return o.holder},get isEmpty(){return o.isEmpty},get selected(){return o.selected},set stretched(e){o.stretched=e},get stretched(){return o.stretched},call(e,t){return o.call(e,t)},save(){return o.save()},validate(e){return o.validate(e)},dispatchChange(){o.dispatchChange()}})}class Ki{constructor(){this.allListeners=[]}on(e,t,n,i=!1){const s=du("l"),r={id:s,element:e,eventType:t,handler:n,options:i};if(!this.findOne(e,t,n))return this.allListeners.push(r),e.addEventListener(t,n,i),s}off(e,t,n,i){const s=this.findAll(e,t,n);s.forEach((r,l)=>{const a=this.allListeners.indexOf(s[l]);a>-1&&(this.allListeners.splice(a,1),r.element.removeEventListener(r.eventType,r.handler,r.options))})}offById(e){const t=this.findById(e);t&&t.element.removeEventListener(t.eventType,t.handler,t.options)}findOne(e,t,n){const i=this.findAll(e,t,n);return i.length>0?i[0]:null}findAll(e,t,n){let i;const s=e?this.findByEventTarget(e):[];return e&&t&&n?i=s.filter(r=>r.eventType===t&&r.handler===n):e&&t?i=s.filter(r=>r.eventType===t):i=s,i}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(t=>{if(t.element===e)return t})}findByType(e){return this.allListeners.filter(t=>{if(t.eventType===e)return t})}findByHandler(e){return this.allListeners.filter(t=>{if(t.handler===e)return t})}findById(e){return this.allListeners.find(t=>t.id===e)}}class oe{constructor({config:e,eventsDispatcher:t}){if(this.nodes={},this.listeners=new Ki,this.readOnlyMutableListeners={on:(n,i,s,r=!1)=>{this.mutableListenerIds.push(this.listeners.on(n,i,s,r))},clearAll:()=>{for(const n of this.mutableListenerIds)this.listeners.offById(n);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===oe)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=t}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const t=this.nodes[e];t instanceof HTMLElement&&t.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}}class q{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return t?_.isElement(t)?t:t.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(q.get())}static isSelectionAtEditor(e){if(!e)return!1;let t=e.anchorNode||e.focusNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(`.${q.CSS.editorZone}`)),n?n.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(e){if(!e)return;let t=e.startContainer;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(`.${q.CSS.editorZone}`)),n?n.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!q.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,t,n={x:0,y:0,width:0,height:0};if(e&&e.type!=="Control")return e=e,t=e.createRange(),n.x=t.boundingLeft,n.y=t.boundingTop,n.width=t.boundingWidth,n.height=t.boundingHeight,n;if(!window.getSelection)return se("Method window.getSelection is not supported","warn"),n;if(e=window.getSelection(),e.rangeCount===null||isNaN(e.rangeCount))return se("Method SelectionUtils.rangeCount is not supported","warn"),n;if(e.rangeCount===0)return n;if(t=e.getRangeAt(0).cloneRange(),t.getBoundingClientRect&&(n=t.getBoundingClientRect()),n.x===0&&n.y===0){const i=document.createElement("span");if(i.getBoundingClientRect){i.appendChild(document.createTextNode("")),t.insertNode(i),n=i.getBoundingClientRect();const s=i.parentNode;s.removeChild(i),s.normalize()}}return n}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,t=0){const n=document.createRange(),i=window.getSelection();return _.isNativeInput(e)?_.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=t,e.getBoundingClientRect()):void 0:(n.setStart(e,t),n.setEnd(e,t),i.removeAllRanges(),i.addRange(n),n.getBoundingClientRect())}static isRangeInsideContainer(e){const t=q.range;return t===null?!1:e.contains(t.startContainer)}static addFakeCursor(){const e=q.range;if(e===null)return;const t=_.make("span","codex-editor__fake-cursor");t.dataset.mutationFree="true",e.collapse(),e.insertNode(t)}static isFakeCursorInsideContainer(e){return _.find(e,".codex-editor__fake-cursor")!==null}static removeFakeCursor(e=document.body){const t=_.find(e,".codex-editor__fake-cursor");t&&t.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=q.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t,n=10){const i=window.getSelection();let s=null;return!i||!i.anchorNode||!i.focusNode?null:([i.anchorNode,i.focusNode].forEach(r=>{let l=n;for(;l>0&&r.parentNode&&!(r.tagName===e&&(s=r,t&&r.classList&&!r.classList.contains(t)&&(s=null),s));)r=r.parentNode,l--}),s)}expandToTag(e){const t=window.getSelection();t.removeAllRanges();const n=document.createRange();n.selectNodeContents(e),t.addRange(n)}}function mu(o,e){const{type:t,target:n,addedNodes:i,removedNodes:s}=o;if(n===e)return!0;if(["characterData","attributes"].includes(t)){const a=n.nodeType===Node.TEXT_NODE?n.parentNode:n;return e.contains(a)}const r=Array.from(i).some(a=>e.contains(a)),l=Array.from(s).some(a=>e.contains(a));return r||l}const pi="redactor dom changed",Gr="block changed",Qr="fake cursor is about to be toggled",el="fake cursor have been set";function zs(o,e){return o.mergeable&&o.name===e.name}function bu(o,e){const t=e==null?void 0:e.export;return he(t)?t(o):Lt(t)?o[t]:(t!==void 0&&se("Conversion export property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function vu(o,e){const t=e==null?void 0:e.import;return he(t)?t(o):Lt(t)?{[t]:o}:(t!==void 0&&se("Conversion import property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var vt=(o=>(o.APPEND_CALLBACK="appendCallback",o.RENDERED="rendered",o.MOVED="moved",o.UPDATED="updated",o.REMOVED="removed",o.ON_PASTE="onPaste",o))(vt||{});class ke extends Pn{constructor({id:e=au(),data:t,tool:n,api:i,readOnly:s,tunesData:r},l){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(a=void 0)=>{const c=a===void 0,d=a instanceof InputEvent;!c&&!d&&this.detectToolRootChange(a);let u;c||d?u=!0:u=!(a.length>0&&a.every(p=>{const{addedNodes:k,removedNodes:h,target:S}=p;return[...Array.from(k),...Array.from(h),S].some(b=>_.isElement(b)?b.dataset.mutationFree==="true":!1)})),u&&(this.dropInputsCache(),this.updateCurrentInput(),this.call("updated"),this.emit("didMutated",this))},this.name=n.name,this.id=e,this.settings=n.settings,this.config=n.settings.config||{},this.api=i,this.editorEventBus=l||null,this.blockAPI=new Ft(this),this.tool=n,this.toolInstance=n.create(t,this.blockAPI,s),this.tunes=n.tunes,this.composeTunes(r),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",focused:"ce-block--focused",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const e=_.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const t=this.inputs.findIndex(n=>n===e||n.contains(e));t!==-1&&(this.inputIndex=t)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!st(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return he(this.toolInstance.merge)}get isEmpty(){const e=_.isEmpty(this.pluginsContent),t=!this.hasMedia;return e&&t}get hasMedia(){const e=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(e.join(","))}set focused(e){this.holder.classList.toggle(ke.CSS.focused,e)}get focused(){return this.holder.classList.contains(ke.CSS.focused)}set selected(e){var t,n;this.holder.classList.toggle(ke.CSS.selected,e);const i=e===!0&&q.isRangeInsideContainer(this.holder),s=e===!1&&q.isFakeCursorInsideContainer(this.holder);(i||s)&&((t=this.editorEventBus)==null||t.emit(Qr,{state:e}),i?q.addFakeCursor():q.removeFakeCursor(this.holder),(n=this.editorEventBus)==null||n.emit(el,{state:e}))}get selected(){return this.holder.classList.contains(ke.CSS.selected)}set stretched(e){this.holder.classList.toggle(ke.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(ke.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(ke.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,t){if(he(this.toolInstance[e])){e==="appendCallback"&&se("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,t)}catch(n){se(`Error during '${e}' call: ${n.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),t=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([s,r])=>{if(he(r.save))try{t[s]=r.save()}catch(l){se(`Tune ${r.constructor.name} save method throws an Error %o`,"warn",l)}});const n=window.performance.now();let i;return Promise.resolve(e).then(s=>(i=window.performance.now(),{id:this.id,tool:this.name,data:s,tunes:t,time:i-n})).catch(s=>{se(`Saving process for ${this.name} tool failed due to the ${s}`,"log","red")})}async validate(e){let t=!0;return this.toolInstance.validate instanceof Function&&(t=await this.toolInstance.validate(e)),t}getTunes(){const e=document.createElement("div"),t=[],n=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[],i=[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(s=>s.render());return[n,i].flat().forEach(s=>{_.isElement(s)?e.appendChild(s):Array.isArray(s)?t.push(...s):t.push(s)}),[t,e]}updateCurrentInput(){this.currentInput=_.isNativeInput(document.activeElement)||!q.anchorNode?document.activeElement:q.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),he(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(e.length===1)return Promise.resolve(this.tool.toolbox[0]);const t=await this.data;return e.find(n=>Object.entries(n.data).some(([i,s])=>t[i]&&uu(t[i],s)))}async exportDataAsString(){const e=await this.data;return bu(e,this.tool.conversionConfig)}compose(){const e=_.make("div",ke.CSS.wrapper),t=_.make("div",ke.CSS.content),n=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=n,t.appendChild(this.toolRenderedElement);let i=t;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(s=>{if(he(s.wrap))try{i=s.wrap(i)}catch(r){se(`Tune ${s.constructor.name} wrap method throws an Error %o`,"warn",r)}}),e.appendChild(i),e}composeTunes(e){Array.from(this.tunes.values()).forEach(t=>{(t.isInternal?this.defaultTunesInstances:this.tunesInstances).set(t.name,t.create(e[t.name],this.blockAPI))}),Object.entries(e).forEach(([t,n])=>{this.tunesInstances.has(t)||(this.unavailableTunesData[t]=n)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),_.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),_.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=t=>{const{mutations:n}=t;n.some(i=>mu(i,this.toolRenderedElement))&&this.didMutated(n)},(e=this.editorEventBus)==null||e.on(pi,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;(e=this.editorEventBus)==null||e.off(pi,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(t=>{if(Array.from(t.removedNodes).includes(this.toolRenderedElement)){const n=t.addedNodes[t.addedNodes.length-1];this.toolRenderedElement=n}})}dropInputsCache(){this.cachedInputs=[]}}class ku extends oe{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,t={},n={},i,s,r,l)=>{const a=this.Editor.BlockManager.insert({id:l,tool:e,data:t,index:i,needToFocus:s,replace:r});return new Ft(a)},this.composeBlockData=async e=>{const t=this.Editor.Tools.blockTools.get(e);return new ke({tool:t,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,t)=>{const{BlockManager:n}=this.Editor,i=n.getBlockById(e);if(i===void 0)throw new Error(`Block with id "${e}" not found`);const s=await n.update(i,t);return new Ft(s)},this.convert=(e,t,n)=>{var i,s;const{BlockManager:r,Tools:l}=this.Editor,a=r.getBlockById(e);if(!a)throw new Error(`Block with id "${e}" not found`);const c=l.blockTools.get(a.name),d=l.blockTools.get(t);if(!d)throw new Error(`Block Tool with type "${t}" not found`);const u=((i=c==null?void 0:c.conversionConfig)==null?void 0:i.export)!==void 0,p=((s=d.conversionConfig)==null?void 0:s.import)!==void 0;if(u&&p)r.convert(a,t,n);else{const k=[u?!1:fo(a.name),p?!1:fo(t)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${a.name}" to "${t}" is not possible. ${k} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,t=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(t);const n=e.map(({id:i,type:s,data:r})=>this.Editor.BlockManager.composeBlock({id:i,tool:s||this.config.defaultBlock,data:r}));return this.Editor.BlockManager.insertMany(n,t),n.map(i=>new Ft(i))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,t)=>this.swap(e,t),move:(e,t)=>this.move(e,t),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),stretchBlock:(e,t=!0)=>this.stretchBlock(e,t),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const t=this.Editor.BlockManager.getBlockById(e);if(!t){et("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(t)}getBlockByIndex(e){const t=this.Editor.BlockManager.getBlockByIndex(e);if(t===void 0){et("There is no block at index `"+e+"`","warn");return}return new Ft(t)}getById(e){const t=this.Editor.BlockManager.getBlockById(e);return t===void 0?(et("There is no block with id `"+e+"`","warn"),null):new Ft(t)}swap(e,t){se("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,t)}move(e,t){this.Editor.BlockManager.move(e,t)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const t=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(t)}catch(t){et(t,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(e===void 0||e.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,t=!0){hi(!0,"blocks.stretchBlock()","BlockAPI");const n=this.Editor.BlockManager.getBlockByIndex(e);n&&(n.stretched=t)}insertNewBlock(){se("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if(typeof e!="number")throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(e===null)throw new Error("Index should be greater than or equal to 0")}}class yu extends oe{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,t),!0):!1,this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,t),!0):!1,this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,t),!0):!1,this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,t),!0):!1,this.setToBlock=(e,t=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.blocks[e]?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.blocks[e],t,n),!0):!1,this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class wu extends oe{get methods(){return{emit:(e,t)=>this.emit(e,t),off:(e,t)=>this.off(e,t),on:(e,t)=>this.on(e,t)}}on(e,t){this.eventsDispatcher.on(e,t)}emit(e,t){this.eventsDispatcher.emit(e,t)}off(e,t){this.eventsDispatcher.off(e,t)}}class qi extends oe{static getNamespace(e){return e.isTune()?`blockTunes.${e.name}`:`tools.${e.name}`}get methods(){return{t:()=>{et("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e){return Object.assign(this.methods,{t:t=>De.t(qi.getNamespace(e),t)})}}class xu extends oe{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e)})}}class Cu extends oe{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class Eu extends oe{get methods(){return{on:(e,t,n,i)=>this.on(e,t,n,i),off:(e,t,n,i)=>this.off(e,t,n,i),offById:e=>this.offById(e)}}on(e,t,n,i){return this.listeners.on(e,t,n,i)}off(e,t,n,i){this.listeners.off(e,t,n,i)}offById(e){this.listeners.offById(e)}}var fi={},Su={get exports(){return fi},set exports(o){fi=o}};(function(o,e){(function(t,n){o.exports=n()})(window,function(){return function(t){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=n,i.d=function(s,r,l){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var a in s)i.d(l,a,(function(c){return s[c]}).bind(null,a));return l},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="/",i(i.s=0)}([function(t,n,i){i(1),t.exports=function(){var s=i(6),r="cdx-notify--bounce-in",l=null;return{show:function(a){if(a.message){(function(){if(l)return!0;l=s.getWrapper(),document.body.appendChild(l)})();var c=null,d=a.time||8e3;switch(a.type){case"confirm":c=s.confirm(a);break;case"prompt":c=s.prompt(a);break;default:c=s.alert(a),window.setTimeout(function(){c.remove()},d)}l.appendChild(c),c.classList.add(r)}}}}()},function(t,n,i){var s=i(2);typeof s=="string"&&(s=[[t.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(4)(s,r),s.locals&&(t.exports=s.locals)},function(t,n,i){(t.exports=i(3)(!1)).push([t.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(t,n){t.exports=function(i){var s=[];return s.toString=function(){return this.map(function(r){var l=function(a,c){var d=a[1]||"",u=a[3];if(!u)return d;if(c&&typeof btoa=="function"){var p=(h=u,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(h))))+" */"),k=u.sources.map(function(S){return"/*# sourceURL="+u.sourceRoot+S+" */"});return[d].concat(k).concat([p]).join(`
`)}var h;return[d].join(`
`)}(r,i);return r[2]?"@media "+r[2]+"{"+l+"}":l}).join("")},s.i=function(r,l){typeof r=="string"&&(r=[[null,r,""]]);for(var a={},c=0;c<this.length;c++){var d=this[c][0];typeof d=="number"&&(a[d]=!0)}for(c=0;c<r.length;c++){var u=r[c];typeof u[0]=="number"&&a[u[0]]||(l&&!u[2]?u[2]=l:l&&(u[2]="("+u[2]+") and ("+l+")"),s.push(u))}},s}},function(t,n,i){var s,r,l={},a=(s=function(){return window&&document&&document.all&&!window.atob},function(){return r===void 0&&(r=s.apply(this,arguments)),r}),c=function(m){var f={};return function(w){if(typeof w=="function")return w();if(f[w]===void 0){var x=(function(A){return document.querySelector(A)}).call(this,w);if(window.HTMLIFrameElement&&x instanceof window.HTMLIFrameElement)try{x=x.contentDocument.head}catch{x=null}f[w]=x}return f[w]}}(),d=null,u=0,p=[],k=i(5);function h(m,f){for(var w=0;w<m.length;w++){var x=m[w],A=l[x.id];if(A){A.refs++;for(var M=0;M<A.parts.length;M++)A.parts[M](x.parts[M]);for(;M<x.parts.length;M++)A.parts.push(v(x.parts[M],f))}else{var H=[];for(M=0;M<x.parts.length;M++)H.push(v(x.parts[M],f));l[x.id]={id:x.id,refs:1,parts:H}}}}function S(m,f){for(var w=[],x={},A=0;A<m.length;A++){var M=m[A],H=f.base?M[0]+f.base:M[0],L={css:M[1],media:M[2],sourceMap:M[3]};x[H]?x[H].parts.push(L):w.push(x[H]={id:H,parts:[L]})}return w}function b(m,f){var w=c(m.insertInto);if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var x=p[p.length-1];if(m.insertAt==="top")x?x.nextSibling?w.insertBefore(f,x.nextSibling):w.appendChild(f):w.insertBefore(f,w.firstChild),p.push(f);else if(m.insertAt==="bottom")w.appendChild(f);else{if(typeof m.insertAt!="object"||!m.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var A=c(m.insertInto+" "+m.insertAt.before);w.insertBefore(f,A)}}function E(m){if(m.parentNode===null)return!1;m.parentNode.removeChild(m);var f=p.indexOf(m);f>=0&&p.splice(f,1)}function T(m){var f=document.createElement("style");return m.attrs.type===void 0&&(m.attrs.type="text/css"),y(f,m.attrs),b(m,f),f}function y(m,f){Object.keys(f).forEach(function(w){m.setAttribute(w,f[w])})}function v(m,f){var w,x,A,M;if(f.transform&&m.css){if(!(M=f.transform(m.css)))return function(){};m.css=M}if(f.singleton){var H=u++;w=d||(d=T(f)),x=O.bind(null,w,H,!1),A=O.bind(null,w,H,!0)}else m.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(w=function(L){var W=document.createElement("link");return L.attrs.type===void 0&&(L.attrs.type="text/css"),L.attrs.rel="stylesheet",y(W,L.attrs),b(L,W),W}(f),x=(function(L,W,Q){var V=Q.css,ye=Q.sourceMap,Xe=W.convertToAbsoluteUrls===void 0&&ye;(W.convertToAbsoluteUrls||Xe)&&(V=k(V)),ye&&(V+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(ye))))+" */");var Re=new Blob([V],{type:"text/css"}),Ie=L.href;L.href=URL.createObjectURL(Re),Ie&&URL.revokeObjectURL(Ie)}).bind(null,w,f),A=function(){E(w),w.href&&URL.revokeObjectURL(w.href)}):(w=T(f),x=(function(L,W){var Q=W.css,V=W.media;if(V&&L.setAttribute("media",V),L.styleSheet)L.styleSheet.cssText=Q;else{for(;L.firstChild;)L.removeChild(L.firstChild);L.appendChild(document.createTextNode(Q))}}).bind(null,w),A=function(){E(w)});return x(m),function(L){if(L){if(L.css===m.css&&L.media===m.media&&L.sourceMap===m.sourceMap)return;x(m=L)}else A()}}t.exports=function(m,f){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(f=f||{}).attrs=typeof f.attrs=="object"?f.attrs:{},f.singleton||typeof f.singleton=="boolean"||(f.singleton=a()),f.insertInto||(f.insertInto="head"),f.insertAt||(f.insertAt="bottom");var w=S(m,f);return h(w,f),function(x){for(var A=[],M=0;M<w.length;M++){var H=w[M];(L=l[H.id]).refs--,A.push(L)}for(x&&h(S(x,f),f),M=0;M<A.length;M++){var L;if((L=A[M]).refs===0){for(var W=0;W<L.parts.length;W++)L.parts[W]();delete l[L.id]}}}};var B,I=(B=[],function(m,f){return B[m]=f,B.filter(Boolean).join(`
`)});function O(m,f,w,x){var A=w?"":x.css;if(m.styleSheet)m.styleSheet.cssText=I(f,A);else{var M=document.createTextNode(A),H=m.childNodes;H[f]&&m.removeChild(H[f]),H.length?m.insertBefore(M,H[f]):m.appendChild(M)}}},function(t,n){t.exports=function(i){var s=typeof window<"u"&&window.location;if(!s)throw new Error("fixUrls requires window.location");if(!i||typeof i!="string")return i;var r=s.protocol+"//"+s.host,l=r+s.pathname.replace(/\/[^\/]*$/,"/");return i.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(a,c){var d,u=c.trim().replace(/^"(.*)"$/,function(p,k){return k}).replace(/^'(.*)'$/,function(p,k){return k});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(u)?a:(d=u.indexOf("//")===0?u:u.indexOf("/")===0?r+u:l+u.replace(/^\.\//,""),"url("+JSON.stringify(d)+")")})}},function(t,n,i){var s,r,l,a,c,d,u,p,k;t.exports=(s="cdx-notifies",r="cdx-notify",l="cdx-notify__cross",a="cdx-notify__button--confirm",c="cdx-notify__button--cancel",d="cdx-notify__input",u="cdx-notify__button",p="cdx-notify__btns-wrapper",{alert:k=function(h){var S=document.createElement("DIV"),b=document.createElement("DIV"),E=h.message,T=h.style;return S.classList.add(r),T&&S.classList.add(r+"--"+T),S.innerHTML=E,b.classList.add(l),b.addEventListener("click",S.remove.bind(S)),S.appendChild(b),S},confirm:function(h){var S=k(h),b=document.createElement("div"),E=document.createElement("button"),T=document.createElement("button"),y=S.querySelector("."+l),v=h.cancelHandler,B=h.okHandler;return b.classList.add(p),E.innerHTML=h.okText||"Confirm",T.innerHTML=h.cancelText||"Cancel",E.classList.add(u),T.classList.add(u),E.classList.add(a),T.classList.add(c),v&&typeof v=="function"&&(T.addEventListener("click",v),y.addEventListener("click",v)),B&&typeof B=="function"&&E.addEventListener("click",B),E.addEventListener("click",S.remove.bind(S)),T.addEventListener("click",S.remove.bind(S)),b.appendChild(E),b.appendChild(T),S.appendChild(b),S},prompt:function(h){var S=k(h),b=document.createElement("div"),E=document.createElement("button"),T=document.createElement("input"),y=S.querySelector("."+l),v=h.cancelHandler,B=h.okHandler;return b.classList.add(p),E.innerHTML=h.okText||"Ok",E.classList.add(u),E.classList.add(a),T.classList.add(d),h.placeholder&&T.setAttribute("placeholder",h.placeholder),h.default&&(T.value=h.default),h.inputType&&(T.type=h.inputType),v&&typeof v=="function"&&y.addEventListener("click",v),B&&typeof B=="function"&&E.addEventListener("click",function(){B(T.value)}),E.addEventListener("click",S.remove.bind(S)),b.appendChild(T),b.appendChild(E),S.appendChild(b),S},getWrapper:function(){var h=document.createElement("DIV");return h.classList.add(s),h}})}])})})(Su);const Tu=Rn(fi);class Bu{show(e){Tu.show(e)}}class _u extends oe{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.notifier=new Bu}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}}class Iu extends oe{get methods(){const e=()=>this.isEnabled;return{toggle:t=>this.toggle(t),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var gi={},Mu={get exports(){return gi},set exports(o){gi=o}};(function(o,e){(function(t,n){o.exports=n()})(Jd,function(){function t(u){var p=u.tags,k=Object.keys(p),h=k.map(function(S){return typeof p[S]}).every(function(S){return S==="object"||S==="boolean"||S==="function"});if(!h)throw new Error("The configuration was invalid");this.config=u}var n=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function i(u){return n.indexOf(u.nodeName)!==-1}var s=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function r(u){return s.indexOf(u.nodeName)!==-1}t.prototype.clean=function(u){const p=document.implementation.createHTMLDocument(),k=p.createElement("div");return k.innerHTML=u,this._sanitize(p,k),k.innerHTML},t.prototype._sanitize=function(u,p){var k=l(u,p),h=k.firstChild();if(h)do{if(h.nodeType===Node.TEXT_NODE)if(h.data.trim()===""&&(h.previousElementSibling&&i(h.previousElementSibling)||h.nextElementSibling&&i(h.nextElementSibling))){p.removeChild(h),this._sanitize(u,p);break}else continue;if(h.nodeType===Node.COMMENT_NODE){p.removeChild(h),this._sanitize(u,p);break}var S=r(h),b;S&&(b=Array.prototype.some.call(h.childNodes,i));var E=!!p.parentNode,T=i(p)&&i(h)&&E,y=h.nodeName.toLowerCase(),v=a(this.config,y,h),B=S&&b;if(B||c(h,v)||!this.config.keepNestedBlockElements&&T){if(!(h.nodeName==="SCRIPT"||h.nodeName==="STYLE"))for(;h.childNodes.length>0;)p.insertBefore(h.childNodes[0],h);p.removeChild(h),this._sanitize(u,p);break}for(var I=0;I<h.attributes.length;I+=1){var O=h.attributes[I];d(O,v,h)&&(h.removeAttribute(O.name),I=I-1)}this._sanitize(u,h)}while(h=k.nextSibling())};function l(u,p){return u.createTreeWalker(p,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function a(u,p,k){return typeof u.tags[p]=="function"?u.tags[p](k):u.tags[p]}function c(u,p){return typeof p>"u"?!0:typeof p=="boolean"?!p:!1}function d(u,p,k){var h=u.name.toLowerCase();return p===!0?!1:typeof p[h]=="function"?!p[h](u.value,k):typeof p[h]>"u"||p[h]===!1?!0:typeof p[h]=="string"?p[h]!==u.value:!1}return t})})(Mu);const Ou=gi;function tl(o,e){return o.map(t=>{const n=he(e)?e(t.tool):e;return st(n)||(t.data=Yi(t.data,n)),t})}function yt(o,e={}){const t={tags:e};return new Ou(t).clean(o)}function Yi(o,e){return Array.isArray(o)?Au(o,e):_e(o)?Lu(o,e):Lt(o)?Nu(o,e):o}function Au(o,e){return o.map(t=>Yi(t,e))}function Lu(o,e){const t={};for(const n in o){if(!Object.prototype.hasOwnProperty.call(o,n))continue;const i=o[n],s=Ru(e[n])?e[n]:e;t[n]=Yi(i,s)}return t}function Nu(o,e){return _e(e)?yt(o,e):e===!1?yt(o,{}):o}function Ru(o){return _e(o)||tu(o)||he(o)}class Pu extends oe{get methods(){return{clean:(e,t)=>this.clean(e,t)}}clean(e,t){return yt(e,t)}}class Du extends oe{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(et(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}}class Fu extends oe{get methods(){return{findParentTag:(e,t)=>this.findParentTag(e,t),expandToTag:e=>this.expandToTag(e)}}findParentTag(e,t){return new q().findParentTag(e,t)}expandToTag(e){new q().expandToTag(e)}}class Hu extends oe{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class ju extends oe{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(this.Editor.BlockManager.currentBlockIndex===-1){et("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(this.Editor.BlockManager.currentBlockIndex===-1){et("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var mi={},$u={get exports(){return mi},set exports(o){mi=o}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(o,e){(function(t,n){o.exports=n()})(window,function(){return function(t){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=n,i.d=function(s,r,l){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var a in s)i.d(l,a,(function(c){return s[c]}).bind(null,a));return l},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="",i(i.s=0)}([function(t,n,i){t.exports=i(1)},function(t,n,i){i.r(n),i.d(n,"default",function(){return s});class s{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(l,a,c){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const d=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},c);if(d.hidingDelay&&(this.hidingDelay=d.hidingDelay),this.nodes.content.innerHTML="",typeof a=="string")this.nodes.content.appendChild(document.createTextNode(a));else{if(!(a instanceof Node))throw Error("[CodeX Tooltip] Wrong type of content passed. It should be an instance of Node or String. But "+typeof a+" given.");this.nodes.content.appendChild(a)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),d.placement){case"top":this.placeTop(l,d);break;case"left":this.placeLeft(l,d);break;case"right":this.placeRight(l,d);break;case"bottom":default:this.placeBottom(l,d)}d&&d.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},d.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(l=!1){if(this.hidingDelay&&!l)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(l,a,c){l.addEventListener("mouseenter",()=>{this.show(l,a,c)}),l.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const l="codex-tooltips-style";if(document.getElementById(l))return;const a=i(2),c=this.make("style",null,{textContent:a.toString(),id:l});this.prepend(document.head,c)}placeBottom(l,a){const c=l.getBoundingClientRect(),d=c.left+l.clientWidth/2-this.nodes.wrapper.offsetWidth/2,u=c.bottom+window.pageYOffset+this.offsetTop+a.marginTop;this.applyPlacement("bottom",d,u)}placeTop(l,a){const c=l.getBoundingClientRect(),d=c.left+l.clientWidth/2-this.nodes.wrapper.offsetWidth/2,u=c.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",d,u)}placeLeft(l,a){const c=l.getBoundingClientRect(),d=c.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-a.marginLeft,u=c.top+window.pageYOffset+l.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",d,u)}placeRight(l,a){const c=l.getBoundingClientRect(),d=c.right+this.offsetRight+a.marginRight,u=c.top+window.pageYOffset+l.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",d,u)}applyPlacement(l,a,c){this.nodes.wrapper.classList.add(this.CSS.placement[l]),this.nodes.wrapper.style.left=a+"px",this.nodes.wrapper.style.top=c+"px"}make(l,a=null,c={}){const d=document.createElement(l);Array.isArray(a)?d.classList.add(...a):a&&d.classList.add(a);for(const u in c)c.hasOwnProperty(u)&&(d[u]=c[u]);return d}append(l,a){Array.isArray(a)?a.forEach(c=>l.appendChild(c)):l.appendChild(a)}prepend(l,a){Array.isArray(a)?(a=a.reverse()).forEach(c=>l.prepend(c)):l.prepend(a)}}},function(t,n){t.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})($u);const Uu=Rn(mi);class Xi{constructor(){this.lib=new Uu}destroy(){this.lib.destroy()}show(e,t,n){this.lib.show(e,t,n)}hide(e=!1){this.lib.hide(e)}onHover(e,t,n){this.lib.onHover(e,t,n)}}class zu extends oe{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.tooltip=new Xi}destroy(){this.tooltip.destroy()}get methods(){return{show:(e,t,n)=>this.show(e,t,n),hide:()=>this.hide(),onHover:(e,t,n)=>this.onHover(e,t,n)}}show(e,t,n){this.tooltip.show(e,t,n)}hide(){this.tooltip.hide()}onHover(e,t,n){this.tooltip.onHover(e,t,n)}}class Wu extends oe{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function ol(o,e){const t={};return Object.entries(o).forEach(([n,i])=>{if(_e(i)){const s=e?`${e}.${n}`:n;Object.values(i).every(r=>Lt(r))?t[n]=s:t[n]=ol(i,s);return}t[n]=i}),t}const tt=ol(Zr);function Ku(o,e){const t={};return Object.keys(o).forEach(n=>{const i=e[n];i!==void 0?t[i]=o[n]:t[n]=o[n]}),t}const qu='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',nl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',Yu='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',Xu='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',Vu='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',Zu='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',Ws='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',Ju='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',Gu='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',Qu='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',eh='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',th='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>';class me{constructor(e){this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{this.nodes.root.classList.remove(me.CSS.noFocus)},this.removeSpecialHoverBehavior=()=>{this.nodes.root.classList.remove(me.CSS.noHover)},this.onErrorAnimationEnd=()=>{this.nodes.icon.classList.remove(me.CSS.wobbleAnimation),this.nodes.icon.removeEventListener("animationend",this.onErrorAnimationEnd)},this.params=e,this.nodes.root=this.make(e)}get isDisabled(){return this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get closeOnActivate(){return this.params.closeOnActivate}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root.classList.contains(me.CSS.focused)}static get CSS(){return{container:"ce-popover-item",title:"ce-popover-item__title",secondaryTitle:"ce-popover-item__secondary-title",icon:"ce-popover-item__icon",active:"ce-popover-item--active",disabled:"ce-popover-item--disabled",focused:"ce-popover-item--focused",hidden:"ce-popover-item--hidden",confirmationState:"ce-popover-item--confirmation",noHover:"ce-popover-item--no-hover",noFocus:"ce-popover-item--no-focus",wobbleAnimation:"wobble"}}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){this.nodes.root.classList.toggle(me.CSS.active,e)}toggleHidden(e){this.nodes.root.classList.toggle(me.CSS.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e){const t=_.make("div",me.CSS.container);return e.name&&(t.dataset.itemName=e.name),this.nodes.icon=_.make("div",me.CSS.icon,{innerHTML:e.icon||Vu}),t.appendChild(this.nodes.icon),t.appendChild(_.make("div",me.CSS.title,{innerHTML:e.title||""})),e.secondaryLabel&&t.appendChild(_.make("div",me.CSS.secondaryTitle,{textContent:e.secondaryLabel})),e.isActive&&t.classList.add(me.CSS.active),e.isDisabled&&t.classList.add(me.CSS.disabled),t}enableConfirmationMode(e){const t={...this.params,...e,confirmation:e.confirmation},n=this.make(t);this.nodes.root.innerHTML=n.innerHTML,this.nodes.root.classList.add(me.CSS.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(me.CSS.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){this.nodes.root.classList.add(me.CSS.noHover),this.nodes.root.classList.add(me.CSS.noFocus),this.nodes.root.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.nodes.root.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){if(e.confirmation===void 0)try{e.onActivate(e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){this.nodes.icon.classList.contains(me.CSS.wobbleAnimation)||(this.nodes.icon.classList.add(me.CSS.wobbleAnimation),this.nodes.icon.addEventListener("animationend",this.onErrorAnimationEnd))}}const To=class{constructor(o,e){this.cursor=-1,this.items=[],this.items=o||[],this.focusedCssClass=e}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(o){o<this.items.length&&o>=-1&&(this.dropCursor(),this.cursor=o,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(o){this.items=o}next(){this.cursor=this.leafNodesAndReturnIndex(To.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(To.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(o){if(this.items.length===0)return this.cursor;let e=this.cursor;return e===-1?e=o===To.directions.RIGHT?-1:0:this.items[e].classList.remove(this.focusedCssClass),o===To.directions.RIGHT?e=(e+1)%this.items.length:e=(this.items.length+e-1)%this.items.length,_.canSetCaret(this.items[e])&&po(()=>q.setCursor(this.items[e]),50)(),this.items[e].classList.add(this.focusedCssClass),e}};let Xt=To;Xt.directions={RIGHT:"right",LEFT:"left"};class xt{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=t=>{if(this.isEventReadyForHandling(t))switch(xt.usedKeys.includes(t.keyCode)&&t.preventDefault(),t.keyCode){case Z.TAB:this.handleTabPress(t);break;case Z.LEFT:case Z.UP:this.flipLeft();break;case Z.RIGHT:case Z.DOWN:this.flipRight();break;case Z.ENTER:this.handleEnterPress(t);break}},this.iterator=new Xt(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||xt.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[Z.TAB,Z.LEFT,Z.RIGHT,Z.ENTER,Z.UP,Z.DOWN]}activate(e,t){this.activated=!0,e&&this.iterator.setItems(e),t!==void 0&&this.iterator.setCursor(t),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(t=>t!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?Xt.directions.LEFT:Xt.directions.RIGHT){case Xt.directions.RIGHT:this.flipRight();break;case Xt.directions.LEFT:this.flipLeft();break}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),he(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}}class Oo{static get CSS(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}constructor({items:e,onSearch:t,placeholder:n}){this.listeners=new Ki,this.items=e,this.onSearch=t,this.render(n)}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.onSearch("",this.foundItems)}destroy(){this.listeners.removeAll()}render(e){this.wrapper=_.make("div",Oo.CSS.wrapper);const t=_.make("div",Oo.CSS.icon,{innerHTML:Qu});this.input=_.make("input",Oo.CSS.input,{placeholder:e}),this.wrapper.appendChild(t),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.onSearch(this.searchQuery,this.foundItems)})}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var t;const n=((t=e.title)==null?void 0:t.toLowerCase())||"",i=this.searchQuery.toLowerCase();return n.includes(i)}}const Bo=class{lock(){Us?this.lockHard():document.body.classList.add(Bo.CSS.scrollLocked)}unlock(){Us?this.unlockHard():document.body.classList.remove(Bo.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(Bo.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(Bo.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};let il=Bo;il.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};var oh=Object.defineProperty,nh=Object.getOwnPropertyDescriptor,ih=(o,e,t,n)=>{for(var i=n>1?void 0:n?nh(e,t):e,s=o.length-1,r;s>=0;s--)(r=o[s])&&(i=(n?r(e,t,i):r(i))||i);return n&&i&&oh(e,t,i),i},Ho=(o=>(o.Close="close",o))(Ho||{});const Te=class extends Pn{constructor(o){super(),this.scopeElement=document.body,this.listeners=new Ki,this.scrollLocker=new il,this.nodes={wrapper:null,popover:null,nothingFoundMessage:null,customContent:null,items:null,overlay:null},this.messages={nothingFound:"Nothing found",search:"Search"},this.onFlip=()=>{this.items.find(e=>e.isFocused).onFocus()},this.items=o.items.map(e=>new me(e)),o.scopeElement!==void 0&&(this.scopeElement=o.scopeElement),o.messages&&(this.messages={...this.messages,...o.messages}),o.customContentFlippableItems&&(this.customContentFlippableItems=o.customContentFlippableItems),this.make(),o.customContent&&this.addCustomContent(o.customContent),o.searchable&&this.addSearch(),this.initializeFlipper()}static get CSS(){return{popover:"ce-popover",popoverOpenTop:"ce-popover--open-top",popoverOpened:"ce-popover--opened",search:"ce-popover__search",nothingFoundMessage:"ce-popover__nothing-found-message",nothingFoundMessageDisplayed:"ce-popover__nothing-found-message--displayed",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden",items:"ce-popover__items",overlay:"ce-popover__overlay",overlayHidden:"ce-popover__overlay--hidden"}}getElement(){return this.nodes.wrapper}hasFocus(){return this.flipper.hasFocus()}show(){this.shouldOpenBottom||(this.nodes.popover.style.setProperty("--popover-height",this.height+"px"),this.nodes.popover.classList.add(Te.CSS.popoverOpenTop)),this.nodes.overlay.classList.remove(Te.CSS.overlayHidden),this.nodes.popover.classList.add(Te.CSS.popoverOpened),this.flipper.activate(this.flippableElements),this.search!==void 0&&setTimeout(()=>{this.search.focus()},100),$t()&&this.scrollLocker.lock()}hide(){this.nodes.popover.classList.remove(Te.CSS.popoverOpened),this.nodes.popover.classList.remove(Te.CSS.popoverOpenTop),this.nodes.overlay.classList.add(Te.CSS.overlayHidden),this.flipper.deactivate(),this.items.forEach(o=>o.reset()),this.search!==void 0&&this.search.clear(),$t()&&this.scrollLocker.unlock(),this.emit("close")}destroy(){this.flipper.deactivate(),this.listeners.removeAll(),$t()&&this.scrollLocker.unlock()}make(){this.nodes.popover=_.make("div",[Te.CSS.popover]),this.nodes.nothingFoundMessage=_.make("div",[Te.CSS.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popover.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=_.make("div",[Te.CSS.items]),this.items.forEach(o=>{this.nodes.items.appendChild(o.getElement())}),this.nodes.popover.appendChild(this.nodes.items),this.listeners.on(this.nodes.popover,"click",o=>{const e=this.getTargetItem(o);e!==void 0&&this.handleItemClick(e)}),this.nodes.wrapper=_.make("div"),this.nodes.overlay=_.make("div",[Te.CSS.overlay,Te.CSS.overlayHidden]),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.nodes.wrapper.appendChild(this.nodes.overlay),this.nodes.wrapper.appendChild(this.nodes.popover)}addSearch(){this.search=new Oo({items:this.items,placeholder:this.messages.search,onSearch:(e,t)=>{this.items.forEach(i=>{const s=!t.includes(i);i.toggleHidden(s)}),this.toggleNothingFoundMessage(t.length===0),this.toggleCustomContent(e!=="");const n=e===""?this.flippableElements:t.map(i=>i.getElement());this.flipper.isActivated&&(this.flipper.deactivate(),this.flipper.activate(n))}});const o=this.search.getElement();o.classList.add(Te.CSS.search),this.nodes.popover.insertBefore(o,this.nodes.popover.firstChild)}addCustomContent(o){this.nodes.customContent=o,this.nodes.customContent.classList.add(Te.CSS.customContent),this.nodes.popover.insertBefore(o,this.nodes.popover.firstChild)}getTargetItem(o){return this.items.find(e=>o.composedPath().includes(e.getElement()))}handleItemClick(o){o.isDisabled||(this.items.filter(e=>e!==o).forEach(e=>e.reset()),o.handleClick(),this.toggleItemActivenessIfNeeded(o),o.closeOnActivate&&this.hide())}initializeFlipper(){this.flipper=new xt({items:this.flippableElements,focusedItemClass:me.CSS.focused,allowedKeys:[Z.TAB,Z.UP,Z.DOWN,Z.ENTER]}),this.flipper.onFlip(this.onFlip)}get flippableElements(){const o=this.items.map(e=>e.getElement());return(this.customContentFlippableItems||[]).concat(o)}get height(){let o=0;if(this.nodes.popover===null)return o;const e=this.nodes.popover.cloneNode(!0);return e.style.visibility="hidden",e.style.position="absolute",e.style.top="-1000px",e.classList.add(Te.CSS.popoverOpened),document.body.appendChild(e),o=e.offsetHeight,e.remove(),o}get shouldOpenBottom(){const o=this.nodes.popover.getBoundingClientRect(),e=this.scopeElement.getBoundingClientRect(),t=this.height,n=o.top+t,i=o.top-t,s=Math.min(window.innerHeight,e.bottom);return i<e.top||n<=s}toggleNothingFoundMessage(o){this.nodes.nothingFoundMessage.classList.toggle(Te.CSS.nothingFoundMessageDisplayed,o)}toggleCustomContent(o){var e;(e=this.nodes.customContent)==null||e.classList.toggle(Te.CSS.customContentHidden,o)}toggleItemActivenessIfNeeded(o){if(o.toggle===!0&&o.toggleActive(),typeof o.toggle=="string"){const e=this.items.filter(t=>t.toggle===o.toggle);if(e.length===1){o.toggleActive();return}e.forEach(t=>{t.toggleActive(t===o)})}}};let Vi=Te;ih([ko],Vi.prototype,"height",1);class sh extends oe{constructor(){super(...arguments),this.opened=!1,this.selection=new q,this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;return(e=this.popover)==null?void 0:e.flipper}make(){this.nodes.wrapper=_.make("div",[this.CSS.settings])}destroy(){this.removeAllNodes()}open(e=this.Editor.BlockManager.currentBlock){this.opened=!0,this.selection.save(),e.selected=!0,this.Editor.BlockSelection.clearCache();const[t,n]=e.getTunes();this.eventsDispatcher.emit(this.events.opened),this.popover=new Vi({searchable:!0,items:t.map(i=>this.resolveTuneAliases(i)),customContent:n,customContentFlippableItems:this.getControls(n),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:De.ui(tt.ui.popover,"Nothing found"),search:De.ui(tt.ui.popover,"Filter")}}),this.popover.on(Ho.Close,this.onPopoverClose),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}close(){this.opened=!1,q.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&(this.Editor.BlockManager.currentBlock.selected=!1),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(Ho.Close,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null)}getControls(e){const{StylesAPI:t}=this.Editor,n=e.querySelectorAll(`.${t.classes.settingsButton}, ${_.allInputsSelector}`);return Array.from(n)}resolveTuneAliases(e){const t=Ku(e,{label:"title"});return e.confirmation&&(t.confirmation=this.resolveTuneAliases(e.confirmation)),t}}class je extends oe{constructor(){super(...arguments),this.opened=!1,this.tools=[],this.flipper=null,this.togglingCallback=null}static get CSS(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolSecondaryLabel:"ce-conversion-tool__secondary-label",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}make(){this.nodes.wrapper=_.make("div",[je.CSS.conversionToolbarWrapper,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.tools=_.make("div",je.CSS.conversionToolbarTools);const e=_.make("div",je.CSS.conversionToolbarLabel,{textContent:De.ui(tt.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),_.append(this.nodes.wrapper,e),_.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}toggle(e){this.opened?this.close():this.open(),he(e)&&(this.togglingCallback=e)}open(){this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(je.CSS.conversionToolbarShowed),window.requestAnimationFrame(()=>{this.flipper.activate(this.tools.map(e=>e.button).filter(e=>!e.classList.contains(je.CSS.conversionToolHidden))),this.flipper.focusFirst(),he(this.togglingCallback)&&this.togglingCallback(!0)})}close(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(je.CSS.conversionToolbarShowed),he(this.togglingCallback)&&this.togglingCallback(!1)}hasTools(){return this.tools.length===1?this.tools[0].name!==this.config.defaultBlock:!0}async replaceWithBlock(e,t){const{BlockManager:n,BlockSelection:i,InlineToolbar:s,Caret:r}=this.Editor;n.convert(this.Editor.BlockManager.currentBlock,e,t),i.clearSelection(),this.close(),s.close(),window.requestAnimationFrame(()=>{r.setToBlock(this.Editor.BlockManager.currentBlock,r.positions.END)})}addTools(){const e=this.Editor.Tools.blockTools;Array.from(e.entries()).forEach(([t,n])=>{var i;const s=n.conversionConfig;!s||!s.import||(i=n.toolbox)==null||i.forEach(r=>this.addToolIfValid(t,r))})}addToolIfValid(e,t){st(t)||!t.icon||this.addTool(e,t)}addTool(e,t){var n;const i=_.make("div",[je.CSS.conversionTool]),s=_.make("div",[je.CSS.conversionToolIcon]);i.dataset.tool=e,s.innerHTML=t.icon,_.append(i,s),_.append(i,_.text(De.t(tt.toolNames,t.title||fo(e))));const r=(n=this.Editor.Tools.blockTools.get(e))==null?void 0:n.shortcut;if(r){const l=_.make("span",je.CSS.conversionToolSecondaryLabel,{innerText:Wi(r)});_.append(i,l)}_.append(this.nodes.tools,i),this.tools.push({name:e,button:i,toolboxItem:t}),this.listeners.on(i,"click",async()=>{await this.replaceWithBlock(e,t.data)})}async filterTools(){const{currentBlock:e}=this.Editor.BlockManager,t=await e.getActiveToolboxEntry();function n(i,s){return i.icon===s.icon&&i.title===s.title}this.tools.forEach(i=>{let s=!1;if(t){const r=n(t,i.toolboxItem);s=i.button.dataset.tool===e.name&&r}i.button.hidden=s,i.button.classList.toggle(je.CSS.conversionToolHidden,s)})}enableFlipper(){this.flipper=new xt({focusedItemClass:je.CSS.conversionToolFocused})}}var bi={},rh={get exports(){return bi},set exports(o){bi=o}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(o,e){(function(t,n){o.exports=n()})(window,function(){return function(t){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=n,i.d=function(s,r,l){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var a in s)i.d(l,a,(function(c){return s[c]}).bind(null,a));return l},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="",i(i.s=0)}([function(t,n,i){function s(a,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r(a,c,d){return c&&s(a.prototype,c),d&&s(a,d),a}i.r(n);var l=function(){function a(c){var d=this;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,a),this.commands={},this.keys={},this.name=c.name,this.parseShortcutName(c.name),this.element=c.on,this.callback=c.callback,this.executeShortcut=function(u){d.execute(u)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return r(a,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),r(a,[{key:"parseShortcutName",value:function(c){c=c.split("+");for(var d=0;d<c.length;d++){c[d]=c[d].toUpperCase();var u=!1;for(var p in a.supportedCommands)if(a.supportedCommands[p].includes(c[d])){u=this.commands[p]=!0;break}u||(this.keys[c[d]]=!0)}for(var k in a.supportedCommands)this.commands[k]||(this.commands[k]=!1)}},{key:"execute",value:function(c){var d,u={CMD:c.ctrlKey||c.metaKey,SHIFT:c.shiftKey,ALT:c.altKey},p=!0;for(d in this.commands)this.commands[d]!==u[d]&&(p=!1);var k,h=!0;for(k in this.keys)h=h&&c.keyCode===a.keyCodes[k];p&&h&&this.callback(c)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),a}();n.default=l}]).default})})(rh);const lh=Rn(bi);class ah{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const t=new lh({name:e.name,on:e.on,callback:e.handler}),n=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...n,t])}remove(e,t){const n=this.findShortcut(e,t);if(!n)return;n.remove();const i=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,i.filter(s=>s!==n))}findShortcut(e,t){return(this.registeredShortcuts.get(e)||[]).find(({name:n})=>n===t)}}const go=new ah;var ch=Object.defineProperty,dh=Object.getOwnPropertyDescriptor,sl=(o,e,t,n)=>{for(var i=n>1?void 0:n?dh(e,t):e,s=o.length-1,r;s>=0;s--)(r=o[s])&&(i=(n?r(e,t,i):r(i))||i);return n&&i&&ch(e,t,i),i},un=(o=>(o.Opened="toolbox-opened",o.Closed="toolbox-closed",o.BlockAdded="toolbox-block-added",o))(un||{});const rl=class extends Pn{constructor({api:o,tools:e,i18nLabels:t}){super(),this.opened=!1,this.nodes={toolbox:null},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=o,this.tools=e,this.i18nLabels=t}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}make(){return this.popover=new Vi({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(Ho.Close,this.onPopoverClose),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox.classList.add(rl.CSS.toolbox),this.nodes.toolbox}hasFocus(){var o;return(o=this.popover)==null?void 0:o.hasFocus()}destroy(){var o;super.destroy(),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),(o=this.popover)==null||o.off(Ho.Close,this.onPopoverClose)}toolButtonActivated(o,e){this.insertNewBlock(o,e)}open(){var o;this.isEmpty||((o=this.popover)==null||o.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var o;(o=this.popover)==null||o.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}get toolsToBeDisplayed(){const o=[];return this.tools.forEach(e=>{e.toolbox&&o.push(e)}),o}get toolboxItemsToBeDisplayed(){const o=(e,t)=>({icon:e.icon,title:De.t(tt.toolNames,e.title||fo(t.name)),name:t.name,onActivate:()=>{this.toolButtonActivated(t.name,e.data)},secondaryLabel:t.shortcut?Wi(t.shortcut):""});return this.toolsToBeDisplayed.reduce((e,t)=>(Array.isArray(t.toolbox)?t.toolbox.forEach(n=>{e.push(o(n,t))}):t.toolbox!==void 0&&e.push(o(t.toolbox,t)),e),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(o=>{const e=o.shortcut;e&&this.enableShortcutForTool(o.name,e)})}enableShortcutForTool(o,e){go.add({name:e,on:this.api.ui.nodes.redactor,handler:t=>{t.preventDefault();const n=this.api.blocks.getCurrentBlockIndex(),i=this.api.blocks.getBlockByIndex(n);if(i)try{this.api.blocks.convert(i.id,o),window.requestAnimationFrame(()=>{this.api.caret.setToBlock(n,"end")});return}catch{}this.insertNewBlock(o)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(o=>{const e=o.shortcut;e&&go.remove(this.api.ui.nodes.redactor,e)})}async insertNewBlock(o,e){const t=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(t);if(!n)return;const i=n.isEmpty?t:t+1;let s;if(e){const l=await this.api.blocks.composeBlockData(o);s=Object.assign(l,e)}const r=this.api.blocks.insert(o,s,void 0,i,void 0,n.isEmpty);r.call(vt.APPEND_CALLBACK),this.api.caret.setToBlock(i),this.emit("toolbox-block-added",{block:r}),this.api.toolbar.close()}};let Zi=rl;sl([ko],Zi.prototype,"toolsToBeDisplayed",1);sl([ko],Zi.prototype,"toolboxItemsToBeDisplayed",1);const ll="block hovered";class uh extends oe{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.toolboxInstance=null,this.tooltip=new Xi}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:(e=this.toolboxInstance)==null?void 0:e.opened,close:()=>{var t;(t=this.toolboxInstance)==null||t.close()},open:()=>{if(this.toolboxInstance===null){se("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){se("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var t;return(t=this.toolboxInstance)==null?void 0:t.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){se("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const t=e.holder,{isMobile:n}=this.Editor.UI,i=e.pluginsContent,s=window.getComputedStyle(i),r=parseInt(s.paddingTop,10),l=t.offsetHeight;let a;n?a=t.offsetTop+l:a=t.offsetTop+r,this.nodes.wrapper.style.top=`${Math.floor(a)}px`,this.Editor.BlockManager.blocks.length===1&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e;this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(e=this.toolboxInstance)==null||e.close(),this.Editor.BlockSettings.close())}open(e=!0){po(()=>{this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()},50)()}make(){this.nodes.wrapper=_.make("div",this.CSS.toolbar),["content","actions"].forEach(t=>{this.nodes[t]=_.make("div",this.CSS[t])}),_.append(this.nodes.wrapper,this.nodes.content),_.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=_.make("div",this.CSS.plusButton,{innerHTML:Gu}),_.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{this.tooltip.hide(!0),this.plusButtonClicked()},!1);const e=_.make("div");e.appendChild(document.createTextNode(De.ui(tt.ui.toolbar.toolbox,"Add"))),e.appendChild(_.make("div",this.CSS.plusButtonShortcut,{textContent:" Tab"})),this.tooltip.onHover(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=_.make("span",this.CSS.settingsToggler,{innerHTML:Ju}),_.append(this.nodes.actions,this.nodes.settingsToggler),this.tooltip.onHover(this.nodes.settingsToggler,De.ui(tt.ui.blockTunes.toggler,"Click to tune"),{hidingDelay:400}),_.append(this.nodes.actions,this.makeToolbox()),_.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),_.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new Zi({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:De.ui(tt.ui.popover,"Filter"),nothingFound:De.ui(tt.ui.popover,"Nothing found")}}),this.toolboxInstance.on(un.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(un.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(un.BlockAdded,({block:e})=>{const{BlockManager:t,Caret:n}=this.Editor,i=t.getBlockById(e.id);i.inputs.length===0&&(i===t.lastBlock?(t.insertAtEnd(),n.setToBlock(t.lastBlock)):n.setToBlock(t.nextBlock))}),this.toolboxInstance.make()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(e=this.toolboxInstance)==null||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var t;e.stopPropagation(),this.settingsTogglerClicked(),(t=this.toolboxInstance)!=null&&t.opened&&this.toolboxInstance.close(),this.tooltip.hide(!0)},!0),$t()||this.eventsDispatcher.on(ll,e=>{var t;this.Editor.BlockSettings.opened||(t=this.toolboxInstance)!=null&&t.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy(),this.tooltip.destroy()}}var Dn=(o=>(o[o.Block=0]="Block",o[o.Inline=1]="Inline",o[o.Tune=2]="Tune",o))(Dn||{}),hn=(o=>(o.Shortcut="shortcut",o.Toolbox="toolbox",o.EnabledInlineTools="inlineToolbar",o.EnabledBlockTunes="tunes",o.Config="config",o))(hn||{}),al=(o=>(o.Shortcut="shortcut",o.SanitizeConfig="sanitize",o))(al||{}),Vt=(o=>(o.IsEnabledLineBreaks="enableLineBreaks",o.Toolbox="toolbox",o.ConversionConfig="conversionConfig",o.IsReadOnlySupported="isReadOnlySupported",o.PasteConfig="pasteConfig",o))(Vt||{}),Ji=(o=>(o.IsInline="isInline",o.Title="title",o))(Ji||{}),cl=(o=>(o.IsTune="isTune",o))(cl||{});class Gi{constructor({name:e,constructable:t,config:n,api:i,isDefault:s,isInternal:r=!1,defaultPlaceholder:l}){this.api=i,this.name=e,this.constructable=t,this.config=n,this.isDefault=s,this.isInternal=r,this.defaultPlaceholder=l}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(he(this.constructable.reset))return this.constructable.reset()}prepare(){if(he(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===1}isBlock(){return this.type===0}isTune(){return this.type===2}}class hh extends oe{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},this.opened=!1,this.toolbarVerticalMargin=$t()?20:6,this.buttonsList=null,this.width=0,this.flipper=null,this.tooltip=new Xi}toggleReadOnly(e){e?(this.destroy(),this.Editor.ConversionToolbar.destroy()):window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}tryToShow(e=!1,t=!0){if(!this.allowedToShow()){e&&this.close();return}this.move(),this.open(t),this.Editor.Toolbar.close()}move(){const e=q.rect,t=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),n={x:e.x-t.left,y:e.y+e.height-t.top+this.toolbarVerticalMargin};e.width&&(n.x+=Math.floor(e.width/2));const i=n.x-this.width/2,s=n.x+this.width/2;this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarLeftOriented,i<this.Editor.UI.contentRect.left),this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarRightOriented,s>this.Editor.UI.contentRect.right),this.nodes.wrapper.style.left=Math.floor(n.x)+"px",this.nodes.wrapper.style.top=Math.floor(n.y)+"px"}close(){this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(([e,t])=>{const n=this.getToolShortcut(e);n&&go.remove(this.Editor.UI.nodes.redactor,n),he(t.clear)&&t.clear()}),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}open(e=!0){if(this.opened)return;this.addToolsFiltered(),this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(`.${this.CSS.inlineToolButton}`),this.opened=!0,e&&this.Editor.ConversionToolbar.hasTools()?this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0;let t=Array.from(this.buttonsList);t.unshift(this.nodes.conversionToggler),t=t.filter(n=>!n.hidden),this.flipper.activate(t)}containsNode(e){return this.nodes.wrapper.contains(e)}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes(),this.tooltip.destroy()}make(){this.nodes.wrapper=_.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.togglerAndButtonsWrapper=_.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=_.make("div",this.CSS.buttonsWrapper),this.nodes.actions=_.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",e=>{e.target.closest(`.${this.CSS.actionsWrapper}`)||e.preventDefault()}),_.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),_.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),_.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),window.requestAnimationFrame(()=>{this.recalculateWidth()}),this.enableFlipper()}allowedToShow(){const e=["IMG","INPUT"],t=q.get(),n=q.text;if(!t||!t.anchorNode||t.isCollapsed||n.length<1)return!1;const i=_.isElement(t.anchorNode)?t.anchorNode:t.anchorNode.parentElement;if(t&&e.includes(i.tagName)||i.closest('[contenteditable="true"]')===null)return!1;const s=this.Editor.BlockManager.getBlock(t.anchorNode);return s?s.tool.inlineTools.size!==0:!1}recalculateWidth(){this.width=this.nodes.wrapper.offsetWidth}addConversionToggler(){this.nodes.conversionToggler=_.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=_.make("div",this.CSS.conversionTogglerContent);const e=_.make("div",this.CSS.conversionTogglerArrow,{innerHTML:nl});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(e),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",()=>{this.Editor.ConversionToolbar.toggle(t=>{!t&&this.opened?this.flipper.activate():this.opened&&this.flipper.deactivate()})}),$t()===!1&&this.tooltip.onHover(this.nodes.conversionToggler,De.ui(tt.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}async setConversionTogglerContent(){const{BlockManager:e}=this.Editor,{currentBlock:t}=e,n=t.name,i=t.tool.conversionConfig,s=i&&i.export;this.nodes.conversionToggler.hidden=!s,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!s);const r=await t.getActiveToolboxEntry()||{};this.nodes.conversionTogglerContent.innerHTML=r.icon||r.title||fo(n)}prepareConversionToolbar(){const e=this.Editor.ConversionToolbar.make();_.append(this.nodes.wrapper,e)}addToolsFiltered(){const e=q.get(),t=this.Editor.BlockManager.getBlock(e.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(t.tool.inlineTools.values()).forEach(n=>{this.addTool(n)}),this.recalculateWidth()}addTool(e){const t=e.create(),n=t.render();if(!n){se("Render method must return an instance of Node","warn",e.name);return}if(n.dataset.tool=e.name,this.nodes.buttons.appendChild(n),this.toolsInstances.set(e.name,t),he(t.renderActions)){const l=t.renderActions();this.nodes.actions.appendChild(l)}this.listeners.on(n,"click",l=>{this.toolClicked(t),l.preventDefault()});const i=this.getToolShortcut(e.name);if(i)try{this.enableShortcuts(t,i)}catch{}const s=_.make("div"),r=De.t(tt.toolNames,e.title||fo(e.name));s.appendChild(_.text(r)),i&&s.appendChild(_.make("div",this.CSS.inlineToolbarShortcut,{textContent:Wi(i)})),$t()===!1&&this.tooltip.onHover(n,s,{placement:"top",hidingDelay:100}),t.checkState(q.get())}getToolShortcut(e){const{Tools:t}=this.Editor,n=t.inlineTools.get(e),i=t.internal.inlineTools;return Array.from(i.keys()).includes(e)?this.inlineTools[e][al.Shortcut]:n.shortcut}enableShortcuts(e,t){go.add({name:t,handler:n=>{const{currentBlock:i}=this.Editor.BlockManager;i&&i.tool.enabledInlineTools&&(n.preventDefault(),this.toolClicked(e))},on:this.Editor.UI.nodes.redactor})}toolClicked(e){const t=q.range;e.surround(t),this.checkToolsState(),e.renderActions!==void 0&&this.flipper.deactivate()}checkToolsState(){this.toolsInstances.forEach(e=>{e.checkState(q.get())})}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([t,n])=>{e[t]=n.create()}),e}enableFlipper(){this.flipper=new xt({focusedItemClass:this.CSS.focusedButton,allowedKeys:[Z.ENTER,Z.TAB]})}}class ph extends oe{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case Z.BACKSPACE:this.backspace(e);break;case Z.DELETE:this.delete(e);break;case Z.ENTER:this.enter(e);break;case Z.DOWN:case Z.RIGHT:this.arrowRightAndDown(e);break;case Z.UP:case Z.LEFT:this.arrowLeftAndUp(e);break;case Z.TAB:this.tabPressed(e);break}}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&Yr(e.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||(this.Editor.BlockManager.clearFocused(),this.Editor.BlockSelection.clearSelection(e)))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}tabPressed(e){this.Editor.BlockSelection.clearSelection(e);const{BlockManager:t,InlineToolbar:n,ConversionToolbar:i}=this.Editor,s=t.currentBlock;if(!s)return;const r=s.isEmpty,l=s.tool.isDefault&&r,a=!r&&i.opened,c=!r&&!q.isCollapsed&&n.opened;l?this.activateToolbox():!a&&!c&&this.activateBlockSettings()}dragOver(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!0}dragLeave(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!1}handleCommandC(e){const{BlockSelection:t}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:t,BlockManager:n,Caret:i}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e).then(()=>{const s=n.removeSelectedBlocks(),r=n.insertDefaultBlockAtIndex(s,!0);i.setToBlock(r,i.positions.START),t.clearSelection(e)})}enter(e){const{BlockManager:t,UI:n}=this.Editor;if(t.currentBlock.tool.isLineBreaksEnabled||n.someToolbarOpened&&n.someFlipperButtonFocused||e.shiftKey)return;let i=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):this.Editor.Caret.isAtEnd?i=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):i=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(i),this.Editor.Toolbar.moveAndOpen(i),e.preventDefault()}backspace(e){const{BlockManager:t,Caret:n}=this.Editor,{currentBlock:i,previousBlock:s}=t;if(!(!q.isCollapsed||!n.isAtStart)){if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput!==i.firstInput){n.navigatePrevious();return}if(s!==null){if(s.isEmpty){t.removeBlock(s);return}if(i.isEmpty){t.removeBlock(i);const r=t.currentBlock;n.setToBlock(r,n.positions.END);return}zs(i,s)?this.mergeBlocks(s,i):n.setToBlock(s,n.positions.END)}}}delete(e){const{BlockManager:t,Caret:n}=this.Editor,{currentBlock:i,nextBlock:s}=t;if(!(!q.isCollapsed||!n.isAtEnd)){if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput!==i.lastInput){n.navigateNext();return}if(s!==null){if(s.isEmpty){t.removeBlock(s);return}if(i.isEmpty){t.removeBlock(i),n.setToBlock(s,n.positions.START);return}zs(i,s)?this.mergeBlocks(i,s):n.setToBlock(s,n.positions.START)}}}mergeBlocks(e,t){const{BlockManager:n,Caret:i,Toolbar:s}=this.Editor;i.createShadow(e.pluginsContent),n.mergeBlocks(e,t).then(()=>{window.requestAnimationFrame(()=>{i.restoreCaret(e.pluginsContent),e.pluginsContent.normalize(),s.close()})})}arrowRightAndDown(e){const t=xt.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===Z.TAB);if(this.Editor.UI.someToolbarOpened&&t)return;this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();const n=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===Z.DOWN&&n){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}(e.keyCode===Z.DOWN||e.keyCode===Z.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious())?e.preventDefault():po(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(xt.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===Z.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();const t=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===Z.UP&&t){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}(e.keyCode===Z.UP||e.keyCode===Z.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext())?e.preventDefault():po(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){const t=e.keyCode===Z.ENTER&&this.Editor.Toolbar.toolbox.opened,n=e.keyCode===Z.ENTER&&this.Editor.BlockSettings.opened,i=e.keyCode===Z.ENTER&&this.Editor.InlineToolbar.opened,s=e.keyCode===Z.ENTER&&this.Editor.ConversionToolbar.opened,r=e.keyCode===Z.TAB;return!(e.shiftKey||r||t||n||i||s)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||(this.Editor.BlockManager.currentBlock.focused=!0,this.Editor.Toolbar.moveAndOpen()),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}class Jn{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return Xr(this.workingArea.children)}static set(e,t,n){return isNaN(Number(t))?(Reflect.set(e,t,n),!0):(e.insert(+t,n),!0)}static get(e,t){return isNaN(Number(t))?Reflect.get(e,t):e.get(+t)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,t){const n=this.blocks[t];_.swap(this.blocks[e].holder,n.holder),this.blocks[t]=this.blocks[e],this.blocks[e]=n}move(e,t){const n=this.blocks.splice(t,1)[0],i=e-1,s=Math.max(0,i),r=this.blocks[s];e>0?this.insertToDOM(n,"afterend",r):this.insertToDOM(n,"beforebegin",r),this.blocks.splice(e,0,n);const l=this.composeBlockEvent("move",{fromIndex:t,toIndex:e});n.call(vt.MOVED,l)}insert(e,t,n=!1){if(!this.length){this.push(t);return}e>this.length&&(e=this.length),n&&(this.blocks[e].holder.remove(),this.blocks[e].call(vt.REMOVED));const i=n?1:0;if(this.blocks.splice(e,i,t),e>0){const s=this.blocks[e-1];this.insertToDOM(t,"afterend",s)}else{const s=this.blocks[e+1];s?this.insertToDOM(t,"beforebegin",s):this.insertToDOM(t)}}replace(e,t){if(this.blocks[e]===void 0)throw Error("Incorrect index");this.blocks[e].holder.replaceWith(t.holder),this.blocks[e]=t}insertMany(e,t){const n=new DocumentFragment;for(const i of e)n.appendChild(i.holder);if(this.length>0){if(t>0){const i=Math.min(t-1,this.length-1);this.blocks[i].holder.after(n)}else t===0&&this.workingArea.prepend(n);this.blocks.splice(t,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(n);e.forEach(i=>i.call(vt.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(vt.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(vt.REMOVED)),this.blocks.length=0}insertAfter(e,t){const n=this.blocks.indexOf(e);this.insert(n+1,t)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,t,n){t?n.holder.insertAdjacentElement(t,e.holder):this.workingArea.appendChild(e.holder),e.call(vt.RENDERED)}composeBlockEvent(e,t){return new CustomEvent(e,{detail:t})}}const Ks="block-removed",qs="block-added",fh="block-moved",Ys="block-changed";class gh{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((t,n)=>{this.completed=this.completed.then(e).then(t).catch(n)})}}class mh extends oe{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(e=>!!e.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(e=>!!e.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){const e=new Jn(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:Jn.set,get:Jn.get}),this.listeners.on(document,"copy",t=>this.Editor.BlockEvents.handleCommandC(t))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:t={},id:n=void 0,tunes:i={}}){const s=this.Editor.ReadOnly.isEnabled,r=this.Editor.Tools.blockTools.get(e),l=new ke({id:n,data:t,tool:r,api:this.Editor.API,readOnly:s,tunesData:i},this.eventsDispatcher);return s||window.requestIdleCallback(()=>{this.bindBlockEvents(l)},{timeout:2e3}),l}insert({id:e=void 0,tool:t=this.config.defaultBlock,data:n={},index:i,needToFocus:s=!0,replace:r=!1,tunes:l={}}={}){let a=i;a===void 0&&(a=this.currentBlockIndex+(r?0:1));const c=this.composeBlock({id:e,tool:t,data:n,tunes:l});return r&&this.blockDidMutated(Ks,this.getBlockByIndex(a),{index:a}),this._blocks.insert(a,c,r),this.blockDidMutated(qs,c,{index:a}),s?this.currentBlockIndex=a:a<=this.currentBlockIndex&&this.currentBlockIndex++,c}insertMany(e,t=0){this._blocks.insertMany(e,t)}async update(e,t){const n=await e.data,i=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},n,t),tunes:e.tunes}),s=this.getBlockIndex(e);return this._blocks.replace(s,i),this.blockDidMutated(Ys,i,{index:s}),i}replace(e,t,n){const i=this.getBlockIndex(e);this.insert({tool:t,data:n,index:i,replace:!0})}paste(e,t,n=!1){const i=this.insert({tool:e,replace:n});try{window.requestIdleCallback(()=>{i.call(vt.ON_PASTE,t)})}catch(s){se(`${e}: onPaste callback call is failed`,"error",s)}return i}insertDefaultBlockAtIndex(e,t=!1){const n=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=n,this.blockDidMutated(qs,n,{index:e}),t?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,n}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,t){const n=await t.data;st(n)||await e.mergeWith(n),this.removeBlock(t),this.currentBlockIndex=this._blocks.indexOf(e)}removeBlock(e,t=!0){return new Promise(n=>{const i=this._blocks.indexOf(e);if(!this.validateIndex(i))throw new Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(i),this.blockDidMutated(Ks,e,{index:i}),this.currentBlockIndex>=i&&this.currentBlockIndex--,this.blocks.length?i===0&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,t&&this.insert()),n()})}removeSelectedBlocks(){let e;for(let t=this.blocks.length-1;t>=0;t--)this.blocks[t].selected&&(this.removeBlock(this.blocks[t]),e=t);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),t=_.make("div");t.appendChild(e);const n={text:_.isEmpty(t)?"":t.innerHTML};return this.insert({data:n})}getBlockByIndex(e){return e===-1&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(t=>t.id===e)}getBlock(e){_.isElement(e)||(e=e.parentNode);const t=this._blocks.nodes,n=e.closest(`.${ke.CSS.wrapper}`),i=t.indexOf(n);if(i>=0)return this._blocks[i]}highlightCurrentNode(){this.clearFocused(),this.currentBlock.focused=!0}clearFocused(){this.blocks.forEach(e=>{e.focused=!1})}setCurrentBlockByChildNode(e){_.isElement(e)||(e=e.parentNode);const t=e.closest(`.${ke.CSS.wrapper}`);if(!t)return;const n=t.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(n!=null&&n.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(t),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){_.isElement(e)||(e=e.parentNode);const t=e.closest(`.${ke.CSS.wrapper}`);return this.blocks.find(n=>n.holder===t)}swap(e,t){this._blocks.swap(e,t),this.currentBlockIndex=t}move(e,t=this.currentBlockIndex){if(isNaN(e)||isNaN(t)){se("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(t)){se("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,t),this.currentBlockIndex=e,this.blockDidMutated(fh,this.currentBlock,{fromIndex:t,toIndex:e})}async convert(e,t,n){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const i=this.Editor.Tools.blockTools.get(t);if(!i)throw new Error(`Could not convert Block. Tool ${t} not found.`);const s=await e.exportDataAsString(),r=yt(s,i.sanitizeConfig);let l=vu(r,i.conversionConfig);n&&(l=Object.assign(l,n)),this.replace(e,i.name,l)}dropPointer(){this.currentBlockIndex=-1,this.clearFocused()}async clear(e=!1){const t=new gh;this.blocks.forEach(n=>{t.add(async()=>{await this.removeBlock(n,!1)})}),await t.completed,this.dropPointer(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){const{BlockEvents:t}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",n=>{t.keydown(n)}),this.readOnlyMutableListeners.on(e.holder,"keyup",n=>{t.keyup(n)}),this.readOnlyMutableListeners.on(e.holder,"dragover",n=>{t.dragOver(n)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",n=>{t.dragLeave(n)}),e.on("didMutated",n=>this.blockDidMutated(Ys,n,{index:this.getBlockIndex(n)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,t,n){const i=new CustomEvent(e,{detail:{target:new Ft(t),...n}});return this.eventsDispatcher.emit(Gr,{event:i}),t}}class bh extends oe{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every(t=>t.selected===!0)}set allBlocksSelected(e){const{BlockManager:t}=this.Editor;t.blocks.forEach(n=>{n.selected=e}),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=e.blocks.some(t=>t.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new q,go.add({name:"CMD+A",handler:e=>{const{BlockManager:t,ReadOnly:n}=this.Editor;if(n.isEnabled){e.preventDefault(),this.selectAllBlocks();return}t.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){q.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:t}=this.Editor;let n;isNaN(e)?n=t.currentBlock:n=t.getBlockByIndex(e),n.selected=!1,this.clearCache()}clearSelection(e,t=!1){const{BlockManager:n,Caret:i,RectangleSelection:s}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const r=e&&e instanceof KeyboardEvent,l=r&&Yr(e.keyCode);if(this.anyBlockSelected&&r&&l&&!q.isSelectionExists){const a=n.removeSelectedBlocks();n.insertDefaultBlockAtIndex(a,!0),i.setToBlock(n.currentBlock),po(()=>{const c=e.key;i.insertContentAtCaretPosition(c.length>1?"":c)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||s.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}t&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();const t=_.make("div");this.selectedBlocks.forEach(s=>{const r=yt(s.holder.innerHTML,this.sanitizerConfig),l=_.make("p");l.innerHTML=r,t.appendChild(l)});const n=Array.from(t.childNodes).map(s=>s.textContent).join(`

`),i=t.innerHTML;return e.clipboardData.setData("text/plain",n),e.clipboardData.setData("text/html",i),Promise.all(this.selectedBlocks.map(s=>s.save())).then(s=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(s))}catch{}})}selectBlockByIndex(e){const{BlockManager:t}=this.Editor;t.clearFocused();let n;isNaN(e)?n=t.currentBlock:n=t.getBlockByIndex(e),this.selection.save(),q.get().removeAllRanges(),n.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}clearCache(){this.anyBlockSelectedCache=null}destroy(){go.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),_.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const t=this.Editor.BlockManager.getBlock(e.target).inputs;if(t.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(t.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlockByIndex(),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),q.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}class wn extends oe{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}get isAtStart(){const e=q.get(),t=_.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput);let n=e.focusNode;if(_.isNativeInput(t))return t.selectionEnd===0;if(!e.anchorNode)return!1;let i=n.textContent.search(/\S/);i===-1&&(i=0);let s=e.focusOffset;return n.nodeType!==Node.TEXT_NODE&&n.childNodes.length&&(n.childNodes[s]?(n=n.childNodes[s],s=0):(n=n.childNodes[s-1],s=n.textContent.length)),(_.isLineBreakTag(t)||_.isEmpty(t))&&this.getHigherLevelSiblings(n,"left").every(r=>{const l=_.isLineBreakTag(r),a=r.children.length===1&&_.isLineBreakTag(r.children[0]),c=l||a;return _.isEmpty(r)&&!c})&&s===i?!0:t===null||n===t&&s<=i}get isAtEnd(){const e=q.get();let t=e.focusNode;const n=_.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput,!0);if(_.isNativeInput(n))return n.selectionEnd===n.value.length;if(!e.focusNode)return!1;let i=e.focusOffset;if(t.nodeType!==Node.TEXT_NODE&&t.childNodes.length&&(t.childNodes[i-1]?(t=t.childNodes[i-1],i=t.textContent.length):(t=t.childNodes[0],i=0)),_.isLineBreakTag(n)||_.isEmpty(n)){const r=this.getHigherLevelSiblings(t,"right");if(r.every((l,a)=>a===r.length-1&&_.isLineBreakTag(l)||_.isEmpty(l)&&!_.isLineBreakTag(l))&&i===t.textContent.length)return!0}const s=n.textContent.replace(/\s+$/,"");return t===n&&i>=s.length}setToBlock(e,t=this.positions.DEFAULT,n=0){const{BlockManager:i}=this.Editor;let s;switch(t){case this.positions.START:s=e.firstInput;break;case this.positions.END:s=e.lastInput;break;default:s=e.currentInput}if(!s)return;const r=_.getDeepestNode(s,t===this.positions.END),l=_.getContentLength(r);switch(!0){case t===this.positions.START:n=0;break;case t===this.positions.END:case n>l:n=l;break}po(()=>{this.set(r,n)},20)(),i.setCurrentBlockByChildNode(e.holder),i.currentBlock.currentInput=s}setToInput(e,t=this.positions.DEFAULT,n=0){const{currentBlock:i}=this.Editor.BlockManager,s=_.getDeepestNode(e);switch(t){case this.positions.START:this.set(s,0);break;case this.positions.END:this.set(s,_.getContentLength(s));break;default:n&&this.set(s,n)}i.currentInput=e}set(e,t=0){const{top:n,bottom:i}=q.setCursor(e,t),{innerHeight:s}=window;n<0&&window.scrollBy(0,n),i>s&&window.scrollBy(0,i-s)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const t=this.Editor.BlockManager.insertAtEnd();this.setToBlock(t)}}extractFragmentFromCaretPosition(){const e=q.get();if(e.rangeCount){const t=e.getRangeAt(0),n=this.Editor.BlockManager.currentBlock.currentInput;if(t.deleteContents(),n)if(_.isNativeInput(n)){const i=n,s=document.createDocumentFragment(),r=i.value.substring(0,i.selectionStart),l=i.value.substring(i.selectionStart);return s.textContent=l,i.value=r,s}else{const i=t.cloneRange();return i.selectNodeContents(n),i.setStart(t.endContainer,t.endOffset),i.extractContents()}}}navigateNext(){const{BlockManager:e}=this.Editor,{currentBlock:t,nextContentfulBlock:n}=e,{nextInput:i}=t,s=this.isAtEnd;let r=n;if(!r&&!i){if(t.tool.isDefault||!s)return!1;r=e.insertAtEnd()}return s?(i?this.setToInput(i,this.positions.START):this.setToBlock(r,this.positions.START),!0):!1}navigatePrevious(){const{currentBlock:e,previousContentfulBlock:t}=this.Editor.BlockManager;if(!e)return!1;const{previousInput:n}=e;return!t&&!n?!1:this.isAtStart?(n?this.setToInput(n,this.positions.END):this.setToBlock(t,this.positions.END),!0):!1}createShadow(e){const t=document.createElement("span");t.classList.add(wn.CSS.shadowCaret),e.insertAdjacentElement("beforeend",t)}restoreCaret(e){const t=e.querySelector(`.${wn.CSS.shadowCaret}`);if(!t)return;new q().expandToTag(t);const n=document.createRange();n.selectNode(t),n.extractContents()}insertContentAtCaretPosition(e){const t=document.createDocumentFragment(),n=document.createElement("div"),i=q.get(),s=q.range;n.innerHTML=e,Array.from(n.childNodes).forEach(c=>t.appendChild(c)),t.childNodes.length===0&&t.appendChild(new Text);const r=t.lastChild;s.deleteContents(),s.insertNode(t);const l=document.createRange(),a=r.nodeType===Node.TEXT_NODE?r:r.firstChild;a!==null&&a.textContent!==null&&l.setStart(a,a.textContent.length),i.removeAllRanges(),i.addRange(l)}getHigherLevelSiblings(e,t){let n=e;const i=[];for(;n.parentNode&&n.parentNode.contentEditable!=="true";)n=n.parentNode;const s=t==="left"?"previousSibling":"nextSibling";for(;n[s];)n=n[s],i.push(n);return i}}class vh extends oe{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:t,BlockSelection:n}=this.Editor,i=t.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,s=t.getBlockByChildNode(e.target);if(!(!i||!s)&&s!==i){if(i===this.firstSelectedBlock){q.get().removeAllRanges(),i.selected=!0,s.selected=!0,n.clearCache();return}if(s===this.firstSelectedBlock){i.selected=!1,s.selected=!1,n.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(i,s),this.lastSelectedBlock=s}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(e.button!==Qd.LEFT)return;const{BlockManager:t}=this.Editor;this.firstSelectedBlock=t.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:t,BlockSelection:n}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=t.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,n.clearCache(),q.get().removeAllRanges());const i=t.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),s=t.blocks[i];s&&(this.lastSelectedBlock.selected!==s.selected?(s.selected=!0,n.clearCache()):(this.lastSelectedBlock.selected=!1,n.clearCache()),this.lastSelectedBlock=s,this.Editor.InlineToolbar.close(),s.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:t,BlockSelection:n,Caret:i}=this.Editor,s=t.blocks.indexOf(this.firstSelectedBlock),r=t.blocks.indexOf(this.lastSelectedBlock);if(n.anyBlockSelected&&s>-1&&r>-1)if(e&&e instanceof KeyboardEvent)switch(e.keyCode){case Z.DOWN:case Z.RIGHT:i.setToBlock(t.blocks[Math.max(s,r)],i.positions.END);break;case Z.UP:case Z.LEFT:i.setToBlock(t.blocks[Math.min(s,r)],i.positions.START);break;default:i.setToBlock(t.blocks[Math.max(s,r)],i.positions.END)}else i.setToBlock(t.blocks[Math.max(s,r)],i.positions.END);this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:t}=this.Editor;q.isCollapsed||this.Editor.BlockSelection.clearSelection(e),t.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,t){const{BlockManager:n,BlockSelection:i}=this.Editor,s=n.blocks.indexOf(e),r=n.blocks.indexOf(t),l=e.selected!==t.selected;for(let a=Math.min(s,r);a<=Math.max(s,r);a++){const c=n.blocks[a];c!==this.firstSelectedBlock&&c!==(l?e:t)&&(n.blocks[a].selected=!n.blocks[a].selected,i.clearCache())}}}class kh extends oe{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async t=>{await this.processDrop(t)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",t=>{this.processDragOver(t)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:t,Caret:n,Paste:i}=this.Editor;e.preventDefault(),t.blocks.forEach(r=>{r.dropTarget=!1}),q.isAtEditor&&!q.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const s=t.setCurrentBlockByChildNode(e.target);if(s)this.Editor.Caret.setToBlock(s,n.positions.END);else{const r=t.setCurrentBlockByChildNode(t.lastBlock.holder);this.Editor.Caret.setToBlock(r,n.positions.END)}await i.processDataTransfer(e.dataTransfer,!0)}processDragStart(){q.isAtEditor&&!q.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}}class yh extends oe{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver(n=>{this.redactorChanged(n)}),this.eventsDispatcher.on(Gr,n=>{this.particularBlockChanged(n.event)}),this.eventsDispatcher.on(Qr,()=>{this.disable()}),this.eventsDispatcher.on(el,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!he(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let t;this.batchingOnChangeQueue.size===1?t=this.batchingOnChangeQueue.values().next().value:t=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,t),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(pi,{mutations:e})}}const dl=class extends oe{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=o=>{try{const e=o.create({},{},!1);if(o.pasteConfig===!1){this.exceptionList.push(o.name);return}if(!he(e.onPaste))return;this.getTagsConfig(o),this.getFilesConfig(o),this.getPatternsConfig(o)}catch(e){se(`Paste handling for ${o.name} Tool hasn't been set up because of the error`,"warn",e)}},this.handlePasteEvent=async o=>{const{BlockManager:e,Toolbar:t}=this.Editor,n=e.setCurrentBlockByChildNode(o.target);!n||this.isNativeBehaviour(o.target)&&!o.clipboardData.types.includes("Files")||n&&this.exceptionList.includes(n.name)||(o.preventDefault(),this.processDataTransfer(o.clipboardData),e.clearFocused(),t.close())}}async prepare(){this.processTools()}toggleReadOnly(o){o?this.unsetCallback():this.setCallback()}async processDataTransfer(o,e=!1){const{Tools:t}=this.Editor,n=o.types;if((n.includes?n.includes("Files"):n.contains("Files"))&&!st(this.toolsFiles)){await this.processFiles(o.files);return}const i=o.getData(this.MIME_TYPE),s=o.getData("text/plain");let r=o.getData("text/html");if(i)try{this.insertEditorJSData(JSON.parse(i));return}catch{}e&&s.trim()&&r.trim()&&(r="<p>"+(r.trim()?r:s)+"</p>");const l=Object.keys(this.toolsTags).reduce((d,u)=>(d[u.toLowerCase()]=this.toolsTags[u].sanitizationConfig??{},d),{}),a=Object.assign({},l,t.getAllInlineToolsSanitizeConfig(),{br:{}}),c=yt(r,a);!c.trim()||c.trim()===s||!_.isHTMLString(c)?await this.processText(s):await this.processText(c,!0)}async processText(o,e=!1){const{Caret:t,BlockManager:n}=this.Editor,i=e?this.processHTML(o):this.processPlain(o);if(!i.length)return;if(i.length===1){i[0].isBlock?this.processSingleBlock(i.pop()):this.processInlinePaste(i.pop());return}const s=n.currentBlock&&n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty;i.map(async(r,l)=>this.insertBlock(r,l===0&&s)),n.currentBlock&&t.setToBlock(n.currentBlock,t.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const o=this.Editor.Tools.blockTools;Array.from(o.values()).forEach(this.processTool)}collectTagNames(o){return Lt(o)?[o]:_e(o)?Object.keys(o):[]}getTagsConfig(o){if(o.pasteConfig===!1)return;const e=o.pasteConfig.tags||[],t=[];e.forEach(n=>{const i=this.collectTagNames(n);t.push(...i),i.forEach(s=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,s)){se(`Paste handler for ${o.name} Tool on ${s} tag is skipped because it is already used by ${this.toolsTags[s].tool.name} Tool.`,"warn");return}const r=_e(n)?n[s]:null;this.toolsTags[s.toUpperCase()]={tool:o,sanitizationConfig:r}})}),this.tagsByTool[o.name]=t.map(n=>n.toUpperCase())}getFilesConfig(o){if(o.pasteConfig===!1)return;const{files:e={}}=o.pasteConfig;let{extensions:t,mimeTypes:n}=e;!t&&!n||(t&&!Array.isArray(t)&&(se(`extensions property of the onDrop config for ${o.name} Tool should be an array`),t=[]),n&&!Array.isArray(n)&&(se(`mimeTypes property of the onDrop config for ${o.name} Tool should be an array`),n=[]),n&&(n=n.filter(i=>iu(i)?!0:(se(`MIME type value ${i} for the ${o.name} Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[o.name]={extensions:t||[],mimeTypes:n||[]})}getPatternsConfig(o){o.pasteConfig===!1||!o.pasteConfig.patterns||st(o.pasteConfig.patterns)||Object.entries(o.pasteConfig.patterns).forEach(([e,t])=>{t instanceof RegExp||se(`Pattern ${t} for ${o.name} Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:e,pattern:t,tool:o})})}isNativeBehaviour(o){return _.isNativeInput(o)}async processFiles(o){const{BlockManager:e}=this.Editor;let t;t=await Promise.all(Array.from(o).map(i=>this.processFile(i))),t=t.filter(i=>!!i);const n=e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty;t.forEach((i,s)=>{e.paste(i.type,i.event,s===0&&n)})}async processFile(o){const e=nu(o),t=Object.entries(this.toolsFiles).find(([i,{mimeTypes:s,extensions:r}])=>{const[l,a]=o.type.split("/"),c=r.find(u=>u.toLowerCase()===e.toLowerCase()),d=s.find(u=>{const[p,k]=u.split("/");return p===l&&(k===a||k==="*")});return!!c||!!d});if(!t)return;const[n]=t;return{event:this.composePasteEvent("file",{file:o}),type:n}}processHTML(o){const{Tools:e}=this.Editor,t=_.make("DIV");return t.innerHTML=o,this.getNodes(t).map(n=>{let i,s=e.defaultTool,r=!1;switch(n.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:i=_.make("div"),i.appendChild(n);break;case Node.ELEMENT_NODE:i=n,r=!0,this.toolsTags[i.tagName]&&(s=this.toolsTags[i.tagName].tool);break}const{tags:l}=s.pasteConfig||{tags:[]},a=l.reduce((u,p)=>(this.collectTagNames(p).forEach(k=>{const h=_e(p)?p[k]:null;u[k.toLowerCase()]=h||{}}),u),{}),c=Object.assign({},a,s.baseSanitizeConfig);if(i.tagName.toLowerCase()==="table"){const u=yt(i.outerHTML,c);i=_.make("div",void 0,{innerHTML:u}).firstChild}else i.innerHTML=yt(i.innerHTML,c);const d=this.composePasteEvent("tag",{data:i});return{content:i,isBlock:r,tool:s.name,event:d}}).filter(n=>{const i=_.isEmpty(n.content),s=_.isSingleTag(n.content);return!i||s})}processPlain(o){const{defaultBlock:e}=this.config;if(!o)return[];const t=e;return o.split(/\r?\n/).filter(n=>n.trim()).map(n=>{const i=_.make("div");i.textContent=n;const s=this.composePasteEvent("tag",{data:i});return{content:i,tool:t,isBlock:!1,event:s}})}async processSingleBlock(o){const{Caret:e,BlockManager:t}=this.Editor,{currentBlock:n}=t;if(!n||o.tool!==n.name||!_.containsOnlyInlineElements(o.content.innerHTML)){this.insertBlock(o,(n==null?void 0:n.tool.isDefault)&&n.isEmpty);return}e.insertContentAtCaretPosition(o.content.innerHTML)}async processInlinePaste(o){const{BlockManager:e,Caret:t}=this.Editor,{content:n}=o;if(e.currentBlock&&e.currentBlock.tool.isDefault&&n.textContent.length<dl.PATTERN_PROCESSING_MAX_LENGTH){const i=await this.processPattern(n.textContent);if(i){const s=e.currentBlock&&e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty,r=e.paste(i.tool,i.event,s);t.setToBlock(r,t.positions.END);return}}if(e.currentBlock&&e.currentBlock.currentInput){const i=e.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,yt(n.innerHTML,i))}else this.insertBlock(o)}async processPattern(o){const e=this.toolsPatterns.find(t=>{const n=t.pattern.exec(o);return n?o===n.shift():!1});return e?{event:this.composePasteEvent("pattern",{key:e.key,data:o}),tool:e.tool.name}:void 0}insertBlock(o,e=!1){const{BlockManager:t,Caret:n}=this.Editor,{currentBlock:i}=t;let s;if(e&&i&&i.isEmpty){s=t.paste(o.tool,o.event,!0),n.setToBlock(s,n.positions.END);return}s=t.paste(o.tool,o.event),n.setToBlock(s,n.positions.END)}insertEditorJSData(o){const{BlockManager:e,Caret:t,Tools:n}=this.Editor;tl(o,i=>n.blockTools.get(i).sanitizeConfig).forEach(({tool:i,data:s},r)=>{let l=!1;r===0&&(l=e.currentBlock&&e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty);const a=e.insert({tool:i,data:s,replace:l});t.setToBlock(a,t.positions.END)})}processElementNode(o,e,t){const n=Object.keys(this.toolsTags),i=o,{tool:s}=this.toolsTags[i.tagName]||{},r=this.tagsByTool[s==null?void 0:s.name]||[],l=n.includes(i.tagName),a=_.blockElements.includes(i.tagName.toLowerCase()),c=Array.from(i.children).some(({tagName:u})=>n.includes(u)&&!r.includes(u)),d=Array.from(i.children).some(({tagName:u})=>_.blockElements.includes(u.toLowerCase()));if(!a&&!l&&!c)return t.appendChild(i),[...e,t];if(l&&!c||a&&!d&&!c)return[...e,t,i]}getNodes(o){const e=Array.from(o.childNodes);let t;const n=(i,s)=>{if(_.isEmpty(s)&&!_.isSingleTag(s))return i;const r=i[i.length-1];let l=new DocumentFragment;switch(r&&_.isFragment(r)&&(l=i.pop()),s.nodeType){case Node.ELEMENT_NODE:if(t=this.processElementNode(s,i,l),t)return t;break;case Node.TEXT_NODE:return l.appendChild(s),[...i,l];default:return[...i,l]}return[...i,...Array.from(s.childNodes).reduce(n,[])]};return e.reduce(n,[])}composePasteEvent(o,e){return new CustomEvent(o,{detail:e})}};let ul=dl;ul.PATTERN_PROCESSING_MAX_LENGTH=450;class wh extends oe{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:t}=e,n=[];Array.from(t.entries()).forEach(([i,s])=>{s.isReadOnlySupported||n.push(i)}),this.toolsDontSupportReadOnly=n,this.config.readOnly&&n.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly)}async toggle(e=!this.readOnlyEnabled){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const t=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const i in this.Editor)this.Editor[i].toggleReadOnly&&this.Editor[i].toggleReadOnly(e);if(t===e)return this.readOnlyEnabled;const n=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(n.blocks),this.readOnlyEnabled}throwCriticalError(){throw new Jr(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}class Ao extends oe{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,t){const n=document.elementFromPoint(e-window.pageXOffset,t-window.pageYOffset);n.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const i=[`.${ke.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],s=n.closest("."+this.Editor.UI.CSS.editorWrapper),r=i.some(l=>!!n.closest(l));!s||r||(this.mousedown=!0,this.startX=e,this.startY=t)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",t=>{this.processMouseDown(t)},!1),this.listeners.on(document.body,"mousemove",di(t=>{this.processMouseMove(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",di(t=>{this.processScroll(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(e.target.closest(_.allInputsSelector)!==null||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:e}=this.Editor,t=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),n=_.make("div",Ao.CSS.overlay,{}),i=_.make("div",Ao.CSS.overlayContainer,{}),s=_.make("div",Ao.CSS.rect,{});return i.appendChild(s),n.appendChild(i),t.appendChild(n),this.overlayRectangle=s,{container:t,overlay:n}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;const t=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-t,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;e.pageY!==void 0&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:t,leftPos:n,index:i}=this.genInfoForMouseSelection(),s=this.startX>t&&this.mouseX>t,r=this.startX<n&&this.mouseX<n;this.rectCrossesBlocks=!(s||r),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),i!==void 0&&(this.trySelectNextBlock(i),this.inverseSelection(),q.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(t);if(!this.rectCrossesBlocks&&e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(t)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,t=this.mouseY-window.pageYOffset,n=document.elementFromPoint(e,t),i=this.Editor.BlockManager.getBlockByChildNode(n);let s;i!==void 0&&(s=this.Editor.BlockManager.blocks.findIndex(d=>d.holder===i.holder));const r=this.Editor.BlockManager.lastBlock.holder.querySelector("."+ke.CSS.content),l=Number.parseInt(window.getComputedStyle(r).width,10)/2,a=e-l,c=e+l;return{index:s,leftPos:a,rightPos:c}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const t=this.stackOfSelected[this.stackOfSelected.length-1]===e,n=this.stackOfSelected.length,i=1,s=-1,r=0;if(t)return;const l=this.stackOfSelected[n-1]-this.stackOfSelected[n-2]>0;let a=r;n>1&&(a=l?i:s);const c=e>this.stackOfSelected[n-1]&&a===i,d=e<this.stackOfSelected[n-1]&&a===s,u=!(c||d||a===r);if(!u&&(e>this.stackOfSelected[n-1]||this.stackOfSelected[n-1]===void 0)){let h=this.stackOfSelected[n-1]+1||e;for(h;h<=e;h++)this.addBlockInSelection(h);return}if(!u&&e<this.stackOfSelected[n-1]){for(let h=this.stackOfSelected[n-1]-1;h>=e;h--)this.addBlockInSelection(h);return}if(!u)return;let p=n-1,k;for(e>this.stackOfSelected[n-1]?k=()=>e>this.stackOfSelected[p]:k=()=>e<this.stackOfSelected[p];k();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[p]),this.stackOfSelected.pop(),p--}}class xh extends oe{async render(e){return new Promise(t=>{const{Tools:n,BlockManager:i}=this.Editor,s=e.map(({type:r,data:l,tunes:a,id:c})=>{n.available.has(r)===!1&&(et(`Tool ${r} is not found. Check 'tools' property at the Editor.js config.`,"warn"),l=this.composeStubDataForTool(r,l,c),r=n.stubTool);let d;try{d=i.composeBlock({id:c,tool:r,data:l,tunes:a})}catch(u){se(`Block ${r} skipped because of plugins error`,"error",{data:l,error:u}),l=this.composeStubDataForTool(r,l,c),r=n.stubTool,d=i.composeBlock({id:c,tool:r,data:l,tunes:a})}return d});i.insertMany(s),window.requestIdleCallback(()=>{t()},{timeout:2e3})})}composeStubDataForTool(e,t,n){const{Tools:i}=this.Editor;let s=e;if(i.unavailable.has(e)){const r=i.unavailable.get(e).toolbox;r!==void 0&&r[0].title!==void 0&&(s=r[0].title)}return{savedData:{id:n,type:e,data:t},title:s}}}class Ch extends oe{async save(){const{BlockManager:e,Tools:t}=this.Editor,n=e.blocks,i=[];try{n.forEach(l=>{i.push(this.getSavedData(l))});const s=await Promise.all(i),r=await tl(s,l=>t.blockTools.get(l).sanitizeConfig);return this.makeOutput(r)}catch(s){et("Saving failed due to the Error %o","error",s)}}async getSavedData(e){const t=await e.save(),n=t&&await e.validate(t.data);return{...t,isValid:n}}makeOutput(e){const t=[];return e.forEach(({id:n,tool:i,data:s,tunes:r,isValid:l})=>{if(!l){se(`Block ${i} skipped because saved data is invalid`);return}if(i===this.Editor.Tools.stubTool){t.push(s);return}const a={id:n,type:i,data:s,...!st(r)&&{tunes:r}};t.push(a)}),{time:+new Date,blocks:t,version:"2.28.2"}}}var vi={},Eh={get exports(){return vi},set exports(o){vi=o}};(function(o,e){(function(t,n){o.exports=n()})(window,function(){return function(t){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=n,i.d=function(s,r,l){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var a in s)i.d(l,a,(function(c){return s[c]}).bind(null,a));return l},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="/",i(i.s=4)}([function(t,n,i){var s=i(1),r=i(2);typeof(r=r.__esModule?r.default:r)=="string"&&(r=[[t.i,r,""]]);var l={insert:"head",singleton:!1};s(r,l),t.exports=r.locals||{}},function(t,n,i){var s,r=function(){return s===void 0&&(s=!!(window&&document&&document.all&&!window.atob)),s},l=function(){var y={};return function(v){if(y[v]===void 0){var B=document.querySelector(v);if(window.HTMLIFrameElement&&B instanceof window.HTMLIFrameElement)try{B=B.contentDocument.head}catch{B=null}y[v]=B}return y[v]}}(),a=[];function c(y){for(var v=-1,B=0;B<a.length;B++)if(a[B].identifier===y){v=B;break}return v}function d(y,v){for(var B={},I=[],O=0;O<y.length;O++){var m=y[O],f=v.base?m[0]+v.base:m[0],w=B[f]||0,x="".concat(f," ").concat(w);B[f]=w+1;var A=c(x),M={css:m[1],media:m[2],sourceMap:m[3]};A!==-1?(a[A].references++,a[A].updater(M)):a.push({identifier:x,updater:T(M,v),references:1}),I.push(x)}return I}function u(y){var v=document.createElement("style"),B=y.attributes||{};if(B.nonce===void 0){var I=i.nc;I&&(B.nonce=I)}if(Object.keys(B).forEach(function(m){v.setAttribute(m,B[m])}),typeof y.insert=="function")y.insert(v);else{var O=l(y.insert||"head");if(!O)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");O.appendChild(v)}return v}var p,k=(p=[],function(y,v){return p[y]=v,p.filter(Boolean).join(`
`)});function h(y,v,B,I){var O=B?"":I.media?"@media ".concat(I.media," {").concat(I.css,"}"):I.css;if(y.styleSheet)y.styleSheet.cssText=k(v,O);else{var m=document.createTextNode(O),f=y.childNodes;f[v]&&y.removeChild(f[v]),f.length?y.insertBefore(m,f[v]):y.appendChild(m)}}function S(y,v,B){var I=B.css,O=B.media,m=B.sourceMap;if(O?y.setAttribute("media",O):y.removeAttribute("media"),m&&btoa&&(I+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(m))))," */")),y.styleSheet)y.styleSheet.cssText=I;else{for(;y.firstChild;)y.removeChild(y.firstChild);y.appendChild(document.createTextNode(I))}}var b=null,E=0;function T(y,v){var B,I,O;if(v.singleton){var m=E++;B=b||(b=u(v)),I=h.bind(null,B,m,!1),O=h.bind(null,B,m,!0)}else B=u(v),I=S.bind(null,B,v),O=function(){(function(f){if(f.parentNode===null)return!1;f.parentNode.removeChild(f)})(B)};return I(y),function(f){if(f){if(f.css===y.css&&f.media===y.media&&f.sourceMap===y.sourceMap)return;I(y=f)}else O()}}t.exports=function(y,v){(v=v||{}).singleton||typeof v.singleton=="boolean"||(v.singleton=r());var B=d(y=y||[],v);return function(I){if(I=I||[],Object.prototype.toString.call(I)==="[object Array]"){for(var O=0;O<B.length;O++){var m=c(B[O]);a[m].references--}for(var f=d(I,v),w=0;w<B.length;w++){var x=c(B[w]);a[x].references===0&&(a[x].updater(),a.splice(x,1))}B=f}}}},function(t,n,i){(n=i(3)(!1)).push([t.i,`.ce-paragraph {
    line-height: 1.6em;
    outline: none;
}

.ce-paragraph[data-placeholder]:empty::before{
  content: attr(data-placeholder);
  color: #707684;
  font-weight: normal;
  opacity: 0;
}

/** Show placeholder at the first paragraph if Editor is empty */
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {
  opacity: 1;
}

.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {
  opacity: 0;
}

.ce-paragraph p:first-of-type{
    margin-top: 0;
}

.ce-paragraph p:last-of-type{
    margin-bottom: 0;
}
`,""]),t.exports=n},function(t,n,i){t.exports=function(s){var r=[];return r.toString=function(){return this.map(function(l){var a=function(c,d){var u=c[1]||"",p=c[3];if(!p)return u;if(d&&typeof btoa=="function"){var k=(S=p,b=btoa(unescape(encodeURIComponent(JSON.stringify(S)))),E="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(b),"/*# ".concat(E," */")),h=p.sources.map(function(T){return"/*# sourceURL=".concat(p.sourceRoot||"").concat(T," */")});return[u].concat(h).concat([k]).join(`
`)}var S,b,E;return[u].join(`
`)}(l,s);return l[2]?"@media ".concat(l[2]," {").concat(a,"}"):a}).join("")},r.i=function(l,a,c){typeof l=="string"&&(l=[[null,l,""]]);var d={};if(c)for(var u=0;u<this.length;u++){var p=this[u][0];p!=null&&(d[p]=!0)}for(var k=0;k<l.length;k++){var h=[].concat(l[k]);c&&d[h[0]]||(a&&(h[2]?h[2]="".concat(a," and ").concat(h[2]):h[2]=a),r.push(h))}},r}},function(t,n,i){i.r(n),i.d(n,"default",function(){return l}),i(0);function s(a,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r(a,c,d){return c&&s(a.prototype,c),d&&s(a,d),a}/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */var l=function(){function a(c){var d=c.data,u=c.config,p=c.api,k=c.readOnly;(function(h,S){if(!(h instanceof S))throw new TypeError("Cannot call a class as a function")})(this,a),this.api=p,this.readOnly=k,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=u.placeholder?u.placeholder:a.DEFAULT_PLACEHOLDER,this._data={},this._element=null,this._preserveBlank=u.preserveBlank!==void 0&&u.preserveBlank,this.data=d}return r(a,null,[{key:"DEFAULT_PLACEHOLDER",get:function(){return""}}]),r(a,[{key:"onKeyUp",value:function(c){c.code!=="Backspace"&&c.code!=="Delete"||this._element.textContent===""&&(this._element.innerHTML="")}},{key:"drawView",value:function(){var c=document.createElement("DIV");return c.classList.add(this._CSS.wrapper,this._CSS.block),c.contentEditable=!1,c.dataset.placeholder=this.api.i18n.t(this._placeholder),this.readOnly||(c.contentEditable=!0,c.addEventListener("keyup",this.onKeyUp)),c}},{key:"render",value:function(){return this._element===null&&(this._element=this.drawView()),this.hydrate(),this._element}},{key:"merge",value:function(c){var d={text:this.data.text+c.text};this.data=d}},{key:"validate",value:function(c){return!(c.text.trim()===""&&!this._preserveBlank)}},{key:"save",value:function(c){return{text:c.innerHTML}}},{key:"onPaste",value:function(c){var d={text:c.detail.data.innerHTML};this.data=d}},{key:"hydrate",value:function(){var c=this;window.requestAnimationFrame(function(){c._element.innerHTML=c._data.text||""})}},{key:"data",get:function(){if(this._element!==null){var c=this._element.innerHTML;this._data.text=c}return this._data},set:function(c){this._data=c||{},this._element!==null&&this.hydrate()}}],[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{text:{br:!0}}}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"pasteConfig",get:function(){return{tags:["P"]}}},{key:"toolbox",get:function(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}]),a}()}]).default})})(Eh);const Sh=Rn(vi);class Qi{constructor(){this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}static get sanitize(){return{b:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=qu,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+B"}}Qi.isInline=!0;Qi.title="Bold";class es{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Zu,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}es.isInline=!0;es.title="Italic";class ts{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new q}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Ws,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const t=this.selection.findParentTag("A");if(t){this.selection.expandToTag(t),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML=eh,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const t=e.getAttribute("href");this.nodes.input.value=t!=="null"?t:"",this.selection.save()}else this.nodes.button.innerHTML=Ws,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const t=new q;t.save(),this.selection.restore(),this.selection.removeFakeBackground(),t.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let t=this.nodes.input.value||"";if(!t.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(t)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),se("Incorrect Link pasted","warn",t);return}t=this.prepareLink(t),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(t),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e),e}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const t=/^\/[^/\s]/.test(e),n=e.substring(0,1)==="#",i=/^\/\/[^/\s]/.test(e);return!t&&!n&&!i&&(e="http://"+e),e}insertLink(e){const t=this.selection.findParentTag("A");t&&this.selection.expandToTag(t),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}ts.isInline=!0;ts.title="Link";class hl{constructor({data:e,api:t}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=t,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=_.make("div",this.CSS.wrapper),t=th,n=_.make("div",this.CSS.info),i=_.make("div",this.CSS.title,{textContent:this.title}),s=_.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML=t,n.appendChild(i),n.appendChild(s),e.appendChild(n),e}}hl.isReadOnlySupported=!0;class Th extends Gi{constructor(){super(...arguments),this.type=Dn.Inline}get title(){return this.constructable[Ji.Title]}create(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}class Bh extends Gi{constructor(){super(...arguments),this.type=Dn.Tune}create(e,t){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:t,data:e})}}class Oe extends Map{get blockTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isBlock());return new Oe(e)}get inlineTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInline());return new Oe(e)}get blockTunes(){const e=Array.from(this.entries()).filter(([,t])=>t.isTune());return new Oe(e)}get internalTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInternal);return new Oe(e)}get externalTools(){const e=Array.from(this.entries()).filter(([,t])=>!t.isInternal);return new Oe(e)}}var _h=Object.defineProperty,Ih=Object.getOwnPropertyDescriptor,pl=(o,e,t,n)=>{for(var i=n>1?void 0:n?Ih(e,t):e,s=o.length-1,r;s>=0;s--)(r=o[s])&&(i=(n?r(e,t,i):r(i))||i);return n&&i&&_h(e,t,i),i};class os extends Gi{constructor(){super(...arguments),this.type=Dn.Block,this.inlineTools=new Oe,this.tunes=new Oe}create(e,t,n){return new this.constructable({data:e,block:t,readOnly:n,api:this.api.getMethodsForTool(this),config:this.settings})}get isReadOnlySupported(){return this.constructable[Vt.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[Vt.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[Vt.Toolbox],t=this.config[hn.Toolbox];if(!st(e)&&t!==!1)return t?Array.isArray(e)?Array.isArray(t)?t.map((n,i)=>{const s=e[i];return s?{...s,...n}:n}):[t]:Array.isArray(t)?t:[{...e,...t}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[Vt.ConversionConfig]}get enabledInlineTools(){return this.config[hn.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[hn.EnabledBlockTunes]}get pasteConfig(){return this.constructable[Vt.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,t=this.baseSanitizeConfig;if(st(e))return t;const n={};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];_e(s)?n[i]=Object.assign({},t,s):n[i]=s}return n}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),Array.from(this.tunes.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),e}}pl([ko],os.prototype,"sanitizeConfig",1);pl([ko],os.prototype,"baseSanitizeConfig",1);class Mh{constructor(e,t,n){this.api=n,this.config=e,this.editorConfig=t}get(e){const{class:t,isInternal:n=!1,...i}=this.config[e],s=this.getConstructor(t);return new s({name:e,constructable:t,config:i,api:this.api,isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:n})}getConstructor(e){switch(!0){case e[Ji.IsInline]:return Th;case e[cl.IsTune]:return Bh;default:return os}}}class fl{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:nl,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e+1);if(!t)throw new Error("Unable to move Block down since it is already the last");const n=t.holder,i=n.getBoundingClientRect();let s=Math.abs(window.innerHeight-n.offsetHeight);i.top<window.innerHeight&&(s=window.scrollY+n.offsetHeight),window.scrollTo(0,s),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}}fl.isTune=!0;class gl{constructor({api:e}){this.api=e}render(){return{icon:Xu,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}gl.isTune=!0;class ml{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:Yu,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e),n=this.api.blocks.getBlockByIndex(e-1);if(e===0||!t||!n)throw new Error("Unable to move Block up since it is already the first");const i=t.holder,s=n.holder,r=i.getBoundingClientRect(),l=s.getBoundingClientRect();let a;l.top>0?a=Math.abs(r.top)-Math.abs(l.top):a=Math.abs(r.top)+l.height,window.scrollBy(0,-1*a),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}}ml.isTune=!0;var Oh=Object.defineProperty,Ah=Object.getOwnPropertyDescriptor,Lh=(o,e,t,n)=>{for(var i=n>1?void 0:n?Ah(e,t):e,s=o.length-1,r;s>=0;s--)(r=o[s])&&(i=(n?r(e,t,i):r(i))||i);return n&&i&&Oh(e,t,i),i};class bl extends oe{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new Oe,this.toolsUnavailable=new Oe}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=ui({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new Mh(e,this.config,this.Editor.API);const t=this.getListOfPrepareFunctions(e);if(t.length===0)return Promise.resolve();await ou(t,n=>{this.toolPrepareMethodSuccess(n)},n=>{this.toolPrepareMethodFallback(n)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>{Object.assign(e,t.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{he(e.reset)&&await e.reset()})}get internalTools(){return{bold:{class:Qi,isInternal:!0},italic:{class:es,isInternal:!0},link:{class:ts,isInternal:!0},paragraph:{class:Sh,inlineToolbar:!0,isInternal:!0},stub:{class:hl,isInternal:!0},moveUp:{class:ml,isInternal:!0},delete:{class:gl,isInternal:!0},moveDown:{class:fl,isInternal:!0}}}toolPrepareMethodSuccess(e){const t=this.factory.get(e.toolName);if(t.isInline()){const n=["render","surround","checkState"].filter(i=>!t.create()[i]);if(n.length){se(`Incorrect Inline Tool: ${t.name}. Some of required methods is not implemented %o`,"warn",n),this.toolsUnavailable.set(t.name,t);return}}this.toolsAvailable.set(t.name,t)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const t=[];return Object.entries(e).forEach(([n,i])=>{t.push({function:he(i.class.prepare)?i.class.prepare:()=>{},data:{toolName:n,config:i.config}})}),t}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(this.config.inlineToolbar!==!1){if(e.enabledInlineTools===!0){e.inlineTools=new Oe(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(t=>[t,this.inlineTools.get(t)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new Oe(e.enabledInlineTools.map(t=>[t,this.inlineTools.get(t)])))}}assignBlockTunesToBlockTool(e){if(e.enabledBlockTunes!==!1){if(Array.isArray(e.enabledBlockTunes)){const t=new Oe(e.enabledBlockTunes.map(n=>[n,this.blockTunes.get(n)]));e.tunes=new Oe([...t,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const t=new Oe(this.config.tunes.map(n=>[n,this.blockTunes.get(n)]));e.tunes=new Oe([...t,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const t=this.config.tools[e];if(!he(t)&&!he(t.class))throw Error(`Tool ${e} must be a constructor function or an object with function in the class property`)}}prepareConfig(){const e={};for(const t in this.config.tools)_e(this.config.tools[t])?e[t]=this.config.tools[t]:e[t]={class:this.config.tools[t]};return e}}Lh([ko],bl.prototype,"getAllInlineToolsSanitizeConfig",1);const Nh=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;-webkit-transform:translateX(-50%) translateY(8px) scale(.94);transform:translate(-50%) translateY(8px) scale(.94);opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease,-webkit-transform .15s ease;transition:opacity .25s ease,-webkit-transform .15s ease;transition:transform .15s ease,opacity .25s ease;transition:transform .15s ease,opacity .25s ease,-webkit-transform .15s ease;will-change:transform,opacity;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:translateX(-50%);transform:translate(-50%)}.ce-inline-toolbar--left-oriented{-webkit-transform:translateX(-23px) translateY(8px) scale(.94);transform:translate(-23px) translateY(8px) scale(.94)}.ce-inline-toolbar--left-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-23px);transform:translate(-23px)}.ce-inline-toolbar--right-oriented{-webkit-transform:translateX(-100%) translateY(8px) scale(.94);transform:translate(-100%) translateY(8px) scale(.94);margin-left:23px}.ce-inline-toolbar--right-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-100%);transform:translate(-100%)}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@media (min-width: 651px){.codex-editor--narrow .ce-block--focused{margin-right:-50px;padding-right:50px}}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}
`;class Rh extends oe{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=su(()=>{this.windowResize()},200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${ke.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.checkIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:t,InlineToolbar:n,ConversionToolbar:i}=this.Editor;return t.opened||n.opened||i.opened||e.toolbox.opened}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([e,t])=>t.flipper instanceof xt).some(([e,t])=>t.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:e,BlockSettings:t,InlineToolbar:n,ConversionToolbar:i}=this.Editor;t.close(),n.close(),i.close(),e.toolbox.close()}checkIsMobile(){this.isMobile=window.innerWidth<Vr}make(){this.nodes.holder=_.getHolder(this.config.holder),this.nodes.wrapper=_.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=_.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const e="editor-js-styles";if(_.get(e))return;const t=_.make("style",null,{id:e,textContent:Nh.toString()});_.prepend(document.head,t)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",e=>{this.redactorClicked(e)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",e=>{this.documentTouched(e)},!0),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",e=>{this.documentTouched(e)},!0),this.readOnlyMutableListeners.on(document,"keydown",e=>{this.documentKeydown(e)},!0),this.readOnlyMutableListeners.on(document,"mousedown",e=>{this.documentClicked(e)},!0),this.readOnlyMutableListeners.on(document,"selectionchange",()=>{this.selectionChanged()},!0),this.readOnlyMutableListeners.on(window,"resize",()=>{this.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",di(t=>{const n=t.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||n&&e!==n&&(e=n,this.eventsDispatcher.emit(ll,{block:this.Editor.BlockManager.getBlockByChildNode(n)}))},20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.checkIsMobile()}documentKeydown(e){switch(e.keyCode){case Z.ENTER:this.enterPressed(e);break;case Z.BACKSPACE:case Z.DELETE:this.backspacePressed(e);break;case Z.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e);break}}defaultBehaviour(e){const{currentBlock:t}=this.Editor.BlockManager,n=e.target.closest(`.${this.CSS.editorWrapper}`),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(t!==void 0&&n===null){this.Editor.BlockEvents.keydown(e);return}n||t&&i||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close())}backspacePressed(e){const{BlockManager:t,BlockSelection:n,Caret:i}=this.Editor;if(n.anyBlockSelected&&!q.isSelectionExists){const s=t.removeSelectedBlocks();i.setToBlock(t.insertDefaultBlockAtIndex(s,!0),i.positions.START),n.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:t,BlockSelection:n}=this.Editor,i=t.currentBlockIndex>=0;if(n.anyBlockSelected&&!q.isSelectionExists){n.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&i&&e.target.tagName==="BODY"){const s=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(s),this.Editor.BlockManager.highlightCurrentNode(),this.Editor.Toolbar.moveAndOpen(s)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){if(!e.isTrusted)return;const t=e.target;this.nodes.holder.contains(t)||q.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());const n=this.Editor.BlockSettings.nodes.wrapper.contains(t),i=this.Editor.Toolbar.nodes.settingsToggler.contains(t),s=n||i;if(this.Editor.BlockSettings.opened&&!s){this.Editor.BlockSettings.close();const r=this.Editor.BlockManager.getBlockByChildNode(t);this.Editor.Toolbar.moveAndOpen(r)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let t=e.target;if(t===this.nodes.redactor){const n=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;t=document.elementFromPoint(n,i)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(t),this.Editor.BlockManager.highlightCurrentNode()}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){const{BlockSelection:t}=this.Editor;if(!q.isCollapsed)return;const n=()=>{e.stopImmediatePropagation(),e.stopPropagation()},i=e.target,s=e.metaKey||e.ctrlKey;if(_.isAnchor(i)&&s){n();const c=i.getAttribute("href"),d=lu(c);cu(d);return}const r=this.Editor.BlockManager.getBlockByIndex(-1),l=_.offset(r.holder).bottom,a=e.pageY;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!t.anyBlockSelected&&l<a){n();const{BlockManager:c,Caret:d,Toolbar:u}=this.Editor;(!c.lastBlock.tool.isDefault||!c.lastBlock.isEmpty)&&c.insertAtEnd(),d.setToTheLastBlock(),u.moveAndOpen(c.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:t}=this.Editor,n=q.anchorElement;if(e.isCrossBlockSelectionStarted&&t.anyBlockSelected&&q.get().removeAllRanges(),!n){q.range||this.Editor.InlineToolbar.close();return}const i=n.closest(`.${ke.CSS.content}`)===null;if(i&&(this.Editor.InlineToolbar.containsNode(n)||this.Editor.InlineToolbar.close(),n.dataset.inlineToolbar!=="true"))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(n);const s=i!==!0;this.Editor.InlineToolbar.tryToShow(!0,s)}}const Ph={BlocksAPI:ku,CaretAPI:yu,EventsAPI:wu,I18nAPI:qi,API:xu,InlineToolbarAPI:Cu,ListenersAPI:Eu,NotifierAPI:_u,ReadOnlyAPI:Iu,SanitizerAPI:Pu,SaverAPI:Du,SelectionAPI:Fu,StylesAPI:Hu,ToolbarAPI:ju,TooltipAPI:zu,UiAPI:Wu,BlockSettings:sh,ConversionToolbar:je,Toolbar:uh,InlineToolbar:hh,BlockEvents:ph,BlockManager:mh,BlockSelection:bh,Caret:wn,CrossBlockSelection:vh,DragNDrop:kh,ModificationsObserver:yh,Paste:ul,ReadOnly:wh,RectangleSelection:Ao,Renderer:xh,Saver:Ch,Tools:bl,UI:Rh};class Dh{constructor(e){this.moduleInstances={},this.eventsDispatcher=new Pn;let t,n;this.isReady=new Promise((i,s)=>{t=i,n=s}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:i,Caret:s,UI:r,ModificationsObserver:l}=this.moduleInstances;r.checkEmptiness(),l.enable(),this.configuration.autofocus&&(s.setToBlock(i.blocks[0],s.positions.START),i.highlightCurrentNode()),t()}).catch(i=>{se(`Editor.js is not ready because of ${i}`,"error"),n(i)})}set configuration(e){var t,n;_e(e)?this.config={...e}:this.config={holder:e},hi(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=qr.VERBOSE),eu(this.config.logLevel),hi(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const i={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(st(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[i]}),this.config.readOnly=this.config.readOnly||!1,(t=this.config.i18n)!=null&&t.messages&&De.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((n=this.config.i18n)==null?void 0:n.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:t}=this.config;if(e&&t)throw Error("holderId and holder param can't assign at the same time.");if(Lt(t)&&!_.get(t))throw Error(`element with ID ${t} is missing. Pass correct holder's ID.`);if(t&&_e(t)&&!_.isElement(t))throw Error("holder value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((e,t)=>e.then(async()=>{try{await this.moduleInstances[t].prepare()}catch(n){if(n instanceof Jr)throw new Error(n.message);se(`Module ${t} was skipped because of %o`,"warn",n)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(Ph).forEach(([e,t])=>{try{this.moduleInstances[e]=new t({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(n){se("[constructModules]",`Module ${e} skipped because`,"error",n)}})}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const t={};for(const n in this.moduleInstances)n!==e&&(t[n]=this.moduleInstances[n]);return t}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class Fh{static get version(){return"2.28.2"}constructor(e){let t=()=>{};_e(e)&&he(e.onReady)&&(t=e.onReady);const n=new Dh(e);this.isReady=n.isReady.then(()=>{this.exportAPI(n),t()})}exportAPI(e){const t=["configuration"],n=()=>{Object.values(e.moduleInstances).forEach(i=>{he(i.destroy)&&i.destroy(),i.listeners.removeAll()}),e=null;for(const i in this)Object.prototype.hasOwnProperty.call(this,i)&&delete this[i];Object.setPrototypeOf(this,null)};t.forEach(i=>{this[i]=e[i]}),this.destroy=n,Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([i,s])=>{Object.entries(s).forEach(([r,l])=>{this[l]=e.moduleInstances.API.methods[i][r]})})}}function Fn(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var vl={exports:{}};(function(o,e){(function(t,n){o.exports=n()})(self,function(){return(()=>{var t={384:(r,l,a)=>{a.d(l,{Z:()=>u});var c=a(645),d=a.n(c)()(function(p){return p[1]});d.push([r.id,`.cdx-nested-list {
  margin: 0;
  padding: 0;
  outline: none;
  counter-reset: item;
  list-style: none;
}

  .cdx-nested-list__item {
    line-height: 1.6em;
    display: flex;
    margin: 2px 0;
  }

  .cdx-nested-list__item [contenteditable]{
      outline: none;
    }

  .cdx-nested-list__item-body {
      flex-grow: 2;
    }

  .cdx-nested-list__item-content,
    .cdx-nested-list__item-children {
      flex-basis: 100%;
    }

  .cdx-nested-list__item-content {
      word-break: break-word;
      white-space: pre-wrap;
    }

  .cdx-nested-list__item-children {}

  .cdx-nested-list__item::before {
      counter-increment: item;
      margin-right: 5px;
      white-space: nowrap;
    }

  .cdx-nested-list--ordered > .cdx-nested-list__item::before {
    content: counters(item, ".") ". ";
  }

  .cdx-nested-list--unordered > .cdx-nested-list__item::before {
    content: "";
  }

  .cdx-nested-list__settings {
    display: flex;
  }

  .cdx-nested-list__settings .cdx-settings-button {
      width: 50%;
    }
`,""]);const u=d},645:r=>{r.exports=function(l){var a=[];return a.toString=function(){return this.map(function(c){var d=l(c);return c[2]?"@media ".concat(c[2]," {").concat(d,"}"):d}).join("")},a.i=function(c,d,u){typeof c=="string"&&(c=[[null,c,""]]);var p={};if(u)for(var k=0;k<this.length;k++){var h=this[k][0];h!=null&&(p[h]=!0)}for(var S=0;S<c.length;S++){var b=[].concat(c[S]);u&&p[b[0]]||(d&&(b[2]?b[2]="".concat(d," and ").concat(b[2]):b[2]=d),a.push(b))}},a}},379:(r,l,a)=>{var c,d=function(){var I={};return function(O){if(I[O]===void 0){var m=document.querySelector(O);if(window.HTMLIFrameElement&&m instanceof window.HTMLIFrameElement)try{m=m.contentDocument.head}catch{m=null}I[O]=m}return I[O]}}(),u=[];function p(I){for(var O=-1,m=0;m<u.length;m++)if(u[m].identifier===I){O=m;break}return O}function k(I,O){for(var m={},f=[],w=0;w<I.length;w++){var x=I[w],A=O.base?x[0]+O.base:x[0],M=m[A]||0,H="".concat(A," ").concat(M);m[A]=M+1;var L=p(H),W={css:x[1],media:x[2],sourceMap:x[3]};L!==-1?(u[L].references++,u[L].updater(W)):u.push({identifier:H,updater:B(W,O),references:1}),f.push(H)}return f}function h(I){var O=document.createElement("style"),m=I.attributes||{};if(m.nonce===void 0){var f=a.nc;f&&(m.nonce=f)}if(Object.keys(m).forEach(function(x){O.setAttribute(x,m[x])}),typeof I.insert=="function")I.insert(O);else{var w=d(I.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(O)}return O}var S,b=(S=[],function(I,O){return S[I]=O,S.filter(Boolean).join(`
`)});function E(I,O,m,f){var w=m?"":f.media?"@media ".concat(f.media," {").concat(f.css,"}"):f.css;if(I.styleSheet)I.styleSheet.cssText=b(O,w);else{var x=document.createTextNode(w),A=I.childNodes;A[O]&&I.removeChild(A[O]),A.length?I.insertBefore(x,A[O]):I.appendChild(x)}}function T(I,O,m){var f=m.css,w=m.media,x=m.sourceMap;if(w?I.setAttribute("media",w):I.removeAttribute("media"),x&&typeof btoa<"u"&&(f+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(x))))," */")),I.styleSheet)I.styleSheet.cssText=f;else{for(;I.firstChild;)I.removeChild(I.firstChild);I.appendChild(document.createTextNode(f))}}var y=null,v=0;function B(I,O){var m,f,w;if(O.singleton){var x=v++;m=y||(y=h(O)),f=E.bind(null,m,x,!1),w=E.bind(null,m,x,!0)}else m=h(O),f=T.bind(null,m,O),w=function(){(function(A){if(A.parentNode===null)return!1;A.parentNode.removeChild(A)})(m)};return f(I),function(A){if(A){if(A.css===I.css&&A.media===I.media&&A.sourceMap===I.sourceMap)return;f(I=A)}else w()}}r.exports=function(I,O){(O=O||{}).singleton||typeof O.singleton=="boolean"||(O.singleton=(c===void 0&&(c=!!(window&&document&&document.all&&!window.atob)),c));var m=k(I=I||[],O);return function(f){if(f=f||[],Object.prototype.toString.call(f)==="[object Array]"){for(var w=0;w<m.length;w++){var x=p(m[w]);u[x].references--}for(var A=k(f,O),M=0;M<m.length;M++){var H=p(m[M]);u[H].references===0&&(u[H].updater(),u.splice(H,1))}m=A}}}}},n={};function i(r){var l=n[r];if(l!==void 0)return l.exports;var a=n[r]={id:r,exports:{}};return t[r](a,a.exports,i),a.exports}i.n=r=>{var l=r&&r.__esModule?()=>r.default:()=>r;return i.d(l,{a:l}),l},i.d=(r,l)=>{for(var a in l)i.o(l,a)&&!i.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:l[a]})},i.o=(r,l)=>Object.prototype.hasOwnProperty.call(r,l);var s={};return(()=>{function r(S,b=null,E={}){const T=document.createElement(S);Array.isArray(b)?T.classList.add(...b):b&&T.classList.add(b);for(const y in E)T[y]=E[y];return T}function l(S){const b=r("div");return b.appendChild(S),b.innerHTML}function a(S){let b;return S.nodeType!==Node.ELEMENT_NODE?b=S.textContent:(b=S.innerHTML,b=b.replaceAll("<br>","")),b.trim().length===0}i.d(s,{default:()=>h});class c{constructor(){this.savedFakeCaret=void 0}save(){const b=c.range,E=r("span");E.hidden=!0,b.insertNode(E),this.savedFakeCaret=E}restore(){if(!this.savedFakeCaret)return;const b=window.getSelection(),E=new Range;E.setStartAfter(this.savedFakeCaret),E.setEndAfter(this.savedFakeCaret),b.removeAllRanges(),b.addRange(E),setTimeout(()=>{this.savedFakeCaret.remove()},150)}static get range(){const b=window.getSelection();return b&&b.rangeCount?b.getRangeAt(0):null}static extractFragmentFromCaretPositionTillTheEnd(){const b=window.getSelection();if(!b.rangeCount)return;const E=b.getRangeAt(0);let T=E.startContainer;T.nodeType!==Node.ELEMENT_NODE&&(T=T.parentNode);const y=T.closest("[contenteditable]");E.deleteContents();const v=E.cloneRange();return v.selectNodeContents(y),v.setStart(E.endContainer,E.endOffset),v.extractContents()}static focus(b,E=!0){const T=document.createRange(),y=window.getSelection();T.selectNodeContents(b),T.collapse(E),y.removeAllRanges(),y.addRange(T)}static isAtStart(){const b=window.getSelection();if(b.focusOffset>0)return!1;const E=b.focusNode;return c.getHigherLevelSiblings(E,"left").every(T=>a(T))}static getHigherLevelSiblings(b,E="left"){let T=b;const y=[];for(;T.parentNode&&T.parentNode.contentEditable!=="true";)T=T.parentNode;const v=E==="left"?"previousSibling":"nextSibling";for(;T[v];)T=T[v],y.push(T);return y}}const d='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>';var u=i(379),p=i.n(u),k=i(384);p()(k.Z,{insert:"head",singleton:!1}),k.Z.locals;class h{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:d,title:"List"}}constructor({data:b,config:E,api:T,readOnly:y}){this.nodes={wrapper:null},this.api=T,this.readOnly=y,this.config=E,this.defaultListStyle=this.config.defaultStyle==="ordered"?"ordered":"unordered";const v={style:this.defaultListStyle,items:[]};this.data=b&&Object.keys(b).length?b:v,this.caret=new c}render(){return this.nodes.wrapper=this.makeListWrapper(this.data.style,[this.CSS.baseBlock]),this.data.items.length?this.appendItems(this.data.items,this.nodes.wrapper):this.appendItems([{content:"",items:[]}],this.nodes.wrapper),this.readOnly||this.nodes.wrapper.addEventListener("keydown",b=>{switch(b.key){case"Enter":this.enterPressed(b);break;case"Backspace":this.backspace(b);break;case"Tab":b.shiftKey?this.shiftTab(b):this.addTab(b)}},!1),this.nodes.wrapper}renderSettings(){return[{name:"unordered",label:this.api.i18n.t("Unordered"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>'},{name:"ordered",label:this.api.i18n.t("Ordered"),icon:d}].map(b=>({name:b.name,icon:b.icon,label:b.label,isActive:this.data.style===b.name,closeOnActivate:!0,onActivate:()=>{this.listStyle=b.name}}))}static get pasteConfig(){return{tags:["OL","UL","LI"]}}onPaste(b){const E=b.detail.data;this.data=this.pasteHandler(E);const T=this.nodes.wrapper;T&&T.parentNode.replaceChild(this.render(),T)}pasteHandler(b){const{tagName:E}=b;let T,y;switch(E){case"OL":T="ordered",y="ol";break;case"UL":case"LI":T="unordered",y="ul"}const v={style:T,items:[]},B=I=>Array.from(I.querySelectorAll(":scope > li")).map(O=>{var w;const m=O.querySelector(`:scope > ${y}`),f=m?B(m):[];return{content:((w=O==null?void 0:O.firstChild)==null?void 0:w.textContent)||"",items:f}});return v.items=B(b),v}appendItems(b,E){b.forEach(T=>{const y=this.createItem(T.content,T.items);E.appendChild(y)})}createItem(b,E=[]){const T=r("li",this.CSS.item),y=r("div",this.CSS.itemBody),v=r("div",this.CSS.itemContent,{innerHTML:b,contentEditable:!this.readOnly});return y.appendChild(v),T.appendChild(y),E&&E.length>0&&this.addChildrenList(T,E),T}save(){const b=E=>Array.from(E.querySelectorAll(`:scope > .${this.CSS.item}`)).map(T=>{const y=T.querySelector(`.${this.CSS.itemChildren}`);return{content:this.getItemContent(T),items:y?b(y):[]}});return{style:this.data.style,items:b(this.nodes.wrapper)}}addChildrenList(b,E){const T=b.querySelector(`.${this.CSS.itemBody}`),y=this.makeListWrapper(void 0,[this.CSS.itemChildren]);this.appendItems(E,y),T.appendChild(y)}makeListWrapper(b=this.listStyle,E=[]){const T=b==="ordered"?"ol":"ul",y=b==="ordered"?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered;return E.push(y),r(T,[this.CSS.wrapper,...E])}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-nested-list",wrapperOrdered:"cdx-nested-list--ordered",wrapperUnordered:"cdx-nested-list--unordered",item:"cdx-nested-list__item",itemBody:"cdx-nested-list__item-body",itemContent:"cdx-nested-list__item-content",itemChildren:"cdx-nested-list__item-children",settingsWrapper:"cdx-nested-list__settings",settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive}}get listStyle(){return this.data.style||this.defaultListStyle}set listStyle(b){const E=Array.from(this.nodes.wrapper.querySelectorAll(`.${this.CSS.wrapper}`));E.push(this.nodes.wrapper),E.forEach(T=>{T.classList.toggle(this.CSS.wrapperUnordered,b==="unordered"),T.classList.toggle(this.CSS.wrapperOrdered,b==="ordered")}),this.data.style=b}get currentItem(){let b=window.getSelection().anchorNode;return b.nodeType!==Node.ELEMENT_NODE&&(b=b.parentNode),b.closest(`.${this.CSS.item}`)}enterPressed(b){const E=this.currentItem;b.stopPropagation(),b.preventDefault();const T=this.getItemContent(E).trim().length===0,y=E.parentNode===this.nodes.wrapper,v=E.nextElementSibling===null;if(y&&v&&T)return void this.getOutOfList();if(v&&T)return void this.unshiftItem();const B=l(c.extractFragmentFromCaretPositionTillTheEnd()),I=E.querySelector(`.${this.CSS.itemChildren}`),O=this.createItem(B,void 0);I&&Array.from(I.querySelectorAll(`.${this.CSS.item}`)).length>0?I.prepend(O):E.after(O),this.focusItem(O)}unshiftItem(){const b=this.currentItem,E=b.parentNode.closest(`.${this.CSS.item}`);if(!E)return;this.caret.save(),E.after(b),this.caret.restore();const T=E.querySelector(`.${this.CSS.itemChildren}`);T.children.length===0&&T.remove()}getItemContent(b){const E=b.querySelector(`.${this.CSS.itemContent}`);return a(E)?"":E.innerHTML}focusItem(b,E=!0){const T=b.querySelector(`.${this.CSS.itemContent}`);c.focus(T,E)}getOutOfList(){this.currentItem.remove(),this.api.blocks.insert(),this.api.caret.setToBlock(this.api.blocks.getCurrentBlockIndex())}backspace(b){if(!c.isAtStart())return;b.preventDefault();const E=this.currentItem,T=E.previousSibling,y=E.parentNode.closest(`.${this.CSS.item}`);if(!T&&!y)return;let v;if(b.stopPropagation(),T){const m=T.querySelectorAll(`.${this.CSS.item}`);v=Array.from(m).pop()||T}else v=y;const B=l(c.extractFragmentFromCaretPositionTillTheEnd()),I=v.querySelector(`.${this.CSS.itemContent}`);c.focus(I,!1),this.caret.save(),I.insertAdjacentHTML("beforeend",B);let O=E.querySelectorAll(`.${this.CSS.itemChildren} > .${this.CSS.item}`);O=Array.from(O),O=O.filter(m=>m.parentNode.closest(`.${this.CSS.item}`)===E),O.reverse().forEach(m=>{T?v.after(m):E.after(m)}),E.remove(),this.caret.restore()}addTab(b){b.stopPropagation(),b.preventDefault();const E=this.currentItem,T=E.previousSibling;if(!T)return;const y=T.querySelector(`.${this.CSS.itemChildren}`);if(this.caret.save(),y)y.appendChild(E);else{const v=this.makeListWrapper(void 0,[this.CSS.itemChildren]),B=T.querySelector(`.${this.CSS.itemBody}`);v.appendChild(E),B.appendChild(v)}this.caret.restore()}shiftTab(b){b.stopPropagation(),b.preventDefault(),this.unshiftItem()}static joinRecursive(b){return b.items.map(E=>`${E.content} ${h.joinRecursive(E)}`).join("")}static get conversionConfig(){return{export:b=>h.joinRecursive(b),import:b=>({items:[{content:b,items:[]}],style:"unordered"})}}}})(),s.default})()})})(vl);var Hh=vl.exports;const jh=Fn(Hh);var kl={exports:{}};(function(o,e){(function(t,n){o.exports=n()})(window,function(){return function(t){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=n,i.d=function(s,r,l){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var a in s)i.d(l,a,(function(c){return s[c]}).bind(null,a));return l},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="/",i(i.s=4)}([function(t,n,i){var s=i(1),r=i(2);typeof(r=r.__esModule?r.default:r)=="string"&&(r=[[t.i,r,""]]);var l={insert:"head",singleton:!1};s(r,l),t.exports=r.locals||{}},function(t,n,i){var s,r=function(){return s===void 0&&(s=!!(window&&document&&document.all&&!window.atob)),s},l=function(){var y={};return function(v){if(y[v]===void 0){var B=document.querySelector(v);if(window.HTMLIFrameElement&&B instanceof window.HTMLIFrameElement)try{B=B.contentDocument.head}catch{B=null}y[v]=B}return y[v]}}(),a=[];function c(y){for(var v=-1,B=0;B<a.length;B++)if(a[B].identifier===y){v=B;break}return v}function d(y,v){for(var B={},I=[],O=0;O<y.length;O++){var m=y[O],f=v.base?m[0]+v.base:m[0],w=B[f]||0,x="".concat(f," ").concat(w);B[f]=w+1;var A=c(x),M={css:m[1],media:m[2],sourceMap:m[3]};A!==-1?(a[A].references++,a[A].updater(M)):a.push({identifier:x,updater:T(M,v),references:1}),I.push(x)}return I}function u(y){var v=document.createElement("style"),B=y.attributes||{};if(B.nonce===void 0){var I=i.nc;I&&(B.nonce=I)}if(Object.keys(B).forEach(function(m){v.setAttribute(m,B[m])}),typeof y.insert=="function")y.insert(v);else{var O=l(y.insert||"head");if(!O)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");O.appendChild(v)}return v}var p,k=(p=[],function(y,v){return p[y]=v,p.filter(Boolean).join(`
`)});function h(y,v,B,I){var O=B?"":I.media?"@media ".concat(I.media," {").concat(I.css,"}"):I.css;if(y.styleSheet)y.styleSheet.cssText=k(v,O);else{var m=document.createTextNode(O),f=y.childNodes;f[v]&&y.removeChild(f[v]),f.length?y.insertBefore(m,f[v]):y.appendChild(m)}}function S(y,v,B){var I=B.css,O=B.media,m=B.sourceMap;if(O?y.setAttribute("media",O):y.removeAttribute("media"),m&&typeof btoa<"u"&&(I+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(m))))," */")),y.styleSheet)y.styleSheet.cssText=I;else{for(;y.firstChild;)y.removeChild(y.firstChild);y.appendChild(document.createTextNode(I))}}var b=null,E=0;function T(y,v){var B,I,O;if(v.singleton){var m=E++;B=b||(b=u(v)),I=h.bind(null,B,m,!1),O=h.bind(null,B,m,!0)}else B=u(v),I=S.bind(null,B,v),O=function(){(function(f){if(f.parentNode===null)return!1;f.parentNode.removeChild(f)})(B)};return I(y),function(f){if(f){if(f.css===y.css&&f.media===y.media&&f.sourceMap===y.sourceMap)return;I(y=f)}else O()}}t.exports=function(y,v){(v=v||{}).singleton||typeof v.singleton=="boolean"||(v.singleton=r());var B=d(y=y||[],v);return function(I){if(I=I||[],Object.prototype.toString.call(I)==="[object Array]"){for(var O=0;O<B.length;O++){var m=c(B[O]);a[m].references--}for(var f=d(I,v),w=0;w<B.length;w++){var x=c(B[w]);a[x].references===0&&(a[x].updater(),a.splice(x,1))}B=f}}}},function(t,n,i){(n=i(3)(!1)).push([t.i,`.cdx-underline {
    text-decoration: underline;
}
`,""]),t.exports=n},function(t,n,i){t.exports=function(s){var r=[];return r.toString=function(){return this.map(function(l){var a=function(c,d){var u=c[1]||"",p=c[3];if(!p)return u;if(d&&typeof btoa=="function"){var k=(S=p,b=btoa(unescape(encodeURIComponent(JSON.stringify(S)))),E="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(b),"/*# ".concat(E," */")),h=p.sources.map(function(T){return"/*# sourceURL=".concat(p.sourceRoot||"").concat(T," */")});return[u].concat(h).concat([k]).join(`
`)}var S,b,E;return[u].join(`
`)}(l,s);return l[2]?"@media ".concat(l[2]," {").concat(a,"}"):a}).join("")},r.i=function(l,a,c){typeof l=="string"&&(l=[[null,l,""]]);var d={};if(c)for(var u=0;u<this.length;u++){var p=this[u][0];p!=null&&(d[p]=!0)}for(var k=0;k<l.length;k++){var h=[].concat(l[k]);c&&d[h[0]]||(a&&(h[2]?h[2]="".concat(a," and ").concat(h[2]):h[2]=a),r.push(h))}},r}},function(t,n,i){i.r(n),i.d(n,"default",function(){return l}),i(0);function s(a){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(a)}function r(a,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,(p=u.key,k=void 0,k=function(h,S){if(s(h)!=="object"||h===null)return h;var b=h[Symbol.toPrimitive];if(b!==void 0){var E=b.call(h,S||"default");if(s(E)!=="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(h)}(p,"string"),s(k)==="symbol"?k:String(k)),u)}var p,k}var l=function(){function a(p){var k=p.api;(function(h,S){if(!(h instanceof S))throw new TypeError("Cannot call a class as a function")})(this,a),this.api=k,this.button=null,this.tag="U",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}var c,d,u;return c=a,u=[{key:"CSS",get:function(){return"cdx-underline"}},{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{u:{class:a.CSS}}}}],(d=[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}},{key:"surround",value:function(p){if(p){var k=this.api.selection.findParentTag(this.tag,a.CSS);k?this.unwrap(k):this.wrap(p)}}},{key:"wrap",value:function(p){var k=document.createElement(this.tag);k.classList.add(a.CSS),k.appendChild(p.extractContents()),p.insertNode(k),this.api.selection.expandToTag(k)}},{key:"unwrap",value:function(p){this.api.selection.expandToTag(p);var k=window.getSelection(),h=k.getRangeAt(0),S=h.extractContents();p.parentNode.removeChild(p),h.insertNode(S),k.removeAllRanges(),k.addRange(h)}},{key:"checkState",value:function(){var p=this.api.selection.findParentTag(this.tag,a.CSS);this.button.classList.toggle(this.iconClasses.active,!!p)}},{key:"toolboxIcon",get:function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7.5V11.5C9 12.2956 9.31607 13.0587 9.87868 13.6213C10.4413 14.1839 11.2044 14.5 12 14.5C12.7956 14.5 13.5587 14.1839 14.1213 13.6213C14.6839 13.0587 15 12.2956 15 11.5V7.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.71429 18H16.2857"/></svg>'}}])&&r(c.prototype,d),u&&r(c,u),Object.defineProperty(c,"prototype",{writable:!1}),a}()}]).default})})(kl);var $h=kl.exports;const Uh=Fn($h);var yl={exports:{}};(function(o,e){(function(t,n){o.exports=n()})(window,function(){return function(t){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=n,i.d=function(s,r,l){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var a in s)i.d(l,a,(function(c){return s[c]}).bind(null,a));return l},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="/",i(i.s=4)}([function(t,n,i){var s=i(1),r=i(2);typeof(r=r.__esModule?r.default:r)=="string"&&(r=[[t.i,r,""]]);var l={insert:"head",singleton:!1};s(r,l),t.exports=r.locals||{}},function(t,n,i){var s,r=function(){return s===void 0&&(s=!!(window&&document&&document.all&&!window.atob)),s},l=function(){var y={};return function(v){if(y[v]===void 0){var B=document.querySelector(v);if(window.HTMLIFrameElement&&B instanceof window.HTMLIFrameElement)try{B=B.contentDocument.head}catch{B=null}y[v]=B}return y[v]}}(),a=[];function c(y){for(var v=-1,B=0;B<a.length;B++)if(a[B].identifier===y){v=B;break}return v}function d(y,v){for(var B={},I=[],O=0;O<y.length;O++){var m=y[O],f=v.base?m[0]+v.base:m[0],w=B[f]||0,x="".concat(f," ").concat(w);B[f]=w+1;var A=c(x),M={css:m[1],media:m[2],sourceMap:m[3]};A!==-1?(a[A].references++,a[A].updater(M)):a.push({identifier:x,updater:T(M,v),references:1}),I.push(x)}return I}function u(y){var v=document.createElement("style"),B=y.attributes||{};if(B.nonce===void 0){var I=i.nc;I&&(B.nonce=I)}if(Object.keys(B).forEach(function(m){v.setAttribute(m,B[m])}),typeof y.insert=="function")y.insert(v);else{var O=l(y.insert||"head");if(!O)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");O.appendChild(v)}return v}var p,k=(p=[],function(y,v){return p[y]=v,p.filter(Boolean).join(`
`)});function h(y,v,B,I){var O=B?"":I.media?"@media ".concat(I.media," {").concat(I.css,"}"):I.css;if(y.styleSheet)y.styleSheet.cssText=k(v,O);else{var m=document.createTextNode(O),f=y.childNodes;f[v]&&y.removeChild(f[v]),f.length?y.insertBefore(m,f[v]):y.appendChild(m)}}function S(y,v,B){var I=B.css,O=B.media,m=B.sourceMap;if(O?y.setAttribute("media",O):y.removeAttribute("media"),m&&btoa&&(I+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(m))))," */")),y.styleSheet)y.styleSheet.cssText=I;else{for(;y.firstChild;)y.removeChild(y.firstChild);y.appendChild(document.createTextNode(I))}}var b=null,E=0;function T(y,v){var B,I,O;if(v.singleton){var m=E++;B=b||(b=u(v)),I=h.bind(null,B,m,!1),O=h.bind(null,B,m,!0)}else B=u(v),I=S.bind(null,B,v),O=function(){(function(f){if(f.parentNode===null)return!1;f.parentNode.removeChild(f)})(B)};return I(y),function(f){if(f){if(f.css===y.css&&f.media===y.media&&f.sourceMap===y.sourceMap)return;I(y=f)}else O()}}t.exports=function(y,v){(v=v||{}).singleton||typeof v.singleton=="boolean"||(v.singleton=r());var B=d(y=y||[],v);return function(I){if(I=I||[],Object.prototype.toString.call(I)==="[object Array]"){for(var O=0;O<B.length;O++){var m=c(B[O]);a[m].references--}for(var f=d(I,v),w=0;w<B.length;w++){var x=c(B[w]);a[x].references===0&&(a[x].updater(),a.splice(x,1))}B=f}}}},function(t,n,i){(n=i(3)(!1)).push([t.i,`.cdx-strikethrough {
    text-decoration: line-through;
}
`,""]),t.exports=n},function(t,n,i){t.exports=function(s){var r=[];return r.toString=function(){return this.map(function(l){var a=function(c,d){var u=c[1]||"",p=c[3];if(!p)return u;if(d&&typeof btoa=="function"){var k=(S=p,b=btoa(unescape(encodeURIComponent(JSON.stringify(S)))),E="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(b),"/*# ".concat(E," */")),h=p.sources.map(function(T){return"/*# sourceURL=".concat(p.sourceRoot||"").concat(T," */")});return[u].concat(h).concat([k]).join(`
`)}var S,b,E;return[u].join(`
`)}(l,s);return l[2]?"@media ".concat(l[2]," {").concat(a,"}"):a}).join("")},r.i=function(l,a,c){typeof l=="string"&&(l=[[null,l,""]]);var d={};if(c)for(var u=0;u<this.length;u++){var p=this[u][0];p!=null&&(d[p]=!0)}for(var k=0;k<l.length;k++){var h=[].concat(l[k]);c&&d[h[0]]||(a&&(h[2]?h[2]="".concat(a," and ").concat(h[2]):h[2]=a),r.push(h))}},r}},function(t,n,i){i.r(n),i.d(n,"default",function(){return l}),i(0);function s(a,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r(a,c,d){return c&&s(a.prototype,c),d&&s(a,d),a}var l=function(){function a(c){var d=c.api;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,a),this.api=d,this.button=null,this.tag="S",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}return r(a,null,[{key:"CSS",get:function(){return"cdx-strikethrough"}}]),r(a,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}},{key:"surround",value:function(c){if(c){var d=this.api.selection.findParentTag(this.tag,a.CSS);d?this.unwrap(d):this.wrap(c)}}},{key:"wrap",value:function(c){var d=document.createElement(this.tag);d.classList.add(a.CSS),d.appendChild(c.extractContents()),c.insertNode(d),this.api.selection.expandToTag(d)}},{key:"unwrap",value:function(c){this.api.selection.expandToTag(c);var d=window.getSelection(),u=d.getRangeAt(0),p=u.extractContents();c.parentNode.removeChild(c),u.insertNode(p),d.removeAllRanges(),d.addRange(u)}},{key:"checkState",value:function(){var c=this.api.selection.findParentTag(this.tag,a.CSS);this.button.classList.toggle(this.iconClasses.active,!!c)}},{key:"toolboxIcon",get:function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 8.50001C13.5 7 10.935 6.66476 9.75315 7.79706C9.27092 8.25909 9 8.88574 9 9.53915C9 10.1926 9.27092 10.8192 9.75315 11.2812C10.9835 12.46 13.0165 11.5457 14.2468 12.7244C14.7291 13.1865 15 13.8131 15 14.4665C15 15.1199 14.7291 15.7466 14.2468 16.2086C12.8659 17.5317 10 17.5 9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12H18"/></svg>'}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{s:{class:a.CSS}}}}]),a}()}]).default})})(yl);var zh=yl.exports;const Wh=Fn(zh);var wl={exports:{}};(function(o,e){(function(t,n){o.exports=n()})(window,function(){return function(t){var n={};function i(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=n,i.d=function(s,r,l){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var a in s)i.d(l,a,(function(c){return s[c]}).bind(null,a));return l},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="/",i(i.s=5)}([function(t,n,i){var s=i(1);typeof s=="string"&&(s=[[t.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(3)(s,r),s.locals&&(t.exports=s.locals)},function(t,n,i){(t.exports=i(2)(!1)).push([t.i,`.change-case-action {
    z-index: 90;
    user-select: none;
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    -o-user-select: none;    
}

.change-case-tool {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    padding: 5px 10px;
    font-size: 14px;
    line-height: 20px;
    font-weight: 500;
    cursor: pointer;
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
}

.change-case-tool:hover {
    background: #eff2f5;
}

.change-case-toolbar__label {
    color: #707684;
    font-size: 11px;
    font-weight: 500;
    letter-spacing: .33px;
    padding: 10px 10px 5px;
    text-transform: uppercase;
    cursor: pointer;
}`,""])},function(t,n){t.exports=function(i){var s=[];return s.toString=function(){return this.map(function(r){var l=function(a,c){var d=a[1]||"",u=a[3];if(!u)return d;if(c&&typeof btoa=="function"){var p=(h=u,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(h))))+" */"),k=u.sources.map(function(S){return"/*# sourceURL="+u.sourceRoot+S+" */"});return[d].concat(k).concat([p]).join(`
`)}var h;return[d].join(`
`)}(r,i);return r[2]?"@media "+r[2]+"{"+l+"}":l}).join("")},s.i=function(r,l){typeof r=="string"&&(r=[[null,r,""]]);for(var a={},c=0;c<this.length;c++){var d=this[c][0];typeof d=="number"&&(a[d]=!0)}for(c=0;c<r.length;c++){var u=r[c];typeof u[0]=="number"&&a[u[0]]||(l&&!u[2]?u[2]=l:l&&(u[2]="("+u[2]+") and ("+l+")"),s.push(u))}},s}},function(t,n,i){var s,r,l={},a=(s=function(){return window&&document&&document.all&&!window.atob},function(){return r===void 0&&(r=s.apply(this,arguments)),r}),c=function(m){var f={};return function(w){if(typeof w=="function")return w();if(f[w]===void 0){var x=(function(A){return document.querySelector(A)}).call(this,w);if(window.HTMLIFrameElement&&x instanceof window.HTMLIFrameElement)try{x=x.contentDocument.head}catch{x=null}f[w]=x}return f[w]}}(),d=null,u=0,p=[],k=i(4);function h(m,f){for(var w=0;w<m.length;w++){var x=m[w],A=l[x.id];if(A){A.refs++;for(var M=0;M<A.parts.length;M++)A.parts[M](x.parts[M]);for(;M<x.parts.length;M++)A.parts.push(v(x.parts[M],f))}else{var H=[];for(M=0;M<x.parts.length;M++)H.push(v(x.parts[M],f));l[x.id]={id:x.id,refs:1,parts:H}}}}function S(m,f){for(var w=[],x={},A=0;A<m.length;A++){var M=m[A],H=f.base?M[0]+f.base:M[0],L={css:M[1],media:M[2],sourceMap:M[3]};x[H]?x[H].parts.push(L):w.push(x[H]={id:H,parts:[L]})}return w}function b(m,f){var w=c(m.insertInto);if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var x=p[p.length-1];if(m.insertAt==="top")x?x.nextSibling?w.insertBefore(f,x.nextSibling):w.appendChild(f):w.insertBefore(f,w.firstChild),p.push(f);else if(m.insertAt==="bottom")w.appendChild(f);else{if(typeof m.insertAt!="object"||!m.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var A=c(m.insertInto+" "+m.insertAt.before);w.insertBefore(f,A)}}function E(m){if(m.parentNode===null)return!1;m.parentNode.removeChild(m);var f=p.indexOf(m);f>=0&&p.splice(f,1)}function T(m){var f=document.createElement("style");return m.attrs.type===void 0&&(m.attrs.type="text/css"),y(f,m.attrs),b(m,f),f}function y(m,f){Object.keys(f).forEach(function(w){m.setAttribute(w,f[w])})}function v(m,f){var w,x,A,M;if(f.transform&&m.css){if(!(M=f.transform(m.css)))return function(){};m.css=M}if(f.singleton){var H=u++;w=d||(d=T(f)),x=O.bind(null,w,H,!1),A=O.bind(null,w,H,!0)}else m.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(w=function(L){var W=document.createElement("link");return L.attrs.type===void 0&&(L.attrs.type="text/css"),L.attrs.rel="stylesheet",y(W,L.attrs),b(L,W),W}(f),x=(function(L,W,Q){var V=Q.css,ye=Q.sourceMap,Xe=W.convertToAbsoluteUrls===void 0&&ye;(W.convertToAbsoluteUrls||Xe)&&(V=k(V)),ye&&(V+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(ye))))+" */");var Re=new Blob([V],{type:"text/css"}),Ie=L.href;L.href=URL.createObjectURL(Re),Ie&&URL.revokeObjectURL(Ie)}).bind(null,w,f),A=function(){E(w),w.href&&URL.revokeObjectURL(w.href)}):(w=T(f),x=(function(L,W){var Q=W.css,V=W.media;if(V&&L.setAttribute("media",V),L.styleSheet)L.styleSheet.cssText=Q;else{for(;L.firstChild;)L.removeChild(L.firstChild);L.appendChild(document.createTextNode(Q))}}).bind(null,w),A=function(){E(w)});return x(m),function(L){if(L){if(L.css===m.css&&L.media===m.media&&L.sourceMap===m.sourceMap)return;x(m=L)}else A()}}t.exports=function(m,f){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(f=f||{}).attrs=typeof f.attrs=="object"?f.attrs:{},f.singleton||typeof f.singleton=="boolean"||(f.singleton=a()),f.insertInto||(f.insertInto="head"),f.insertAt||(f.insertAt="bottom");var w=S(m,f);return h(w,f),function(x){for(var A=[],M=0;M<w.length;M++){var H=w[M];(L=l[H.id]).refs--,A.push(L)}for(x&&h(S(x,f),f),M=0;M<A.length;M++){var L;if((L=A[M]).refs===0){for(var W=0;W<L.parts.length;W++)L.parts[W]();delete l[L.id]}}}};var B,I=(B=[],function(m,f){return B[m]=f,B.filter(Boolean).join(`
`)});function O(m,f,w,x){var A=w?"":x.css;if(m.styleSheet)m.styleSheet.cssText=I(f,A);else{var M=document.createTextNode(A),H=m.childNodes;H[f]&&m.removeChild(H[f]),H.length?m.insertBefore(M,H[f]):m.appendChild(M)}}},function(t,n){t.exports=function(i){var s=typeof window<"u"&&window.location;if(!s)throw new Error("fixUrls requires window.location");if(!i||typeof i!="string")return i;var r=s.protocol+"//"+s.host,l=r+s.pathname.replace(/\/[^\/]*$/,"/");return i.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(a,c){var d,u=c.trim().replace(/^"(.*)"$/,function(p,k){return k}).replace(/^'(.*)'$/,function(p,k){return k});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(u)?a:(d=u.indexOf("//")===0?u:u.indexOf("/")===0?r+u:l+u.replace(/^\.\//,""),"url("+JSON.stringify(d)+")")})}},function(t,n,i){i.r(n),i(0);function s(a,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r(a,c,d){return c&&s(a.prototype,c),d&&s(a,d),a}i.d(n,"default",function(){return l});var l=function(){function a(c){var d=c.config,u=c.api;(function(p,k){if(!(p instanceof k))throw new TypeError("Cannot call a class as a function")})(this,a),this.api=u,this.button=null,this.optionButtons=[],this._state=!0,this.selectedText=null,this.range=null,this._settings=d,this.CSS={actions:"change-case-action",toolbarLabel:"change-case-toolbar__label",tool:"change-case-tool",toolbarBtnActive:this.api.styles.settingsButtonActive,inlineButton:this.api.styles.inlineToolButton},this.caseOptions={titleCase:"Title Case",lowerCase:"lower case",upperCase:"UPPER CASE",localeLowerCase:"local lower cas",localeUpperCase:"LCALE UPPER CASE",sentenceCase:"Sentence case",toggleCase:"tOOGLE cASE"}}return r(a,[{key:"state",get:function(){return this._state}}],[{key:"isInline",get:function(){return!0}}]),r(a,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 100 100" stroke="currentColor">
            <path d="m46.099 74.271-3.6868-13.686h-18.523l-3.6868 13.686h-11.605l17.934-57.653h13.17l18.001 57.653zm-6.2632-23.813q-5.0972-18.612-5.7524-21.056c-0.42199-1.6168-0.73293-2.9077-0.91061-3.8477q-1.1105 5.0133-6.5741 24.828z" stroke-width="1.1797"/>
            <path d="m87.355 74.271-2.4938-8.4556h-12.529l-2.4938 8.4556h-7.8496l12.131-35.619h8.9087l12.176 35.619zm-4.2365-14.712q-3.4478-11.499-3.891-13.009c-0.28544-0.99887-0.49576-1.7964-0.61595-2.3772q-0.75116 3.0973-4.4469 15.339z" stroke-width=".76265"/>
            </svg>`,this.button.classList.add(this.CSS.inlineButton),this.button}},{key:"checkState",value:function(c){c.anchorNode}},{key:"convertCase",value:function(c,d){var u=this;if(c){var p=c.cloneContents();p&&(p.childNodes.forEach(function(k){if(k.nodeName==="#text")switch(d){case"titleCase":k.textContent=k.textContent.replace(/\w\S*/g,function(h){return h.charAt(0).toUpperCase()+h.slice(1,h.length).toLowerCase()});break;case"lowerCase":k.textContent=function(h){return h.toLowerCase()}(k.textContent);break;case"upperCase":k.textContent=function(h){return h.toUpperCase()}(k.textContent);break;case"localeLowerCase":k.textContent=function(h,S){return h.toLocaleLowerCase(S)}(k.textContent,u._settings.locale);break;case"localeUpperCase":k.textContent=function(h,S){return h.toLocaleUpperCase(S)}(k.textContent,u._settings.locale);break;case"sentenceCase":k.textContent=function(h){return h.charAt(0).toUpperCase()+h.slice(1,h.length).toLowerCase()}(k.textContent);break;case"toggleCase":k.textContent=function(h){return h.replace(/\w\S*/g,function(S){return S.charAt(0).toLowerCase()+S.slice(1,S.length).toUpperCase()})}(k.textContent)}}),c.extractContents(),c.insertNode(p),this.api.inlineToolbar.close())}}},{key:"surround",value:function(c){this.selectedText=c.cloneContents(),this.actions.hidden=!this.actions.hidden,this.range=this.actions.hidden?null:c,this.state=!this.actions.hidden}},{key:"renderActions",value:function(){var c=this;this.actions=document.createElement("div"),this.actions.classList.add(this.CSS.actions);var d=document.createElement("div");d.classList.add(this.CSS.toolbarLabel),d.innerHTML="Change Case",this.actions.appendChild(d),this.optionButtons=Object.keys(this.caseOptions).map(function(E){var T=document.createElement("div");return T.classList.add(c.CSS.tool),T.dataset.mode=E,T.innerHTML=c.caseOptions[E],T});var u=!0,p=!1,k=void 0;try{for(var h,S=function(){var E=h.value;c.actions.appendChild(E),c.api.listeners.on(E,"click",function(){c.convertCase(c.range,E.dataset.mode)})},b=this.optionButtons[Symbol.iterator]();!(u=(h=b.next()).done);u=!0)S()}catch(E){p=!0,k=E}finally{try{u||b.return==null||b.return()}finally{if(p)throw k}}return this.actions.hidden=!0,this.actions}},{key:"destroy",value:function(){var c=!0,d=!1,u=void 0;try{for(var p,k=this.optionButtons[Symbol.iterator]();!(c=(p=k.next()).done);c=!0){var h=p.value;this.api.listeners.off(h,"click")}}catch(S){d=!0,u=S}finally{try{c||k.return==null||k.return()}finally{if(d)throw u}}}},{key:"state",set:function(c){this._state=c,this.button.classList.toggle(this.CSS.toolbarBtnActive,c)}},{key:"title",get:function(){return"Change Case"}}]),a}()}])})})(wl);var Kh=wl.exports;const qh=Fn(Kh);function Xs(o,e){return new Fh({holder:o,tools:{list:{class:jh,inlineToolbar:!0,config:{defaultStyle:"unordered"}},underline:Uh,strikethrough:Wh,changeCase:qh},inlineToolbar:["bold","italic","underline","strikethrough","changeCase"],autofocus:!0,data:e})}const xn=re({height:0,width:0}),xo=10,sn=14,rn=18,Yh=Ye({__name:"TheWorkspace",props:{slide:{}},setup(o){const t=In(o,"slide");to(t,()=>{k()});const n=re([]),i=re(),s=re();let r,l,a,c,d=re({active:!1,editorInstance:void 0,top:0,left:0}),u,p;Xo(()=>{r=i.value.getContext("2d",{willReadFrequently:!0}),xn.value.height=i.value.height,xn.value.width=i.value.width,$e.value.addImage=S,$e.value.addRectangle=b,l=i.value.getBoundingClientRect(),k(),window.addEventListener("click",v),r.textBaseline="top"});const k=()=>{var w;p=new Zd(i.value,(w=t.value)==null?void 0:w.elements,n.value,h),h()},h=()=>{var w;if(!(i.value===null||!((w=t.value)!=null&&w.elements))){r.clearRect(0,0,i.value.width,i.value.height);for(const x of t.value.elements)if(x.type==="rectangle")r.fillStyle=x.color||"",r.fillRect(x.area.x,x.area.y,x.area.width,x.area.height);else if(x.type==="image"){const A=document.createElement("canvas"),M=A.getContext("2d");A.width=x.content.width,A.height=x.content.height,M==null||M.putImageData(x.content,0,0),r.drawImage(A,x.area.x,x.area.y,x.area.width,x.area.height)}else x.type==="text"&&dn(x.content,x.area.x,x.area.y,r,rn)}};function S(w){if(!w)return;const x=i.value.width,A=i.value.height,M=new Image;M.src=URL.createObjectURL(w),M.addEventListener("load",()=>{var Xe;const H=M.width>x,L=M.height>A;if(a=M.width,c=M.height,H||L){const Re=Math.min(x/M.width,A/M.height);a=M.width*Re,c=M.height*Re}const W=(x-a)/2,Q=(A-c)/2;r==null||r.drawImage(M,W,Q,a,c);const ye={type:"image",content:r==null?void 0:r.getImageData(W,Q,a,c),area:{x:W,y:Q,width:a,height:c}};(Xe=t.value)==null||Xe.elements.push(ye),ot.save(),T(ye)})}const b=()=>{var x;const w={type:"rectangle",color:"blue",area:{x:0,y:0,width:100,height:100}};(x=t.value)==null||x.elements.push(w),h(),ot.save()};function E(w){if(!t.value||w.clientX<l.left||w.clientX>l.right||w.clientY<l.top||w.clientY>l.bottom)return;const x=w.clientX-l.left,A=w.clientY-l.top;for(let M=t.value.elements.length-1;M>=0;M--){const H=t.value.elements[M],{area:L}=H;if(L.x<=x&&x<=L.x+L.width&&L.y<=A&&A<=L.y+L.height)return h(),T(H),v(),f(),H.type==="text"&&$e.value.isTextEdit&&I(H,L.x+l.left,L.y+l.top),H;d.value.active&&v(),f(),h()}v(),$e.value.isTextEdit&&y(w.clientX,w.clientY)}function T(w){const{width:x,height:A}=w.area,{x:M,y:H}=w.type==="text"?{x:w.area.x-xo,y:w.area.y-sn}:w.area;r.fillStyle="#1a73e8",r.strokeStyle="#1a73e8",r.strokeRect(M,H,x,A),r.strokeStyle="#fff";const L=8,W=[{x:M-L/2,y:H-L/2,width:L,height:L},{x:M+x-L/2,y:H-L/2,width:L,height:L},{x:M+x-L/2,y:H+A-L/2,width:L,height:L},{x:M-L/2,y:H+A-L/2,width:L,height:L},{x:M+x/2-L/2,y:H-L/2,width:L,height:L},{x:M+x-L/2,y:H+A/2-L/2,width:L,height:L},{x:M+x/2-L/2,y:H+A-L/2,width:L,height:L},{x:M-L/2,y:H+A/2-L/2,width:L,height:L}];for(let Q=0;Q<W.length;Q++){const V=W[Q];r.fillRect(V.x,V.y,L,L),r.strokeRect(V.x,V.y,L,L),n.value[Q]=V}}function y(w,x){d.value={editorInstance:Xs("editor"),top:x,left:w,active:!0}}function v(){d.value.active&&d.value.editing?O():d.value.active&&B()}function B(){const w=+getComputedStyle(s.value).width.slice(0,-2),x=+getComputedStyle(s.value).height.slice(0,-2);let A=d.value.left-l.left+xo,M=d.value.top-l.top+sn;d.value.editorInstance&&d.value.editorInstance.save().then(H=>{var W;if(H.blocks.length===0){f();return}const L={type:"text",content:H,area:{x:A,y:M,width:w,height:x}};(W=t.value)==null||W.elements.push(L),dn(H,A,M,r,rn),d.value.width=m(H),f(),ot.save()}).catch(H=>{console.log("Saving failed: ",H)})}function I(w,x,A){if(!t.value)return;const{content:M}=w;u=t.value.elements.indexOf(w),t.value.elements[u].content=null,h(),$e.value.isTextEdit=!0,d.value={editorInstance:Xs("editor",M),top:A-sn,left:x-xo,editing:!0,active:!0}}function O(){var L;const w=(L=t.value)==null?void 0:L.elements[u],x=+getComputedStyle(s.value).width.slice(0,-2),A=+getComputedStyle(s.value).height.slice(0,-2);let M=d.value.left-l.left+xo,H=d.value.top-l.top+sn;d.value.editorInstance&&d.value.editorInstance.save().then(W=>{if(W.blocks.length===0){f();return}w.content=W,w.area.width=x,w.area.height=A,dn(W,M,H,r,rn),d.value.width=m(W),f(),ot.save()}).catch(W=>{console.log("Saving failed: ",W)})}function m(w){let x=0;return w.blocks.forEach(({type:A,data:M})=>{A==="paragraph"?x=Math.max(x,M.text):A==="list"&&(x=Math.max(x,...M.items))}),x}function f(){var w;typeof d.value.editorInstance>"u"||"destroy"in d.value.editorInstance&&($e.value.isTextEdit=!1,d.value.active=!1,(w=d.value.editorInstance)==null||w.destroy())}return(w,x)=>(Be(),gt(Ue,null,[xe("div",{class:ce(w.$style.container)},[xe("canvas",{ref_key:"canvas",ref:i,id:"workspace",onMousedown:x[0]||(x[0]=Bt((...A)=>{var M,H;return((M=we(p))==null?void 0:M.drag)&&((H=we(p))==null?void 0:H.drag(...A))},["prevent"])),onMouseup:x[1]||(x[1]=Bt((...A)=>{var M,H;return((M=we(p))==null?void 0:M.drop)&&((H=we(p))==null?void 0:H.drop(...A))},["prevent"])),onMouseout:x[2]||(x[2]=Bt((...A)=>{var M,H;return((M=we(p))==null?void 0:M.drop)&&((H=we(p))==null?void 0:H.drop(...A))},["prevent"])),onMousemove:x[3]||(x[3]=Bt((...A)=>{var M,H;return((M=we(p))==null?void 0:M.move)&&((H=we(p))==null?void 0:H.move(...A))},["prevent"])),class:ce(w.$style.canvas),width:864,height:486,onClick:x[4]||(x[4]=Bt(A=>E(A),["prevent","stop"]))},null,34)],2),xe("div",{ref_key:"editor",ref:s,id:"editor",class:ce([w.$style.editor,we(d).active?w.$style.editor_active:""]),style:Bn({top:we(d).top+"px",left:we(d).left+"px",width:we(d).width+"px","font-size":rn+"px","padding-left":xo+"px"}),onClick:x[5]||(x[5]=Bt(()=>{},["stop"]))},null,6)],64))}}),Xh="_container_i225c_2",Vh="_canvas_i225c_7",Zh="_editor_i225c_18",Jh="_editor_active_i225c_28",Gh={container:Xh,canvas:Vh,"image-input":"_image-input_i225c_13",editor:Zh,editor_active:Jh},Qh={$style:Gh},ep=Et(Yh,[["__cssModules",Qh]]),tp=Ye({__name:"ToolsButton",props:{action:{type:Function},disabled:{type:Boolean},highlighted:{type:Boolean},iconName:{}},setup(o){const e=o;return(t,n)=>(Be(),zt(kn,{class:ce(t.$style.button),variant:"light",action:e.action,"icon-name":e.iconName,disabled:e.disabled,highlighted:e.highlighted},null,8,["class","action","icon-name","disabled","highlighted"]))}}),op="_button_1yqg0_2",np={button:op},ip={$style:np},Co=Et(tp,[["__cssModules",ip]]),sp=Ye({__name:"ToolsPanel",setup(o){const e=re(null),t=()=>{var l;e.value!=null&&((l=e.value)==null||l.addEventListener("change",n),e.value.click(),r())},n=()=>{if(e.value==null)return;const l=e.value.files[0];$e.value.addImage&&$e.value.addImage(l),e.value&&e.value.removeEventListener("change",n)},i=()=>{$e.value.addRectangle&&$e.value.addRectangle(),r()},s=()=>{$e.value.isTextEdit=!0},r=()=>{$e.value.isTextEdit=!1};return(l,a)=>(Be(),gt("div",{class:ce(l.$style.toolsPanel)},[le(Co,{"icon-name":"arrow-left",action:()=>we(ot).undo()},null,8,["action"]),le(Co,{"icon-name":"arrow-right",action:()=>we(ot).redo()},null,8,["action"]),xe("div",{class:ce(l.$style.delimiter)},null,2),le(Co,{"icon-name":"font",highlighted:we($e).isTextEdit,action:s},null,8,["highlighted"]),le(Co,{"icon-name":"image-tool",action:t}),le(Co,{"icon-name":"copy",action:i}),xe("input",{ref_key:"uploadInput",ref:e,type:"file",hidden:""},null,512)],2))}}),rp="_toolsPanel_hktfv_2",lp="_delimiter_hktfv_11",ap={toolsPanel:rp,delimiter:lp},cp={$style:ap},dp=Et(sp,[["__cssModules",cp]]),up=Ye({__name:"FullscreenView",props:{slide:{}},emits:["back","next"],setup(o,{emit:e}){const n=In(o,"slide"),i=re(0),s=re(0);to(n,()=>{yn(l.value,a,n.value,i.value,s.value)});const r=c=>{c.key==="ArrowLeft"?e("back"):c.key==="ArrowRight"&&e("next")};Xo(()=>{i.value=screen.width/xn.value.width,s.value=Wr*i.value,l.value.width=screen.width,l.value.height=i.value*xn.value.height,a=l.value.getContext("2d",{willReadFrequently:!0}),yn(l.value,a,n.value,i.value,s.value),document.addEventListener("keydown",r)}),Pi(()=>{document.removeEventListener("keydown",r)});const l=re();let a;return(c,d)=>(Be(),gt("canvas",{ref_key:"canvas",ref:l},null,512))}});class hp{get(e){return localStorage.getItem(e)}set(e,t){return localStorage.setItem(e,t)}remove(e){return localStorage.removeItem(e)}onConfigured(){return Promise.resolve("success")}}var _t,lo,ki,fp;class pp{constructor(e,t){ue(this,ki);Jo(this,"namespace");ue(this,_t,void 0);ue(this,lo,null);this.namespace=e,pe(this,_t,(t==null?void 0:t.engine)??new hp),F(this,_t).onConfigured().then(()=>{F(this,lo)&&F(this,lo).call(this)})}async get(e){return F(this,_t).get(e)}async set(e,t){await F(this,_t).set(e,t)}async remove(e){await F(this,_t).remove(e)}async onConfigured(){return new Promise(e=>{pe(this,lo,e)})}}_t=new WeakMap,lo=new WeakMap,ki=new WeakSet,fp=function(e){return`[[${this.namespace}]]-${e}`};var ut,We;class gp{constructor(e,t,n){ue(this,ut,void 0);ue(this,We,void 0);Jo(this,"resolver");pe(this,We,t);const i=indexedDB.open(e);i.onupgradeneeded=s=>{pe(this,ut,s.target.result),F(this,ut).objectStoreNames.contains(F(this,We))||F(this,ut).createObjectStore(F(this,We),{...n})},i.onsuccess=s=>{pe(this,ut,s.target.result),this.resolver("success")}}get(e){const i=F(this,ut).transaction(F(this,We)).objectStore(F(this,We)).get(e);return new Promise((s,r)=>{i.onsuccess=()=>{s(i.result)},i.onerror=()=>{console.error(`An error occurred while getting data by key "${e}". Error: ${i.error}`),r(i.error)}})}set(e,t){const i=F(this,ut).transaction(F(this,We),"readwrite").objectStore(F(this,We)),s={...t,id:e},r=i.put(s);return new Promise((l,a)=>{r.onsuccess=()=>{l()},r.onerror=()=>{console.error(`An error occurred while setting data by key "${e}". Error: ${r.error}`),a(r.error)}})}remove(e){const i=F(this,ut).transaction(F(this,We)).objectStore(F(this,We)).delete(e);return new Promise((s,r)=>{i.onsuccess=()=>{s()},i.onerror=()=>{console.error(`An error occurred while removing data by key "${e}". Error: ${i.error}`),r(i.error)}})}onConfigured(){return new Promise(e=>{this.resolver=e})}}ut=new WeakMap,We=new WeakMap;function mp(o,e){return new pp(o,e)}const bp="pt-key",vp="PT-DB",kp="slides",Lo=mp(bp,{engine:new gp(vp,kp,{keyPath:"id"})}),yp=Ye({__name:"App",setup(o){const e=re(Bd),t=re(null),n=re(-1);Xo(()=>{Lo.get("slides").then(a=>{a.data&&(e.value=a.data),ot.init(e)}),n.value=0,e.value[n.value]&&(t.value=e.value[n.value].id)});const i=a=>{t.value=a,n.value=e.value.findIndex(c=>c.id===a)},s=a=>{const c=e.value.findIndex(d=>d.id===a);e.value.splice(c,1),n.value=0,t.value=e.value[n.value].id,ot.save()},r=()=>{n.value!==0&&n.value--},l=()=>{n.value<e.value.length&&n.value++};return(a,c)=>we(zr)?(Be(),zt(up,{key:0,onBack:r,onNext:l,slide:e.value[n.value]},null,8,["slide"])):(Be(),gt("div",{key:1,class:ce(a.$style.container)},[le(Td),xe("div",{class:ce(a.$style.row)},[le(Yd,{slides:e.value,currentSlideId:t.value,onSelectSlide:i,onRemoveSlide:s},null,8,["slides","currentSlideId"]),xe("div",{class:ce(a.$style.column)},[le(dp),le(ep,{slide:e.value[n.value]},null,8,["slide"])],2)],2)],2))}}),wp="_container_f3q1k_2",xp="_row_f3q1k_8",Cp="_column_f3q1k_15",Ep={container:wp,row:xp,column:Cp},Sp={$style:Ep},Tp=Et(yp,[["__cssModules",Sp]]);function qe(o){if(typeof o!="object"||o===null)return o;let e;if(o instanceof Date)e=new Date,e.setTime(o.getTime());else if(o instanceof RegExp)e=new RegExp(o);else if(o instanceof Map)e=new Map,o.forEach((t,n)=>{e.set(n,qe(t))});else if(o instanceof Set)e=new Set,o.forEach(t=>{e.add(qe(t))});else if(o instanceof ImageData){const{width:t,height:n,data:i}=o,s=new Uint8ClampedArray(i.length);s.set(i),e=new ImageData(s,t,n)}else if(Array.isArray(o)){e=[];for(let t=0;t<o.length;t++)e[t]=qe(o[t])}else e={},Object.keys(o).forEach(t=>{e[t]=qe(o[t])});return e}let Vs;const Bp=5;var Me,kt,Ke,qo;class _p{constructor(e){ue(this,Me,void 0);ue(this,kt,void 0);ue(this,Ke,void 0);ue(this,qo,void 0);if(Vs)throw new Error("Only one HistoryManger allowed");Vs=this,pe(this,Me,[]),pe(this,qo,(e==null?void 0:e.limit)||Bp),pe(this,Ke,-1)}init(e){pe(this,kt,e),this.save()}save(){const e=re(qe(F(this,kt).value));if(this.canRedo){const t=F(this,Me).length-1-F(this,Ke);pe(this,Me,qe(F(this,Me).splice(-t,t)))}F(this,Me).length>=F(this,qo)&&F(this,Me).shift(),F(this,Me).push(qe(e.value)),pe(this,Ke,F(this,Me).length-1),Lo.set("slides",{id:"slides",data:qe(e.value)})}undo(){this.canUndo&&($n(this,Ke)._--,F(this,kt).value=qe(F(this,Me)[F(this,Ke)]),Lo.set("slides",{id:"slides",data:qe(F(this,kt).value)}))}redo(){this.canRedo&&($n(this,Ke)._++,F(this,kt).value=qe(F(this,Me)[F(this,Ke)]),Lo.set("slides",{id:"slides",data:qe(F(this,kt).value)}))}get canUndo(){return F(this,Me).length!==0&&F(this,Ke)>0}get canRedo(){return F(this,Me).length!==0&&F(this,Ke)<F(this,Me).length-1}}Me=new WeakMap,kt=new WeakMap,Ke=new WeakMap,qo=new WeakMap;const Ip=id(Tp),ot=new _p({limit:20});Lo.onConfigured().then(()=>{Ip.mount("#app")});export{xe as a,gt as c,Be as o};
